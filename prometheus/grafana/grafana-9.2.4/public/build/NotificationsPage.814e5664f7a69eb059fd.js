"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[743],{73810:(e,a,t)=>{t.r(a),t.d(a,{NotificationsPage:()=>M,default:()=>T});var n=t(68404),s=t(90894),i=t(27549),r=t(31423),o=t(9617),l=t(24085),c=t(8771),d=t(95922),f=t(40920),u=t(19901),p=t(46094);function m(e,a){return(0,p.Z)(1,arguments),(0,u.Z)(e,Date.now(),a)}var h=t(48147),x=t(11340),v=t(45916);const g=e=>{let{children:a,className:t,isSelected:n,onClick:s,severity:i="error",title:r,traceId:l,timestamp:c}=e;const f=(0,o.l4)(),u=D(f),p=h.v.featureToggles.tracing&&l;return(0,v.jsxs)(x.Z,{className:t,onClick:s,children:[(0,v.jsx)(x.Z.Heading,{children:r}),(0,v.jsx)(x.Z.Description,{children:a}),(0,v.jsx)(x.Z.Figure,{children:(0,v.jsx)(d.X,{onChange:s,tabIndex:-1,value:n})}),(0,v.jsxs)(x.Z.Tags,{className:u.trace,children:[p&&(0,v.jsx)("span",{children:`Trace ID: ${l}`}),c&&m(c,{addSuffix:!0})]})]})},D=e=>({trace:(0,i.css)({alignItems:"flex-end",alignSelf:"flex-end",color:e.colors.text.secondary,display:"flex",flexDirection:"column",fontSize:e.typography.pxToRem(10),justifySelf:"flex-end"})});var j,y,w,Z,b=t(49842),N=t(47570);function I(){const e=(0,N.I0)(),a=(0,N.v9)((e=>(0,b.mE)(e.appNotifications))),[t,s]=(0,n.useState)([]),u=a.every((e=>t.includes(e.id))),p=(0,n.useRef)((0,N.v9)((e=>(0,b.Av)(e.appNotifications)))),m=(0,o.wW)(S);(0,r.Z)((()=>{e((0,b.Jk)(Date.now()))}));return 0===a.length?(0,v.jsxs)("div",{className:m.noNotifsWrapper,children:[j||(j=(0,v.jsx)(l.J,{name:"bell",size:"xxl"})),y||(y=(0,v.jsx)("span",{children:"Notifications you have received will appear here."}))]}):(0,v.jsxs)("div",{className:m.wrapper,children:[w||(w=(0,v.jsx)(c.b,{severity:"info",title:"This page displays past errors and warnings. Once dismissed, they cannot be retrieved."})),(0,v.jsxs)("div",{className:m.topRow,children:[(0,v.jsx)(d.X,{value:u,onChange:e=>{return t=e.target.checked,void s(t?a.map((e=>e.id)):[]);var t}}),(0,v.jsx)(f.zx,{disabled:0===t.length,onClick:()=>{u?e((0,b.F6)()):t.forEach((a=>{e((0,b.hS)(a))})),s([])},children:"Dismiss notifications"})]}),(0,v.jsx)("ul",{className:m.list,children:a.map((e=>(0,v.jsx)("li",{className:m.listItem,children:(0,v.jsx)(g,{className:(0,i.cx)({[m.newItem]:e.timestamp>p.current}),isSelected:t.includes(e.id),onClick:()=>{return a=e.id,void s((e=>e.includes(a)?e.filter((e=>e!==a)):[...e,a]));var a},severity:e.severity,title:e.title,timestamp:e.timestamp,traceId:e.traceId,children:(0,v.jsx)("span",{children:e.text})})},e.id)))})]})}function S(e){return{topRow:(0,i.css)({alignItems:"center",display:"flex",gap:e.spacing(2)}),list:(0,i.css)({display:"flex",flexDirection:"column"}),listItem:(0,i.css)({alignItems:"center",display:"flex",gap:e.spacing(2),listStyle:"none",position:"relative"}),newItem:(0,i.css)({"&::before":{content:'""',height:"100%",position:"absolute",left:"-7px",top:0,background:e.colors.gradients.brandVertical,width:e.spacing(.5),borderRadius:e.shape.borderRadius(1)}}),noNotifsWrapper:(0,i.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)}),wrapper:(0,i.css)({display:"flex",flexDirection:"column",gap:e.spacing(2)})}}const M=()=>Z||(Z=(0,v.jsx)(s.T,{navId:"profile/notifications",children:(0,v.jsx)(s.T.Contents,{children:(0,v.jsx)(I,{})})})),T=M},19901:(e,a,t)=>{t.d(a,{Z:()=>h});var n=t(55547),s=t(3049),i=t(74476),r=t(99901),o=t(79346),l=t(91729);function c(e,a){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e}function d(e){return c({},e)}var f=t(5751),u=t(46094),p=1440,m=43200;function h(e,a,t){var h,x;(0,u.Z)(2,arguments);var v=(0,n.j)(),g=null!==(h=null!==(x=null==t?void 0:t.locale)&&void 0!==x?x:v.locale)&&void 0!==h?h:o.Z;if(!g.formatDistance)throw new RangeError("locale must contain formatDistance property");var D=(0,s.Z)(e,a);if(isNaN(D))throw new RangeError("Invalid time value");var j,y,w=c(d(t),{addSuffix:Boolean(null==t?void 0:t.addSuffix),comparison:D});D>0?(j=(0,l.Z)(a),y=(0,l.Z)(e)):(j=(0,l.Z)(e),y=(0,l.Z)(a));var Z,b=(0,r.Z)(y,j),N=((0,f.Z)(y)-(0,f.Z)(j))/1e3,I=Math.round((b-N)/60);if(I<2)return null!=t&&t.includeSeconds?b<5?g.formatDistance("lessThanXSeconds",5,w):b<10?g.formatDistance("lessThanXSeconds",10,w):b<20?g.formatDistance("lessThanXSeconds",20,w):b<40?g.formatDistance("halfAMinute",0,w):b<60?g.formatDistance("lessThanXMinutes",1,w):g.formatDistance("xMinutes",1,w):0===I?g.formatDistance("lessThanXMinutes",1,w):g.formatDistance("xMinutes",I,w);if(I<45)return g.formatDistance("xMinutes",I,w);if(I<90)return g.formatDistance("aboutXHours",1,w);if(I<p){var S=Math.round(I/60);return g.formatDistance("aboutXHours",S,w)}if(I<2520)return g.formatDistance("xDays",1,w);if(I<m){var M=Math.round(I/p);return g.formatDistance("xDays",M,w)}if(I<86400)return Z=Math.round(I/m),g.formatDistance("aboutXMonths",Z,w);if((Z=(0,i.Z)(y,j))<12){var T=Math.round(I/m);return g.formatDistance("xMonths",T,w)}var X=Z%12,k=Math.floor(Z/12);return X<3?g.formatDistance("aboutXYears",k,w):X<9?g.formatDistance("overXYears",k,w):g.formatDistance("almostXYears",k+1,w)}}}]);
//# sourceMappingURL=NotificationsPage.814e5664f7a69eb059fd.js.map