{"version":3,"file":"MuteTimings.1afa0c19940d8906a8ee.js","mappings":"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","sources":["webpack://grafana/./public/app/features/alerting/unified/utils/mute-timings.ts","webpack://grafana/./public/app/features/alerting/unified/components/amroutes/MuteTimingTimeRange.tsx","webpack://grafana/./public/app/features/alerting/unified/components/amroutes/MuteTimingTimeInterval.tsx","webpack://grafana/./public/app/features/alerting/unified/components/amroutes/MuteTimingForm.tsx","webpack://grafana/./public/app/features/alerting/unified/MuteTimings.tsx","webpack://grafana/./public/app/features/alerting/unified/components/AlertingPageWrapper.tsx","webpack://grafana/./public/app/features/alerting/unified/components/Provisioning.tsx","webpack://grafana/./public/app/features/alerting/unified/hooks/useAlertManagerSourceName.ts","webpack://grafana/./public/app/features/alerting/unified/hooks/useAlertManagerSources.ts"],"sourcesContent":["import { omitBy, isUndefined } from 'lodash';\n\nimport { MuteTimeInterval, TimeInterval } from 'app/plugins/datasource/alertmanager/types';\n\nimport { MuteTimingFields, MuteTimingIntervalFields } from '../types/mute-timing-form';\n\nexport const DAYS_OF_THE_WEEK = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n\nexport const MONTHS = [\n  'january',\n  'february',\n  'march',\n  'april',\n  'may',\n  'june',\n  'july',\n  'august',\n  'september',\n  'october',\n  'november',\n  'december',\n];\n\nexport const defaultTimeInterval: MuteTimingIntervalFields = {\n  times: [{ start_time: '', end_time: '' }],\n  weekdays: '',\n  days_of_month: '',\n  months: '',\n  years: '',\n};\n\nexport const validateArrayField = (value: string, validateValue: (input: string) => boolean, invalidText: string) => {\n  if (value) {\n    return (\n      value\n        .split(',')\n        .map((x) => x.trim())\n        .every((entry) => entry.split(':').every(validateValue)) || invalidText\n    );\n  } else {\n    return true;\n  }\n};\n\nconst convertStringToArray = (str: string) => {\n  return str ? str.split(',').map((s) => s.trim()) : undefined;\n};\n\nexport const createMuteTiming = (fields: MuteTimingFields): MuteTimeInterval => {\n  const timeIntervals: TimeInterval[] = fields.time_intervals.map(\n    ({ times, weekdays, days_of_month, months, years }) => {\n      const interval = {\n        times: times.filter(({ start_time, end_time }) => !!start_time && !!end_time),\n        weekdays: convertStringToArray(weekdays)?.map((v) => v.toLowerCase()),\n        days_of_month: convertStringToArray(days_of_month),\n        months: convertStringToArray(months),\n        years: convertStringToArray(years),\n      };\n\n      return omitBy(interval, isUndefined);\n    }\n  );\n\n  return {\n    name: fields.name,\n    time_intervals: timeIntervals,\n  };\n};\n","import { css } from '@emotion/css';\nimport React, { FC } from 'react';\nimport { useFieldArray, useFormContext } from 'react-hook-form';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Field, InlineFieldRow, InlineField, Input, Button, IconButton, useStyles2 } from '@grafana/ui';\n\nimport { MuteTimingFields } from '../../types/mute-timing-form';\n\ninterface Props {\n  intervalIndex: number;\n}\n\nexport const MuteTimingTimeRange: FC<Props> = ({ intervalIndex }) => {\n  const styles = useStyles2(getStyles);\n  const { register, formState } = useFormContext<MuteTimingFields>();\n\n  const {\n    fields: timeRanges,\n    append: addTimeRange,\n    remove: removeTimeRange,\n  } = useFieldArray<MuteTimingFields>({\n    name: `time_intervals.${intervalIndex}.times`,\n  });\n\n  const validateTime = (timeString: string) => {\n    if (!timeString) {\n      return true;\n    }\n    const [hour, minutes] = timeString.split(':').map((x) => parseInt(x, 10));\n    const isHourValid = hour >= 0 && hour < 25;\n    const isMinuteValid = minutes > -1 && minutes < 60;\n    const isTimeValid = hour === 24 ? minutes === 0 : isHourValid && isMinuteValid;\n\n    return isTimeValid || 'Time is invalid';\n  };\n\n  const formErrors = formState.errors.time_intervals?.[intervalIndex];\n  const timeRangeInvalid = formErrors?.times?.some((value) => value?.start_time || value?.end_time) ?? false;\n\n  return (\n    <div>\n      <Field\n        className={styles.field}\n        label=\"Time range\"\n        description=\"The time inclusive of the starting time and exclusive of the end time in UTC\"\n        invalid={timeRangeInvalid}\n        error={timeRangeInvalid ? 'Times must be between 00:00 and 24:00 UTC' : ''}\n      >\n        <>\n          {timeRanges.map((timeRange, index) => {\n            return (\n              <div className={styles.timeRange} key={timeRange.id}>\n                <InlineFieldRow>\n                  <InlineField label=\"Start time\" invalid={!!formErrors?.times?.[index]?.start_time}>\n                    <Input\n                      {...register(`time_intervals.${intervalIndex}.times.${index}.start_time`, {\n                        validate: validateTime,\n                      })}\n                      className={styles.timeRangeInput}\n                      // @ts-ignore react-hook-form doesn't handle nested field arrays well\n                      defaultValue={timeRange.start_time}\n                      placeholder=\"HH:MM\"\n                      data-testid=\"mute-timing-starts-at\"\n                    />\n                  </InlineField>\n                  <InlineField label=\"End time\" invalid={!!formErrors?.times?.[index]?.end_time}>\n                    <Input\n                      {...register(`time_intervals.${intervalIndex}.times.${index}.end_time`, {\n                        validate: validateTime,\n                      })}\n                      className={styles.timeRangeInput}\n                      // @ts-ignore react-hook-form doesn't handle nested field arrays well\n                      defaultValue={timeRange.end_time}\n                      placeholder=\"HH:MM\"\n                      data-testid=\"mute-timing-ends-at\"\n                    />\n                  </InlineField>\n                  <IconButton\n                    className={styles.deleteTimeRange}\n                    title={'Remove'}\n                    name={'trash-alt'}\n                    type=\"button\"\n                    onClick={(e) => {\n                      e.preventDefault();\n                      removeTimeRange(index);\n                    }}\n                  />\n                </InlineFieldRow>\n              </div>\n            );\n          })}\n        </>\n      </Field>\n      <Button\n        className={styles.addTimeRange}\n        variant=\"secondary\"\n        type=\"button\"\n        icon={'plus'}\n        onClick={() => addTimeRange({ start_time: '', end_time: '' })}\n      >\n        Add another time range\n      </Button>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  field: css`\n    margin-bottom: 0;\n  `,\n  timeRange: css`\n    margin-bottom: ${theme.spacing(1)};\n  `,\n  timeRangeInput: css`\n    width: 120px;\n  `,\n  deleteTimeRange: css`\n    margin: ${theme.spacing(1)} 0 0 ${theme.spacing(0.5)};\n  `,\n  addTimeRange: css`\n    margin-bottom: ${theme.spacing(2)};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport { useFormContext, useFieldArray } from 'react-hook-form';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, Input, Field, FieldSet, useStyles2 } from '@grafana/ui';\n\nimport { MuteTimingFields } from '../../types/mute-timing-form';\nimport { DAYS_OF_THE_WEEK, MONTHS, validateArrayField, defaultTimeInterval } from '../../utils/mute-timings';\n\nimport { MuteTimingTimeRange } from './MuteTimingTimeRange';\n\nexport const MuteTimingTimeInterval = () => {\n  const styles = useStyles2(getStyles);\n  const { formState, register } = useFormContext();\n  const {\n    fields: timeIntervals,\n    append: addTimeInterval,\n    remove: removeTimeInterval,\n  } = useFieldArray<MuteTimingFields>({\n    name: 'time_intervals',\n  });\n\n  return (\n    <FieldSet className={styles.timeIntervalLegend} label=\"Time intervals\">\n      <>\n        <p>\n          A time interval is a definition for a moment in time. All fields are lists, and at least one list element must\n          be satisfied to match the field. If a field is left blank, any moment of time will match the field. For an\n          instant of time to match a complete time interval, all fields must match. A mute timing can contain multiple\n          time intervals.\n        </p>\n        {timeIntervals.map((timeInterval, timeIntervalIndex) => {\n          const errors = formState.errors;\n          return (\n            <div key={timeInterval.id} className={styles.timeIntervalSection}>\n              <MuteTimingTimeRange intervalIndex={timeIntervalIndex} />\n              <Field\n                label=\"Days of the week\"\n                error={errors.time_intervals?.[timeIntervalIndex]?.weekdays?.message ?? ''}\n                invalid={!!errors.time_intervals?.[timeIntervalIndex]?.weekdays}\n              >\n                <Input\n                  {...register(`time_intervals.${timeIntervalIndex}.weekdays`, {\n                    validate: (value) =>\n                      validateArrayField(\n                        value,\n                        (day) => DAYS_OF_THE_WEEK.includes(day.toLowerCase()),\n                        'Invalid day of the week'\n                      ),\n                  })}\n                  className={styles.input}\n                  data-testid=\"mute-timing-weekdays\"\n                  // @ts-ignore react-hook-form doesn't handle nested field arrays well\n                  defaultValue={timeInterval.weekdays}\n                  placeholder=\"Example: monday, tuesday:thursday\"\n                />\n              </Field>\n              <Field\n                label=\"Days of the month\"\n                description=\"The days of the month, 1-31, of a month. Negative values can be used to represent days which begin at the end of the month\"\n                invalid={!!errors.time_intervals?.[timeIntervalIndex]?.days_of_month}\n                error={errors.time_intervals?.[timeIntervalIndex]?.days_of_month?.message}\n              >\n                <Input\n                  {...register(`time_intervals.${timeIntervalIndex}.days_of_month`, {\n                    validate: (value) =>\n                      validateArrayField(\n                        value,\n                        (day) => {\n                          const parsedDay = parseInt(day, 10);\n                          return (parsedDay > -31 && parsedDay < 0) || (parsedDay > 0 && parsedDay < 32);\n                        },\n                        'Invalid day'\n                      ),\n                  })}\n                  className={styles.input}\n                  // @ts-ignore react-hook-form doesn't handle nested field arrays well\n                  defaultValue={timeInterval.days_of_month}\n                  placeholder=\"Example: 1, 14:16, -1\"\n                  data-testid=\"mute-timing-days\"\n                />\n              </Field>\n              <Field\n                label=\"Months\"\n                description=\"The months of the year in either numerical or the full calendar month\"\n                invalid={!!errors.time_intervals?.[timeIntervalIndex]?.months}\n                error={errors.time_intervals?.[timeIntervalIndex]?.months?.message}\n              >\n                <Input\n                  {...register(`time_intervals.${timeIntervalIndex}.months`, {\n                    validate: (value) =>\n                      validateArrayField(\n                        value,\n                        (month) => MONTHS.includes(month) || (parseInt(month, 10) < 13 && parseInt(month, 10) > 0),\n                        'Invalid month'\n                      ),\n                  })}\n                  className={styles.input}\n                  placeholder=\"Example: 1:3, may:august, december\"\n                  // @ts-ignore react-hook-form doesn't handle nested field arrays well\n                  defaultValue={timeInterval.months}\n                  data-testid=\"mute-timing-months\"\n                />\n              </Field>\n              <Field\n                label=\"Years\"\n                invalid={!!errors.time_intervals?.[timeIntervalIndex]?.years}\n                error={errors.time_intervals?.[timeIntervalIndex]?.years?.message ?? ''}\n              >\n                <Input\n                  {...register(`time_intervals.${timeIntervalIndex}.years`, {\n                    validate: (value) => validateArrayField(value, (year) => /^\\d{4}$/.test(year), 'Invalid year'),\n                  })}\n                  className={styles.input}\n                  placeholder=\"Example: 2021:2022, 2030\"\n                  // @ts-ignore react-hook-form doesn't handle nested field arrays well\n                  defaultValue={timeInterval.years}\n                  data-testid=\"mute-timing-years\"\n                />\n              </Field>\n              <Button\n                type=\"button\"\n                variant=\"destructive\"\n                icon=\"trash-alt\"\n                onClick={() => removeTimeInterval(timeIntervalIndex)}\n              >\n                Remove time interval\n              </Button>\n            </div>\n          );\n        })}\n        <Button\n          type=\"button\"\n          variant=\"secondary\"\n          className={styles.removeTimeIntervalButton}\n          onClick={() => {\n            addTimeInterval(defaultTimeInterval);\n          }}\n          icon=\"plus\"\n        >\n          Add another time interval\n        </Button>\n      </>\n    </FieldSet>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  input: css`\n    width: 400px;\n  `,\n  timeIntervalLegend: css`\n    legend {\n      font-size: 1.25rem;\n    }\n  `,\n  timeIntervalSection: css`\n    background-color: ${theme.colors.background.secondary};\n    padding: ${theme.spacing(1)};\n    margin-bottom: ${theme.spacing(1)};\n  `,\n  removeTimeIntervalButton: css`\n    margin-top: ${theme.spacing(1)};\n  `,\n});\n","import { css } from '@emotion/css';\nimport React, { useMemo } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Alert, Field, FieldSet, Input, Button, LinkButton, useStyles2 } from '@grafana/ui';\nimport {\n  AlertmanagerConfig,\n  AlertManagerCortexConfig,\n  MuteTimeInterval,\n} from 'app/plugins/datasource/alertmanager/types';\nimport { useDispatch } from 'app/types';\n\nimport { useAlertManagerSourceName } from '../../hooks/useAlertManagerSourceName';\nimport { useAlertManagersByPermission } from '../../hooks/useAlertManagerSources';\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { updateAlertManagerConfigAction } from '../../state/actions';\nimport { MuteTimingFields } from '../../types/mute-timing-form';\nimport { renameMuteTimings } from '../../utils/alertmanager';\nimport { makeAMLink } from '../../utils/misc';\nimport { createMuteTiming, defaultTimeInterval } from '../../utils/mute-timings';\nimport { initialAsyncRequestState } from '../../utils/redux';\nimport { AlertManagerPicker } from '../AlertManagerPicker';\nimport { AlertingPageWrapper } from '../AlertingPageWrapper';\nimport { ProvisionedResource, ProvisioningAlert } from '../Provisioning';\n\nimport { MuteTimingTimeInterval } from './MuteTimingTimeInterval';\n\ninterface Props {\n  muteTiming?: MuteTimeInterval;\n  showError?: boolean;\n  provenance?: string;\n}\n\nconst useDefaultValues = (muteTiming?: MuteTimeInterval): MuteTimingFields => {\n  return useMemo(() => {\n    const defaultValues = {\n      name: '',\n      time_intervals: [defaultTimeInterval],\n    };\n\n    if (!muteTiming) {\n      return defaultValues;\n    }\n\n    const intervals = muteTiming.time_intervals.map((interval) => ({\n      times: interval.times ?? defaultTimeInterval.times,\n      weekdays: interval?.weekdays?.join(', ') ?? defaultTimeInterval.weekdays,\n      days_of_month: interval?.days_of_month?.join(', ') ?? defaultTimeInterval.days_of_month,\n      months: interval?.months?.join(', ') ?? defaultTimeInterval.months,\n      years: interval?.years?.join(', ') ?? defaultTimeInterval.years,\n    }));\n\n    return {\n      name: muteTiming.name,\n      time_intervals: intervals,\n    };\n  }, [muteTiming]);\n};\n\nconst MuteTimingForm = ({ muteTiming, showError, provenance }: Props) => {\n  const dispatch = useDispatch();\n  const alertManagers = useAlertManagersByPermission('notification');\n  const [alertManagerSourceName, setAlertManagerSourceName] = useAlertManagerSourceName(alertManagers);\n  const styles = useStyles2(getStyles);\n\n  const defaultAmCortexConfig = { alertmanager_config: {}, template_files: {} };\n  const amConfigs = useUnifiedAlertingSelector((state) => state.amConfigs);\n  const { result = defaultAmCortexConfig, loading } =\n    (alertManagerSourceName && amConfigs[alertManagerSourceName]) || initialAsyncRequestState;\n\n  const config: AlertmanagerConfig = result?.alertmanager_config ?? {};\n  const defaultValues = useDefaultValues(muteTiming);\n  const formApi = useForm({ defaultValues });\n\n  const onSubmit = (values: MuteTimingFields) => {\n    const newMuteTiming = createMuteTiming(values);\n\n    const muteTimings = muteTiming\n      ? config?.mute_time_intervals?.filter(({ name }) => name !== muteTiming.name)\n      : config.mute_time_intervals;\n\n    const newConfig: AlertManagerCortexConfig = {\n      ...result,\n      alertmanager_config: {\n        ...config,\n        route:\n          muteTiming && newMuteTiming.name !== muteTiming.name\n            ? renameMuteTimings(newMuteTiming.name, muteTiming.name, config.route ?? {})\n            : config.route,\n        mute_time_intervals: [...(muteTimings || []), newMuteTiming],\n      },\n    };\n\n    dispatch(\n      updateAlertManagerConfigAction({\n        newConfig,\n        oldConfig: result,\n        alertManagerSourceName: alertManagerSourceName!,\n        successMessage: 'Mute timing saved',\n        redirectPath: '/alerting/routes/',\n      })\n    );\n  };\n\n  return (\n    <AlertingPageWrapper pageId=\"am-routes\">\n      <AlertManagerPicker\n        current={alertManagerSourceName}\n        onChange={setAlertManagerSourceName}\n        disabled\n        dataSources={alertManagers}\n      />\n      {provenance && <ProvisioningAlert resource={ProvisionedResource.MuteTiming} />}\n      {result && !loading && (\n        <FormProvider {...formApi}>\n          <form onSubmit={formApi.handleSubmit(onSubmit)} data-testid=\"mute-timing-form\">\n            {showError && <Alert title=\"No matching mute timing found\" />}\n            <FieldSet label={'Create mute timing'} disabled={Boolean(provenance)}>\n              <Field\n                required\n                label=\"Name\"\n                description=\"A unique name for the mute timing\"\n                invalid={!!formApi.formState.errors?.name}\n                error={formApi.formState.errors.name?.message}\n              >\n                <Input\n                  {...formApi.register('name', {\n                    required: true,\n                    validate: (value) => {\n                      if (!muteTiming) {\n                        const existingMuteTiming = config?.mute_time_intervals?.find(({ name }) => value === name);\n                        return existingMuteTiming ? `Mute timing already exists for \"${value}\"` : true;\n                      }\n                      return value.length > 0 || 'Name is required';\n                    },\n                  })}\n                  className={styles.input}\n                  data-testid={'mute-timing-name'}\n                />\n              </Field>\n              <MuteTimingTimeInterval />\n              <LinkButton\n                type=\"button\"\n                variant=\"secondary\"\n                href={makeAMLink('/alerting/routes/', alertManagerSourceName)}\n              >\n                Cancel\n              </LinkButton>\n              <Button type=\"submit\" className={styles.submitButton}>\n                {muteTiming ? 'Save' : 'Submit'}\n              </Button>\n            </FieldSet>\n          </form>\n        </FormProvider>\n      )}\n    </AlertingPageWrapper>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  input: css`\n    width: 400px;\n  `,\n  submitButton: css`\n    margin-left: ${theme.spacing(1)};\n  `,\n});\n\nexport default MuteTimingForm;\n","import React, { useCallback, useEffect } from 'react';\nimport { Route, Redirect, Switch } from 'react-router-dom';\n\nimport { Alert, LoadingPlaceholder } from '@grafana/ui';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { MuteTimeInterval } from 'app/plugins/datasource/alertmanager/types';\nimport { useDispatch } from 'app/types';\n\nimport MuteTimingForm from './components/amroutes/MuteTimingForm';\nimport { useAlertManagerSourceName } from './hooks/useAlertManagerSourceName';\nimport { useAlertManagersByPermission } from './hooks/useAlertManagerSources';\nimport { useUnifiedAlertingSelector } from './hooks/useUnifiedAlertingSelector';\nimport { fetchAlertManagerConfigAction } from './state/actions';\nimport { initialAsyncRequestState } from './utils/redux';\n\nconst MuteTimings = () => {\n  const [queryParams] = useQueryParams();\n  const dispatch = useDispatch();\n  const alertManagers = useAlertManagersByPermission('notification');\n  const [alertManagerSourceName] = useAlertManagerSourceName(alertManagers);\n\n  const amConfigs = useUnifiedAlertingSelector((state) => state.amConfigs);\n\n  const fetchConfig = useCallback(() => {\n    if (alertManagerSourceName) {\n      dispatch(fetchAlertManagerConfigAction(alertManagerSourceName));\n    }\n  }, [alertManagerSourceName, dispatch]);\n\n  useEffect(() => {\n    fetchConfig();\n  }, [fetchConfig]);\n\n  const { result, error, loading } =\n    (alertManagerSourceName && amConfigs[alertManagerSourceName]) || initialAsyncRequestState;\n\n  const config = result?.alertmanager_config;\n\n  const getMuteTimingByName = useCallback(\n    (id: string): MuteTimeInterval | undefined => {\n      const timing = config?.mute_time_intervals?.find(({ name }: MuteTimeInterval) => name === id);\n\n      if (timing) {\n        const provenance = (config?.muteTimeProvenances ?? {})[timing.name];\n\n        return {\n          ...timing,\n          provenance,\n        };\n      }\n\n      return timing;\n    },\n    [config]\n  );\n\n  return (\n    <>\n      {loading && <LoadingPlaceholder text=\"Loading mute timing\" />}\n      {error && !loading && (\n        <Alert severity=\"error\" title={`Error loading Alertmanager config for ${alertManagerSourceName}`}>\n          {error.message || 'Unknown error.'}\n        </Alert>\n      )}\n      {result && !error && (\n        <Switch>\n          <Route exact path=\"/alerting/routes/mute-timing/new\">\n            <MuteTimingForm />\n          </Route>\n          <Route exact path=\"/alerting/routes/mute-timing/edit\">\n            {() => {\n              if (queryParams['muteName']) {\n                const muteTiming = getMuteTimingByName(String(queryParams['muteName']));\n                const provenance = muteTiming?.provenance;\n\n                return <MuteTimingForm muteTiming={muteTiming} showError={!muteTiming} provenance={provenance} />;\n              }\n              return <Redirect to=\"/alerting/routes\" />;\n            }}\n          </Route>\n        </Switch>\n      )}\n    </>\n  );\n};\n\nexport default MuteTimings;\n","import React, { FC } from 'react';\n\nimport { NavModelItem } from '@grafana/data';\nimport { Page } from 'app/core/components/Page/Page';\n\ninterface Props {\n  pageId: string;\n  isLoading?: boolean;\n  pageNav?: NavModelItem;\n}\n\nexport const AlertingPageWrapper: FC<Props> = ({ children, pageId, pageNav, isLoading }) => {\n  return (\n    <Page pageNav={pageNav} navId={pageId}>\n      <Page.Contents isLoading={isLoading}>{children}</Page.Contents>\n    </Page>\n  );\n};\n","import React from 'react';\n\nimport { Alert, Badge } from '@grafana/ui';\n\nexport enum ProvisionedResource {\n  ContactPoint = 'contact point',\n  Template = 'template',\n  MuteTiming = 'mute timing',\n  AlertRule = 'alert rule',\n  RootNotificationPolicy = 'root notification policy',\n}\n\ninterface ProvisioningAlertProps {\n  resource: ProvisionedResource;\n}\n\nexport const ProvisioningAlert = ({ resource }: ProvisioningAlertProps) => {\n  return (\n    <Alert title={`This ${resource} cannot be edited through the UI`} severity=\"info\">\n      This {resource} has been provisioned, that means it was created by config. Please contact your server admin to\n      update this {resource}.\n    </Alert>\n  );\n};\n\nexport const ProvisioningBadge = () => {\n  return <Badge text={'Provisioned'} color={'purple'} />;\n};\n","import { useCallback } from 'react';\n\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport store from 'app/core/store';\n\nimport { ALERTMANAGER_NAME_LOCAL_STORAGE_KEY, ALERTMANAGER_NAME_QUERY_KEY } from '../utils/constants';\nimport { AlertManagerDataSource, GRAFANA_RULES_SOURCE_NAME } from '../utils/datasource';\n\nfunction useIsAlertManagerAvailable(availableAlertManagers: AlertManagerDataSource[]) {\n  return useCallback(\n    (alertManagerName: string) => {\n      const availableAlertManagersNames = availableAlertManagers.map((am) => am.name);\n      return availableAlertManagersNames.includes(alertManagerName);\n    },\n    [availableAlertManagers]\n  );\n}\n\n/* This will return am name either from query params or from local storage or a default (grafana).\n * Due to RBAC permissions Grafana Managed Alert manager or external alert managers may not be available\n * In the worst case neihter GMA nor external alert manager is available\n */\nexport function useAlertManagerSourceName(\n  availableAlertManagers: AlertManagerDataSource[]\n): [string | undefined, (alertManagerSourceName: string) => void] {\n  const [queryParams, updateQueryParams] = useQueryParams();\n  const isAlertManagerAvailable = useIsAlertManagerAvailable(availableAlertManagers);\n\n  const update = useCallback(\n    (alertManagerSourceName: string) => {\n      if (!isAlertManagerAvailable(alertManagerSourceName)) {\n        return;\n      }\n      if (alertManagerSourceName === GRAFANA_RULES_SOURCE_NAME) {\n        store.delete(ALERTMANAGER_NAME_LOCAL_STORAGE_KEY);\n        updateQueryParams({ [ALERTMANAGER_NAME_QUERY_KEY]: null });\n      } else {\n        store.set(ALERTMANAGER_NAME_LOCAL_STORAGE_KEY, alertManagerSourceName);\n        updateQueryParams({ [ALERTMANAGER_NAME_QUERY_KEY]: alertManagerSourceName });\n      }\n    },\n    [updateQueryParams, isAlertManagerAvailable]\n  );\n\n  const querySource = queryParams[ALERTMANAGER_NAME_QUERY_KEY];\n\n  if (querySource && typeof querySource === 'string') {\n    if (isAlertManagerAvailable(querySource)) {\n      return [querySource, update];\n    } else {\n      // non existing alertmanager\n      return [undefined, update];\n    }\n  }\n\n  const storeSource = store.get(ALERTMANAGER_NAME_LOCAL_STORAGE_KEY);\n  if (storeSource && typeof storeSource === 'string' && isAlertManagerAvailable(storeSource)) {\n    update(storeSource);\n    return [storeSource, update];\n  }\n\n  if (isAlertManagerAvailable(GRAFANA_RULES_SOURCE_NAME)) {\n    return [GRAFANA_RULES_SOURCE_NAME, update];\n  }\n\n  return [undefined, update];\n}\n","import { useMemo } from 'react';\n\nimport { getAlertManagerDataSourcesByPermission } from '../utils/datasource';\n\nexport function useAlertManagersByPermission(accessType: 'instance' | 'notification') {\n  return useMemo(() => getAlertManagerDataSourcesByPermission(accessType), [accessType]);\n}\n"],"names":["DAYS_OF_THE_WEEK","MONTHS","defaultTimeInterval","times","start_time","end_time","weekdays","days_of_month","months","years","validateArrayField","value","validateValue","invalidText","split","map","x","trim","every","entry","convertStringToArray","str","s","undefined","MuteTimingTimeRange","intervalIndex","styles","useStyles2","getStyles","register","formState","useFormContext","fields","timeRanges","append","addTimeRange","remove","removeTimeRange","useFieldArray","name","validateTime","timeString","hour","minutes","parseInt","formErrors","errors","time_intervals","timeRangeInvalid","some","Field","className","field","label","description","invalid","error","timeRange","index","InlineFieldRow","InlineField","Input","I","validate","timeRangeInput","defaultValue","placeholder","IconButton","deleteTimeRange","title","type","onClick","e","preventDefault","id","Button","variant","icon","theme","css","spacing","MuteTimingTimeInterval","timeIntervals","addTimeInterval","removeTimeInterval","FieldSet","timeIntervalLegend","timeInterval","timeIntervalIndex","timeIntervalSection","message","day","includes","toLowerCase","input","parsedDay","month","year","test","removeTimeIntervalButton","colors","background","secondary","submitButton","muteTiming","showError","provenance","dispatch","useDispatch","alertManagers","useAlertManagersByPermission","alertManagerSourceName","setAlertManagerSourceName","useAlertManagerSourceName","defaultAmCortexConfig","alertmanager_config","template_files","amConfigs","useUnifiedAlertingSelector","state","result","loading","initialAsyncRequestState","config","defaultValues","useMemo","intervals","interval","join","useDefaultValues","formApi","useForm","AlertingPageWrapper","pageId","AlertManagerPicker","current","onChange","disabled","dataSources","Provisioning","resource","ProvisionedResource","onSubmit","handleSubmit","values","newMuteTiming","filter","v","omitBy","isUndefined","createMuteTiming","muteTimings","mute_time_intervals","newConfig","route","renameMuteTimings","updateAlertManagerConfigAction","oldConfig","successMessage","redirectPath","Alert","Boolean","required","find","length","href","makeAMLink","queryParams","useQueryParams","fetchConfig","useCallback","fetchAlertManagerConfigAction","useEffect","getMuteTimingByName","timing","muteTimeProvenances","LoadingPlaceholder","text","severity","exact","path","String","to","children","pageNav","isLoading","navId","ProvisioningAlert","ProvisioningBadge","color","availableAlertManagers","updateQueryParams","isAlertManagerAvailable","alertManagerName","am","useIsAlertManagerAvailable","update","GRAFANA_RULES_SOURCE_NAME","store","ALERTMANAGER_NAME_LOCAL_STORAGE_KEY","ALERTMANAGER_NAME_QUERY_KEY","querySource","storeSource","accessType","getAlertManagerDataSourcesByPermission"],"sourceRoot":""}