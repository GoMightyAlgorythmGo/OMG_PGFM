/*! For license information please see 4909.a4f3fea6c12d529804ec.js.LICENSE.txt */
(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[4909],{24620:(e,t,r)=>{"use strict";r.d(t,{M:()=>Ke});var n=r(68404),o=r(66015),i=r(68522),a=r(13),u=r(355),l=r(60437),s=r(81582),c=r.n(s),f=r(62124);const d=function(e){void 0===e&&(e={});var t=(0,n.useState)(e),r=t[0],o=t[1];return[r,(0,n.useCallback)((function(e){o((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[])]};const p=function(){var e=(0,f.Z)(),t=d({value:void 0,error:void 0,noUserInteraction:!0}),r=t[0],o=t[1];return[r,(0,n.useCallback)((function(t){var r,n;if(e())try{if("string"!=typeof t&&"number"!=typeof t){var i=new Error("Cannot copy typeof "+typeof t+" to clipboard, must be a string");return void o({value:t,error:i,noUserInteraction:!0})}if(""===t){i=new Error("Cannot copy empty string to clipboard.");return void o({value:t,error:i,noUserInteraction:!0})}n=t.toString(),r=c()(n),o({value:n,error:void 0,noUserInteraction:r})}catch(i){o({value:n,error:i,noUserInteraction:r})}}),[])]};var v,g,h,y=r(24643),m=r(61884),O=r(72786),E=r(40920),b=r(9442),_=r(96380),T=r(59385),S=r(24085),R=r(45916);function C(e){let{isOpen:t,onCancel:r,onDiscard:o,onCopy:i}=e;const a=(0,n.useRef)(null);return(0,n.useEffect)((()=>{var e;t&&(null===(e=a.current)||void 0===e||e.focus())}),[t]),(0,R.jsxs)(T.u,{title:v||(v=(0,R.jsxs)("div",{className:"modal-header-title",children:[(0,R.jsx)(S.J,{name:"exclamation-triangle",size:"lg"}),(0,R.jsx)("span",{className:"p-l-1",children:"Warning"})]})),onDismiss:r,isOpen:t,children:[g||(g=(0,R.jsx)("p",{children:"Builder mode does not display changes made in code. The query builder will display the last changes you made in builder mode."})),h||(h=(0,R.jsx)("p",{children:"Do you want to copy your code to the clipboard?"})),(0,R.jsxs)(T.u.ButtonRow,{children:[(0,R.jsx)(E.zx,{type:"button",variant:"secondary",onClick:r,fill:"outline",children:"Cancel"}),(0,R.jsx)(E.zx,{variant:"destructive",type:"button",onClick:o,ref:a,children:"Discard code and switch"}),(0,R.jsx)(E.zx,{variant:"primary",onClick:i,children:"Copy code and switch"})]})]})}const P=e=>{let{db:t,value:r,onChange:i,disabled:a,className:l,applyDefault:s}=e;const c=(0,o.Z)((async()=>(await t.datasets()).map(u.Er)),[]);return(0,n.useEffect)((()=>{s&&(r?c.value&&void 0===c.value.find((e=>e.value===r))&&c.value.length>0&&i(c.value[0]):c.value&&c.value[0]&&i(c.value[0]))}),[c.value,r,s,i]),(0,R.jsx)(m.Ph,{className:l,"aria-label":"Dataset selector",value:r,options:c.value,onChange:i,disabled:a,isLoading:c.loading,menuShouldPortal:!0})};var N;class L extends n.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){if(this.state.hasError){return this.props.fallBackComponent||N||(N=(0,R.jsx)("div",{children:"Error"}))}return this.props.children}}var I=r(46196);const A=e=>{let{db:t,query:r,value:n,className:i,onChange:a}=e;const u=(0,o.Z)((async()=>{if(!r.dataset)return[];return(await t.tables(r.dataset)).map(I.E)}),[r.dataset]);return(0,R.jsx)(m.Ph,{className:i,disabled:u.loading,"aria-label":"Table selector",value:n,options:u.value,onChange:a,isLoading:u.loading,menuShouldPortal:!0,placeholder:u.loading?"Loading tables":"Select table"})};var w,j,F;const k=[{label:"Builder",value:u.je.Builder},{label:"Code",value:u.je.Code}];function x(e){let{db:t,query:r,queryRowFilter:o,onChange:a,onRunQuery:s,onQueryRowChange:c,isQueryRunnable:f}=e;const{editorMode:d}=r,[v,g]=p(),[h,T]=(0,n.useState)(!1),S=t.toRawSql||l.C5,N=(0,n.useCallback)((e=>{d!==u.je.Code?a(Object.assign({},r,{editorMode:e})):T(!0)}),[d,a,r]),I=e=>{const t=Object.assign({},r,{format:void 0!==e.value?e.value:u.ws.Table});a(t)};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(i.EditorHeader,{children:[(0,R.jsx)(L,{fallBackComponent:(0,R.jsx)(y._,{label:"Format",labelWidth:15,children:(0,R.jsx)(m.Ph,{placeholder:"Select format",value:r.format,onChange:I,options:u.x7})}),children:(0,R.jsx)(i.InlineSelect,{label:"Format",value:r.format,placeholder:"Select format",menuShouldPortal:!0,onChange:I,options:u.x7})}),d===u.je.Builder&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(O.x,{id:"sql-filter",label:"Filter",transparent:!0,showLabel:!0,value:o.filter,onChange:e=>e.target instanceof HTMLInputElement&&c(Object.assign({},o,{filter:e.target.checked}))}),(0,R.jsx)(O.x,{id:"sql-group",label:"Group",transparent:!0,showLabel:!0,value:o.group,onChange:e=>e.target instanceof HTMLInputElement&&c(Object.assign({},o,{group:e.target.checked}))}),(0,R.jsx)(O.x,{id:"sql-order",label:"Order",transparent:!0,showLabel:!0,value:o.order,onChange:e=>e.target instanceof HTMLInputElement&&c(Object.assign({},o,{order:e.target.checked}))}),(0,R.jsx)(O.x,{id:"sql-preview",label:"Preview",transparent:!0,showLabel:!0,value:o.preview,onChange:e=>e.target instanceof HTMLInputElement&&c(Object.assign({},o,{preview:e.target.checked}))})]}),w||(w=(0,R.jsx)(i.FlexItem,{grow:1})),f?(0,R.jsx)(E.zx,{icon:"play",variant:"primary",size:"sm",onClick:()=>s(),children:"Run query"}):(0,R.jsx)(b.u,{theme:"error",content:(0,R.jsxs)(R.Fragment,{children:["Your query is invalid. Check below for details. ",j||(j=(0,R.jsx)("br",{})),"However, you can still run this query."]}),placement:"top",children:(0,R.jsx)(E.zx,{icon:"exclamation-triangle",variant:"secondary",size:"sm",onClick:()=>s(),children:"Run query"})}),(0,R.jsx)(_.S,{options:k,size:"sm",value:d,onChange:N}),(0,R.jsx)(C,{isOpen:h,onCopy:()=>{T(!1),g(r.rawSql),a(Object.assign({},r,{rawSql:S(r),editorMode:u.je.Builder}))},onDiscard:()=>{T(!1),a(Object.assign({},r,{rawSql:S(r),editorMode:u.je.Builder}))},onCancel:()=>T(!1)})]}),d===u.je.Builder&&(0,R.jsxs)(R.Fragment,{children:[F||(F=(0,R.jsx)(i.Space,{v:.5})),(0,R.jsxs)(i.EditorRow,{children:[(0,R.jsx)(i.EditorField,{label:"Dataset",width:25,children:(0,R.jsx)(P,{db:t,value:void 0===r.dataset?null:r.dataset,onChange:e=>{if(e.value===r.dataset)return;const t=Object.assign({},r,{dataset:e.value,table:void 0,sql:void 0,rawSql:""});a(t)}})}),(0,R.jsx)(i.EditorField,{label:"Table",width:25,children:(0,R.jsx)(A,{db:t,query:r,value:void 0===r.table?null:r.table,onChange:e=>{if(e.value===r.table)return;const t=Object.assign({},r,{table:e.value,sql:void 0,rawSql:""});a(t)},applyDefault:!0})})]})]})]})}var M=r(27549),D=r(65065),V=r(87723),U=r(9617),q=r(17249);function W(e){return q.ZP.format(e).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,(e=>e.replace(/\s/g,"")))}function G(e){let{children:t,onChange:r,query:o,width:a,height:u,completionProvider:l}=e;const s=(0,n.useRef)(o);(0,n.useEffect)((()=>{s.current=o}),[o]);const c=(0,n.useCallback)(((e,t)=>{const n=Object.assign({},s.current,{rawQuery:!0,rawSql:e});r(n,t)}),[r]);return(0,R.jsx)(i.SQLEditor,{width:a,height:u,query:o.rawSql,onChange:c,language:{id:"sql",completionProvider:l,formatter:W},children:t})}var B,K,z=r(25049),H=r(85965),Y=r(7197),J=r(68669),$=r(49085),Q=r(98134);function X(e){var t;let{db:r,query:o,onValidate:i,range:a}=e;const[u,l]=(0,n.useState)(),s=(0,U.l4)(),c=(0,n.useMemo)((()=>(0,$.Cf)("bytes")),[]),f=(0,n.useMemo)((()=>({error:M.css`
        color: ${s.colors.error.text};
        font-size: ${s.typography.bodySmall.fontSize};
        font-family: ${s.typography.fontFamilyMonospace};
      `,valid:M.css`
        color: ${s.colors.success.text};
      `,info:M.css`
        color: ${s.colors.text.secondary};
      `})),[s]),[d,p]=(0,Y.Z)((async e=>{var t;return""===(null===(t=e.rawSql)||void 0===t?void 0:t.trim())?null:await r.validateQuery(e,a)}),[r]),[,]=(0,J.Z)((async()=>{const e=await p(o);return e&&l(e),null}),1e3,[o,p]);if((0,n.useEffect)((()=>{null!=u&&u.isError&&i(!1),null!=u&&u.isValid&&i(!0)}),[u,i]),!d.value&&!d.loading)return null;const v=null!==(t=d.value)&&void 0!==t&&t.error?function(e){const t=e.split(":");if(t.length>2)return t.slice(2).join(":");return e}(d.value.error):"";return(0,R.jsxs)(R.Fragment,{children:[d.loading&&(0,R.jsxs)("div",{className:f.info,children:[B||(B=(0,R.jsx)(Q.$,{inline:!0,size:12}))," Validating query..."]}),!d.loading&&d.value&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(R.Fragment,{children:d.value.isValid&&d.value.statistics&&(0,R.jsxs)("div",{className:f.valid,children:[K||(K=(0,R.jsx)(S.J,{name:"check"}))," This query will process"," ",(0,R.jsx)("strong",{children:(0,$.zc)(c(d.value.statistics.TotalBytesProcessed))})," ","when run."]})}),(0,R.jsx)(R.Fragment,{children:d.value.isError&&(0,R.jsx)("div",{className:f.error,children:v})})]})]})}const Z=["showTools","onFormatCode","onExpand","isExpanded"];function ee(e){let{showTools:t,onFormatCode:r,onExpand:o,isExpanded:i}=e,a=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,Z);const u=(0,U.l4)(),[l,s]=(0,n.useState)(),c=(0,n.useMemo)((()=>({container:M.css`
        border: 1px solid ${u.colors.border.medium};
        border-top: none;
        padding: ${u.spacing(.5,.5,.5,.5)};
        display: flex;
        flex-grow: 1;
        justify-content: space-between;
        font-size: ${u.typography.bodySmall.fontSize};
      `,error:M.css`
        color: ${u.colors.error.text};
        font-size: ${u.typography.bodySmall.fontSize};
        font-family: ${u.typography.fontFamilyMonospace};
      `,valid:M.css`
        color: ${u.colors.success.text};
      `,info:M.css`
        color: ${u.colors.text.secondary};
      `,hint:M.css`
        color: ${u.colors.text.disabled};
        white-space: nowrap;
        cursor: help;
      `})),[u]);let f={};return t||void 0!==l||(f={height:0,padding:0,visibility:"hidden"}),(0,R.jsxs)("div",{className:c.container,style:f,children:[(0,R.jsx)("div",{children:a.onValidate&&(0,R.jsx)(X,Object.assign({},a,{onValidate:e=>{s(e),a.onValidate(e)}}))}),t&&(0,R.jsx)("div",{children:(0,R.jsxs)(z.Lh,{spacing:"sm",children:[r&&(0,R.jsx)(H.h,{onClick:r,name:"brackets-curly",size:"xs",tooltip:"Format query"}),o&&(0,R.jsx)(H.h,{onClick:()=>o(!i),name:i?"angle-up":"angle-down",size:"xs",tooltip:i?"Collapse editor":"Expand editor"}),(0,R.jsx)(b.u,{content:"Hit CTRL/CMD+Return to run query",children:(0,R.jsx)(S.J,{className:c.hint,name:"keyboard"})})]})})]})}function te(e){let{db:t,query:r,onChange:o,onRunQuery:i,onValidate:a,queryToValidate:u,range:l}=e;const s=(0,U.l4)(),c=(0,U.wW)(re),[f,d]=(0,n.useState)(!1),[p,v]=(0,D.Z)(),[g,h]=(0,D.Z)(),y=(0,n.useMemo)((()=>t.getSqlCompletionProvider()),[t]),m=(e,n)=>(0,R.jsx)(G,{completionProvider:y,query:r,width:e,height:n?n-v.height:void 0,onChange:o,children:e=>{let{formatQuery:r}=e;return(0,R.jsx)("div",{ref:p,children:(0,R.jsx)(ee,{db:t,query:u,onValidate:a,onFormatCode:r,showTools:!0,range:l,onExpand:d,isExpanded:f})})}}),O=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?(0,R.jsx)(V.Z,{children:e=>{let{width:t,height:r}=e;return m(t,r)}}):(0,R.jsx)("div",{ref:g,children:m()})};return(0,R.jsxs)(R.Fragment,{children:[f?(0,R.jsx)("div",{style:{width:h.width,height:h.height,background:s.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center"},children:"Editing in expanded code editor"}):O(),f&&(0,R.jsx)(T.u,{title:`Query ${r.refId}`,closeOnBackdropClick:!1,closeOnEscape:!1,className:c.modal,contentClassName:c.modalContent,isOpen:f,onDismiss:()=>{d(!1)},children:O(!0)})]})}function re(e){return{modal:M.css`
      width: 95vw;
      height: 95vh;
    `,modalContent:M.css`
      height: 100%;
      padding-top: 0;
    `}}var ne=r(84719),oe=r(38465);function ie(e){let{rawSql:t}=e;const[r,n]=p(),o=(0,U.wW)(ae),i=(0,R.jsxs)("div",{className:o.labelWrapper,children:[(0,R.jsx)("label",{className:o.label,children:"Preview"}),(0,R.jsx)(H.h,{tooltip:"Copy to clipboard",onClick:()=>n(t),name:"copy"})]});return(0,R.jsx)(ne.g,{label:i,className:o.grow,children:(0,R.jsx)(oe.p,{language:"sql",height:80,value:W(t),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1})})}function ae(e){return{grow:(0,M.css)({flexGrow:1}),label:(0,M.css)({fontSize:12,fontWeight:e.typography.fontWeightMedium}),labelWrapper:(0,M.css)({display:"flex",justifyContent:"space-between",paddingBottom:e.spacing(.5)})}}function ue(e){let{query:t,onQueryChange:r,db:o}=e;return{onSqlChange:(0,n.useCallback)((e=>{const n=(o.toRawSql||l.C5)({sql:e,dataset:t.dataset,table:t.table,refId:t.refId}),i=Object.assign({},t,{sql:e,rawSql:n});r(i)}),[o,r,t])}}function le(e){let{sql:t,columns:r,onSqlChange:o}=e;const a=(0,n.useCallback)((e=>{const r=e.map((e=>{var t;return(0,l.U2)(null===(t=e.property)||void 0===t?void 0:t.name)})),n=Object.assign({},t,{groupBy:r});o(n)}),[o,t]);return(0,R.jsx)(i.EditorList,{items:t.groupBy,onChange:a,renderItem:se({options:r})})}function se(e){let{options:t}=e;return function(e,r,n){var o;return(0,R.jsxs)(i.InputGroup,{children:[(0,R.jsx)(m.Ph,{value:null!==(o=e.property)&&void 0!==o&&o.name?(0,I.E)(e.property.name):null,"aria-label":"Group by",options:t,menuShouldPortal:!0,onChange:e=>{let{value:t}=e;return t&&r((0,l.U2)(t))}}),(0,R.jsx)(i.AccessoryButton,{"aria-label":"Remove group by column",icon:"times",variant:"secondary",onClick:n})]})}}function ce(e){let{fields:t,query:r,onQueryChange:n,db:o}=e;const{onSqlChange:i}=ue({query:r,onQueryChange:n,db:o});return(0,R.jsx)(le,{columns:t,sql:r.sql,onSqlChange:i})}var fe,de=r(82897),pe=r(1652);const ve=[{description:"Sort by ascending",value:"ASC",icon:"sort-amount-up"},{description:"Sort by descending",value:"DESC",icon:"sort-amount-down"}];function ge(e){var t,r;let{sql:o,onSqlChange:a,columns:u,showOffset:s}=e;const c=(0,n.useCallback)((e=>{const t=Object.assign({},o,{orderByDirection:e});a(t)}),[a,o]),f=(0,n.useCallback)((e=>{const t=Object.assign({},o,{limit:Number.parseInt(e.currentTarget.value,10)});a(t)}),[a,o]),d=(0,n.useCallback)((e=>{const t=Object.assign({},o,{offset:Number.parseInt(e.currentTarget.value,10)});a(t)}),[a,o]),p=(0,n.useCallback)((e=>{const t=Object.assign({},o,{orderBy:(0,l.ax)(null==e?void 0:e.value)});null===e&&(t.orderByDirection=void 0),a(t)}),[a,o]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(i.EditorField,{label:"Order by",width:25,children:(0,R.jsxs)(i.InputGroup,{children:[(0,R.jsx)(m.Ph,{"aria-label":"Order by",options:u,value:null!==(t=o.orderBy)&&void 0!==t&&t.property.name?(0,I.E)(o.orderBy.property.name):null,isClearable:!0,menuShouldPortal:!0,onChange:p}),fe||(fe=(0,R.jsx)(i.Space,{h:1.5})),(0,R.jsx)(_.S,{options:ve,disabled:!(null!=o&&null!==(r=o.orderBy)&&void 0!==r&&r.property.name),value:o.orderByDirection,onChange:c})]})}),(0,R.jsx)(i.EditorField,{label:"Limit",optional:!0,width:25,children:(0,R.jsx)(pe.I,{type:"number",min:0,id:(0,de.uniqueId)("limit-"),value:o.limit||"",onChange:f})}),s&&(0,R.jsx)(i.EditorField,{label:"Offset",optional:!0,width:25,children:(0,R.jsx)(pe.I,{type:"number",id:(0,de.uniqueId)("offset-"),value:o.offset||"",onChange:d})})]})}function he(e){let{fields:t,query:r,onQueryChange:n,db:o}=e;const{onSqlChange:i}=ue({query:r,onQueryChange:n,db:o});let a=[];if(t){var u,l;a=[{value:"",label:"Selected columns",options:null===(u=r.sql)||void 0===u||null===(l=u.columns)||void 0===l?void 0:l.map(((e,t)=>{var r,n;const o=e.name?`${e.name}(${null===(r=e.parameters)||void 0===r?void 0:r.map((e=>e.name))})`:null===(n=e.parameters)||void 0===n?void 0:n.map((e=>e.name));return{value:o,label:`${t+1} - ${o}`}})),expanded:!0},...t]}return(0,R.jsx)(ge,{sql:r.sql,onSqlChange:i,columns:a})}var ye=r(14134);const me={label:"*",value:"*"};function Oe(e){var t;let{sql:r,columns:o,onSqlChange:a,functions:u}=e;const s=(0,U.wW)(Ee),c=[me,...o||[]],f=(0,n.useCallback)(((e,t)=>n=>{var o,i;let u=Object.assign({},e);null!==(o=e.parameters)&&void 0!==o&&o.length?u.parameters=e.parameters.map((e=>e.type===ye.a.FunctionParameter?Object.assign({},e,{name:n.value}):e)):u.parameters=[{type:ye.a.FunctionParameter,name:n.value}];const l=Object.assign({},r,{columns:null===(i=r.columns)||void 0===i?void 0:i.map(((e,r)=>r===t?u:e))});a(l)}),[a,r]),d=(0,n.useCallback)(((e,t)=>n=>{var o;const i=Object.assign({},e,{name:null==n?void 0:n.value}),u=Object.assign({},r,{columns:null===(o=r.columns)||void 0===o?void 0:o.map(((e,r)=>r===t?i:e))});a(u)}),[a,r]),p=(0,n.useCallback)((e=>()=>{const t=[...r.columns];t.splice(e,1);const n=Object.assign({},r,{columns:t});a(n)}),[a,r]),v=(0,n.useCallback)((()=>{const e=Object.assign({},r,{columns:[...r.columns,(0,l.Wf)()]});a(e)}),[a,r]);return(0,R.jsxs)(i.Stack,{gap:2,alignItems:"end",wrap:!0,direction:"column",children:[null===(t=r.columns)||void 0===t?void 0:t.map(((e,t)=>(0,R.jsx)("div",{children:(0,R.jsxs)(i.Stack,{gap:2,alignItems:"end",children:[(0,R.jsx)(i.EditorField,{label:"Column",width:25,children:(0,R.jsx)(m.Ph,{value:be(e),options:c,inputId:`select-column-${t}-${(0,de.uniqueId)()}`,menuShouldPortal:!0,allowCustomValue:!0,onChange:f(e,t)})}),(0,R.jsx)(i.EditorField,{label:"Aggregation",optional:!0,width:25,children:(0,R.jsx)(m.Ph,{value:e.name?(0,I.E)(e.name):null,inputId:`select-aggregation-${t}-${(0,de.uniqueId)()}`,isClearable:!0,menuShouldPortal:!0,allowCustomValue:!0,options:u,onChange:d(e,t)})}),(0,R.jsx)(E.zx,{"aria-label":"Remove",type:"button",icon:"trash-alt",variant:"secondary",size:"md",onClick:p(t)})]})},t))),(0,R.jsx)(E.zx,{type:"button",onClick:v,variant:"secondary",size:"md",icon:"plus","aria-label":"Add",className:s.addButton})]})}const Ee=()=>({addButton:(0,M.css)({alignSelf:"flex-start"})});function be(e){let{parameters:t}=e;const r=null==t?void 0:t.find((e=>e.type===ye.a.FunctionParameter));return null!=r&&r.name?(0,I.E)(r.name):null}function _e(e){let{fields:t,query:r,onQueryChange:n,db:i}=e;const{onSqlChange:a}=ue({query:r,onQueryChange:n,db:i}),u=(0,o.Z)((async()=>(await i.functions()).map((e=>(0,I.E)(e.name)))),[i]);return(0,R.jsx)(Oe,{columns:t,sql:r.sql,functions:u.value,onSqlChange:a})}var Te=r(25981),Se=r(76824),Re=r(91115),Ce=r(12890);const Pe="Add",Ne="Remove",Le=(Se.cQ.uuid(),Se.cQ.uuid(),{id:Se.cQ.uuid(),type:"group",children1:{[Se.cQ.uuid()]:{type:"rule",properties:{field:null,operator:null,value:[],valueSrc:[]}}}}),Ie=Object.assign({},Se.I4.widgets,{text:Object.assign({},Se.I4.widgets.text,{factory:function(e){return(0,R.jsx)(pe.I,{value:(null==e?void 0:e.value)||"",placeholder:null==e?void 0:e.placeholder,onChange:t=>null==e?void 0:e.setValue(t.currentTarget.value)})}}),number:Object.assign({},Se.I4.widgets.number,{factory:function(e){return(0,R.jsx)(pe.I,{value:null==e?void 0:e.value,placeholder:null==e?void 0:e.placeholder,type:"number",onChange:t=>null==e?void 0:e.setValue(Number.parseInt(t.currentTarget.value,10))})}}),datetime:Object.assign({},Se.I4.widgets.datetime,{factory:function(e){return(0,R.jsx)(Ce.x,{onChange:t=>{null==e||e.setValue(t.format(Se.I4.widgets.datetime.valueFormat))},date:(0,Re.CQ)(null==e?void 0:e.value).utc()})}})}),Ae=Object.assign({},Se.I4.settings,{canRegroup:!1,maxNesting:1,canReorder:!1,showNot:!1,addRuleLabel:Pe,deleteLabel:Ne,renderConjs:function(e){return(0,R.jsx)(m.Ph,{id:null==e?void 0:e.id,"aria-label":"Conjunction",menuShouldPortal:!0,options:null!=e&&e.conjunctionOptions?Object.keys(null==e?void 0:e.conjunctionOptions).map(I.E):void 0,value:null==e?void 0:e.selectedConjunction,onChange:t=>null==e?void 0:e.setConjunction(t.value)})},renderField:function(e){var t;const r=(null==e||null===(t=e.config)||void 0===t?void 0:t.fields)||{};return(0,R.jsx)(m.Ph,{id:null==e?void 0:e.id,width:25,"aria-label":"Field",menuShouldPortal:!0,options:null==e?void 0:e.items.map((e=>{var t,n;const o=null===(t=r[e.key].mainWidgetProps)||void 0===t||null===(n=t.customProps)||void 0===n?void 0:n.icon;return{label:e.label,value:e.key,icon:o}})),value:null==e?void 0:e.selectedKey,onChange:t=>{null==e||e.setField(t.label)}})},renderButton:function(e){return(0,R.jsx)(E.zx,{type:"button",title:`${null==e?void 0:e.label} filter`,onClick:null==e?void 0:e.onClick,variant:"secondary",size:"md",icon:(null==e?void 0:e.label)===Pe?"plus":"times"})},renderOperator:function(e){return(0,R.jsx)(m.Ph,{options:null==e?void 0:e.items.map((e=>({label:e.label,value:e.key}))),"aria-label":"Operator",menuShouldPortal:!0,value:null==e?void 0:e.selectedKey,onChange:t=>{null==e||e.setField(t.value||"")}})}});var we;!function(e){e.IN="select_any_in",e.NOT_IN="select_not_any_in"}(we||(we={}));const je=function(e){const t=e.operators,r=Object.assign({},t),n=()=>"",o=r[we.IN].sqlFormatOp||n,i=r[we.NOT_IN].sqlFormatOp||n;return Object.assign({},r,{[we.IN]:Object.assign({},r[we.IN],{sqlFormatOp:(e,t,r,n,i,a,u,l)=>o(e,t,Ve(r),n,i,a,u,l)}),[we.NOT_IN]:Object.assign({},r[we.NOT_IN],{sqlFormatOp:(e,t,r,n,o,a,u,l)=>i(e,t,Ve(r),n,o,a,u,l)})})}(Se.I4),Fe=Se.I4.types.text.widgets.text,ke=[...Fe.operators||[],we.IN,we.NOT_IN],xe=Object.assign({},Fe,{operators:ke}),Me=Object.assign({},Se.I4.types,{text:Object.assign({},Se.I4.types.text,{widgets:Object.assign({},Se.I4.types.text.widgets,{text:xe})})}),De=Object.assign({},Se.I4,{widgets:Ie,settings:Ae,operators:je,types:Me});function Ve(e){return(0,de.isString)(e)?e.split(","):e}function Ue(e){let{sql:t,config:r,onSqlChange:o}=e;const[i,a]=(0,n.useState)(),u=(0,n.useMemo)((()=>Object.assign({},De,r)),[r]);(0,n.useEffect)((()=>{if(!i){var e;const r=Se.cQ.checkTree(Se.cQ.loadTree(null!==(e=t.whereJsonTree)&&void 0!==e?e:Le),u);a(r)}}),[u,t.whereJsonTree,i]),(0,n.useEffect)((()=>{t.whereJsonTree||a(Se.cQ.checkTree(Se.cQ.loadTree(Le),u))}),[u,t.whereJsonTree]);const l=(0,n.useCallback)(((e,r)=>{a(e);const n=Object.assign({},t,{whereJsonTree:Se.cQ.getTree(e),whereString:Se.cQ.sqlFormat(e,r)});o(n)}),[o,t]);return i?(0,R.jsx)(Se.AE,Object.assign({},u,{value:i,onChange:l,renderBuilder:e=>(0,R.jsx)(Se.Ib,Object.assign({},e))})):null}function qe(e){return`\n    display: flex;\n    gap: 8px;\n    flex-direction: ${e};`}function We(e){let{query:t,fields:r,onQueryChange:n,db:o}=e;const i=(0,Te.Z)((async()=>function(e){const t={};for(const r of e)t[r.value]={type:r.raqbFieldType||"text",valueSources:["value"],mainWidgetProps:{customProps:{icon:r.icon}}};return t}(r)),[r]),{onSqlChange:a}=ue({query:t,onQueryChange:n,db:o});return(0,R.jsx)(Ue,{config:{fields:i.value||{}},sql:t.sql,onSqlChange:e=>{a(e)}},JSON.stringify(i.value))}M.injectGlobal`
  .group--header {
    ${qe("row")}
  }

  .group-or-rule {
    ${qe("column")}
    .rule {
      flex-direction: row;
    }
  }

  .rule--body {
    ${qe("row")}
  }

  .group--children {
    ${qe("column")}
  }

  .group--conjunctions:empty {
    display: none;
  }
`;const Ge=e=>{let{query:t,db:r,queryRowFilter:n,onChange:a,onValidate:u,range:l}=e;const s=(0,o.Z)((async()=>await r.fields(t)),[r,t.dataset,t.table]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(i.EditorRows,{children:[(0,R.jsx)(i.EditorRow,{children:(0,R.jsx)(_e,{fields:s.value||[],query:t,onQueryChange:a,db:r})}),n.filter&&(0,R.jsx)(i.EditorRow,{children:(0,R.jsx)(i.EditorField,{label:"Filter by column value",optional:!0,children:(0,R.jsx)(We,{fields:s.value||[],query:t,onQueryChange:a,db:r})})}),n.group&&(0,R.jsx)(i.EditorRow,{children:(0,R.jsx)(i.EditorField,{label:"Group by column",children:(0,R.jsx)(ce,{fields:s.value||[],query:t,onQueryChange:a,db:r})})}),n.order&&(0,R.jsx)(i.EditorRow,{children:(0,R.jsx)(he,{fields:s.value||[],query:t,onQueryChange:a,db:r})}),n.preview&&t.rawSql&&(0,R.jsx)(i.EditorRow,{children:(0,R.jsx)(ie,{rawSql:t.rawSql})})]}),(0,R.jsx)(ee,{db:r,query:t,onValidate:u,range:l})]})};var Be;function Ke(e){var t,r,s,c,f,d;let{datasource:p,query:v,onChange:g,onRunQuery:h,range:y}=e;const[m,O]=(0,n.useState)(!0),E=p.getDB(),{loading:b,error:_}=(0,o.Z)((async()=>()=>{void 0!==p.getDB(p.id).init&&p.getDB(p.id).init()}),[p]),T=(0,a.Y)(v),[S,C]=(0,n.useState)({filter:!(null===(t=T.sql)||void 0===t||!t.whereString),group:!(null===(r=T.sql)||void 0===r||null===(s=r.groupBy)||void 0===s||null===(c=s[0])||void 0===c||!c.property.name),order:!(null===(f=T.sql)||void 0===f||null===(d=f.orderBy)||void 0===d||!d.property.name),preview:!0}),[P,N]=(0,n.useState)(T);(0,n.useEffect)((()=>()=>{void 0!==p.getDB(p.id).dispose&&p.getDB(p.id).dispose()}),[p]);const L=(0,n.useCallback)((e=>{ze(e)&&h&&h()}),[h]),I=function(e){var t,r;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];N(e),g(e),(0,l.IC)(null===(t=e.sql)||void 0===t?void 0:t.columns)&&null!==(r=e.sql)&&void 0!==r&&r.columns.some((e=>e.name))&&!S.group&&C(Object.assign({},S,{group:!0})),n&&L(e)};return b||_?null:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(x,{db:E,onChange:e=>{N(e),g(e)},onRunQuery:h,onQueryRowChange:C,queryRowFilter:S,query:T,isQueryRunnable:m}),Be||(Be=(0,R.jsx)(i.Space,{v:.5})),T.editorMode!==u.je.Code&&(0,R.jsx)(Ge,{db:E,query:T,onChange:e=>I(e,!1),queryRowFilter:S,onValidate:O,range:y}),T.editorMode===u.je.Code&&(0,R.jsx)(te,{db:E,query:T,queryToValidate:P,onChange:I,onRunQuery:h,onValidate:O,range:y})]})}const ze=e=>Boolean(e.rawSql)},2935:(e,t,r)=>{"use strict";r.d(t,{K:()=>s});r(68404);var n,o,i=r(64624),a=r(24643),u=r(98356),l=r(45916);const s=e=>{const{onPropertyChanged:t,labelWidth:r,jsonData:s}=e,c=e=>r=>{t&&t(e,r)};return(0,l.jsxs)(i.C,{label:"Connection limits",children:[(0,l.jsx)(a._,{tooltip:n||(n=(0,l.jsxs)("span",{children:["The maximum number of open connections to the database.If ",(0,l.jsx)("i",{children:"Max idle connections"})," is greater than 0 and the ",(0,l.jsx)("i",{children:"Max open connections"})," is less than ",(0,l.jsx)("i",{children:"Max idle connections"}),", then",(0,l.jsx)("i",{children:"Max idle connections"})," will be reduced to match the ",(0,l.jsx)("i",{children:"Max open connections"})," limit. If set to 0, there is no limit on the number of open connections."]})),labelWidth:r,label:"Max open",children:(0,l.jsx)(u.Y,{placeholder:"unlimited",value:s.maxOpenConns,onChange:c("maxOpenConns")})}),(0,l.jsx)(a._,{tooltip:o||(o=(0,l.jsxs)("span",{children:["The maximum number of connections in the idle connection pool.If ",(0,l.jsx)("i",{children:"Max open connections"})," is greater than 0 but less than the ",(0,l.jsx)("i",{children:"Max idle connections"}),", then the ",(0,l.jsx)("i",{children:"Max idle connections"})," will be reduced to match the ",(0,l.jsx)("i",{children:"Max open connections"})," limit. If set to 0, no idle connections are retained."]})),labelWidth:r,label:"Max idle",children:(0,l.jsx)(u.Y,{placeholder:"2",value:s.maxIdleConns,onChange:c("maxIdleConns")})}),(0,l.jsx)(a._,{tooltip:"The maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever.",labelWidth:r,label:"Max lifetime",children:(0,l.jsx)(u.Y,{placeholder:"14400",value:s.connMaxLifetime,onChange:c("connMaxLifetime")})})]})}},58123:(e,t,r)=>{"use strict";r.d(t,{QF:()=>o,fP:()=>i,ni:()=>a});var n=r(355);const o=[{id:"AVG",name:"AVG",description:"AVG(\n    [DISTINCT]\n    expression\n  )\n  [OVER (...)]\n\n  Returns the average of non-NULL input values, or NaN if the input contains a NaN."},{id:"COUNT",name:"COUNT",description:"COUNT(*)  [OVER (...)]\n  Returns the number of rows in the input.\n\n  COUNT(\n    [DISTINCT]\n    expression\n  )\n  [OVER (...)]\n\n  Returns the number of rows with expression evaluated to any value other than NULL.\n  "},{id:"MAX",name:"MAX",description:"MAX(\n    expression\n  )\n  [OVER (...)]\n\n  Returns the maximum value of non-NULL expressions. Returns NULL if there are zero input rows or expression evaluates to NULL for all rows. Returns NaN if the input contains a NaN.\n  "},{id:"MIN",name:"MIN",description:"MIN(\n    expression\n  )\n  [OVER (...)]\n\n  Returns the minimum value of non-NULL expressions. Returns NULL if there are zero input rows or expression evaluates to NULL for all rows. Returns NaN if the input contains a NaN.\n  "},{id:"SUM",name:"SUM",description:"SUM(\n    [DISTINCT]\n    expression\n  )\n  [OVER (...)]\n\n  Returns the sum of non-null values.\n\n  If the expression is a floating point value, the sum is non-deterministic, which means you might receive a different result each time you use this function.\n  "}],i=[{type:n.$M.Comparison,id:"LESS_THAN",operator:"<",description:"Returns TRUE if X is less than Y."},{type:n.$M.Comparison,id:"LESS_THAN_EQUAL",operator:"<=",description:"Returns TRUE if X is less than or equal to Y."},{type:n.$M.Comparison,id:"GREATER_THAN",operator:">",description:"Returns TRUE if X is greater than Y."},{type:n.$M.Comparison,id:"GREATER_THAN_EQUAL",operator:">=",description:"Returns TRUE if X is greater than or equal to Y."},{type:n.$M.Comparison,id:"EQUAL",operator:"=",description:"Returns TRUE if X is equal to Y."},{type:n.$M.Comparison,id:"NOT_EQUAL",operator:"!=",description:"Returns TRUE if X is not equal to Y."},{type:n.$M.Comparison,id:"NOT_EQUAL_ALT",operator:"<>",description:"Returns TRUE if X is not equal to Y."},{type:n.$M.Comparison,id:"LIKE",operator:"LIKE",description:'Checks if the STRING in the first operand X matches a pattern specified by the second operand Y. Expressions can contain these characters:\n- A percent sign "%" matches any number of characters or bytes\n- An underscore "_" matches a single character or byte\n- You can escape "", "_", or "%" using two backslashes. For example, "\\%". If you are using raw strings, only a single backslash is required. For example, r"%".'},{type:n.$M.Logical,id:"AND",operator:"AND"},{type:n.$M.Logical,id:"OR",operator:"OR"}],a=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"]},40773:(e,t,r)=>{"use strict";r.d(t,{D:()=>y});var n=r(58799),o=r(71808),i=r(35778),a=r(14444),u=r(60421),l=r(13924),s=r(93921),c=r(6932),f=r(45753),d=r(75478),p=r(5970),v=r(58123),g=r(355);function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y extends l.CK{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.J)();super(e),h(this,"id",void 0),h(this,"name",void 0),h(this,"interval",void 0),h(this,"db",void 0),h(this,"annotations",{}),h(this,"interpolateVariable",((e,t)=>{if("string"==typeof e)return t.multi||t.includeAll?this.getQueryModel().quoteLiteral(e):String(e).replace(/'/g,"''");if("number"==typeof e)return e;if(Array.isArray(e)){return e.map((e=>this.getQueryModel().quoteLiteral(e))).join(",")}return e})),this.templateSrv=t,this.name=e.name,this.id=e.id;const r=e.jsonData||{};this.interval=r.timeInterval||"1m",this.db=this.getDB()}interpolateVariablesInQueries(e,t){let r=e;return e&&e.length>0&&(r=e.map((e=>Object.assign({},e,{datasource:this.getRef(),rawSql:this.templateSrv.replace(e.rawSql,t,this.interpolateVariable),rawQuery:!0})))),r}filterQuery(e){return!e.hide}applyTemplateVariables(e,t){return{refId:e.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(e.rawSql,t,this.interpolateVariable),format:e.format}}async metricFindQuery(e,t){let r="tempvar";t&&t.variable&&t.variable.name&&(r=t.variable.name);const n=this.templateSrv.replace(e,(0,p._6)({query:e,wildcardChar:"%",options:t}),this.interpolateVariable),o={refId:r,datasource:this.getRef(),rawSql:n,format:g.ws.Table},i=await this.runMetaQuery(o,t);return this.getResponseParser().transformMetricFindResponse(i)}async runSql(e,t){const r=await this.runMetaQuery({rawSql:e,format:g.ws.Table,refId:null==t?void 0:t.refId},t);return new u.U(r)}runMetaQuery(e,t){var r,o;const a=(0,d.$t)().timeRange(),u=e.refId||"meta",l=[Object.assign({},e,{datasource:e.datasource||this.getRef(),refId:u})];return(0,n.n)((0,c.i)().fetch({url:"/api/ds/query",method:"POST",data:{from:(null==t||null===(r=t.range)||void 0===r?void 0:r.from.valueOf().toString())||a.from.valueOf().toString(),to:(null==t||null===(o=t.range)||void 0===o?void 0:o.to.valueOf().toString())||a.to.valueOf().toString(),queries:l},requestId:u}).pipe((0,i.U)((e=>(0,f.z1)(e,l).data[0]))))}testDatasource(){return(0,n.n)((0,c.i)().fetch({url:"/api/ds/query",method:"POST",data:{from:"5m",to:"now",queries:[{refId:"A",intervalMs:1,maxDataPoints:1,datasource:this.getRef(),datasourceId:this.id,rawSql:"SELECT 1",format:"table"}]}}).pipe((0,i.U)((()=>({status:"success",message:"Database Connection OK"}))),(0,a.K)((e=>(0,o.of)((0,f.Gw)(e))))))}targetContainsTemplate(e){let t=e.rawSql;return v.ni.forEach((e=>{var r;t=(null===(r=t)||void 0===r?void 0:r.replace(e,""))||""})),this.templateSrv.containsTemplate(t)}}},13:(e,t,r)=>{"use strict";r.d(t,{Y:()=>i});var n=r(355),o=r(60437);function i(e){let t=(null==e?void 0:e.editorMode)||n.je.Builder;void 0===(null==e?void 0:e.editorMode)&&void 0!==(null==e?void 0:e.rawSql)&&(t=n.je.Code);return Object.assign({},e,{refId:(null==e?void 0:e.refId)||"A",format:void 0!==(null==e?void 0:e.format)?e.format:n.ws.Table,rawSql:(null==e?void 0:e.rawSql)||"",editorMode:t,sql:(null==e?void 0:e.sql)||{columns:[(0,o.Wf)()],groupBy:[(0,o.U2)()],limit:50}})}},14134:(e,t,r)=>{"use strict";let n,o;r.d(t,{R:()=>n,a:()=>o}),function(e){e.String="string"}(n||(n={})),function(e){e.Property="property",e.Operator="operator",e.Or="or",e.And="and",e.GroupBy="groupBy",e.Function="function",e.FunctionParameter="functionParameter"}(o||(o={}))},355:(e,t,r)=>{"use strict";r.d(t,{$M:()=>o.OperatorType,Er:()=>l,G8:()=>o.CompletionItemPriority,cm:()=>o.CompletionItemKind,fC:()=>o.StatementPosition,iv:()=>o.TokenType,je:()=>a,ws:()=>i,x7:()=>u});var n=r(46196),o=r(68522);let i,a;!function(e){e.Timeseries="time_series",e.Table="table"}(i||(i={})),function(e){e.Builder="builder",e.Code="code"}(a||(a={}));const u=[{label:"Time series",value:i.Timeseries},{label:"Table",value:i.Table}],l=null!==n.E&&void 0!==n.E?n.E:e=>({label:e,value:e})},60437:(e,t,r)=>{"use strict";r.d(t,{C5:()=>i,IC:()=>a,U2:()=>u,Wf:()=>s,ax:()=>l});var n=r(82897),o=r(14134);function i(e){var t,r,o,i;let{sql:u,dataset:l,table:s}=e,c="";if(!u||!a(u.columns))return c;if(c+=`SELECT ${u.columns.map((e=>{let t="";var r,n;return e.name?t+=`${e.name}(${null===(r=e.parameters)||void 0===r?void 0:r.map((e=>`${e.name}`))})`:t+=`${null===(n=e.parameters)||void 0===n?void 0:n.map((e=>`${e.name}`))}`,t})).join(", ")} `,l&&s&&(c+=`FROM ${l}.${s} `),u.whereString&&(c+=`WHERE ${u.whereString} `),null!==(t=u.groupBy)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.property.name){c+=`GROUP BY ${u.groupBy.map((e=>e.property.name)).filter((e=>!(0,n.isEmpty)(e))).join(", ")} `}return null!==(o=u.orderBy)&&void 0!==o&&o.property.name&&(c+=`ORDER BY ${u.orderBy.property.name} `),null!==(i=u.orderBy)&&void 0!==i&&i.property.name&&u.orderByDirection&&(c+=`${u.orderByDirection} `),void 0!==u.limit&&u.limit>=0&&(c+=`LIMIT ${u.limit} `),c}const a=e=>{if(!e)return!1;const t=e.some((e=>{var t,r;return(null===(t=e.parameters)||void 0===t?void 0:t.length)||(null===(r=e.parameters)||void 0===r?void 0:r.some((e=>e.name)))})),r=e.some((e=>e.name));return t||r};function u(e){return{type:o.a.GroupBy,property:{type:o.R.String,name:e}}}function l(e){return{type:o.a.Property,property:{type:o.R.String,name:e}}}function s(e){return{type:o.a.Function,name:e,parameters:[]}}},88711:(e,t,r)=>{"use strict";var n=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.setDragStart=t.setDragProgress=t.setDragEnd=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=a?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(o,u,l):o[u]=e[u]}o.default=e,r&&r.set(e,o);return o}(r(75931));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}t.setDragProgress=function(e,t){return{type:o.SET_DRAG_PROGRESS,mousePos:e,dragging:t}};t.setDragStart=function(e,t,r){return{type:o.SET_DRAG_START,dragStart:e,dragging:t,mousePos:r}};t.setDragEnd=function(){return{type:o.SET_DRAG_END}}},11613:(e,t,r)=>{"use strict";var n=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.setNot=t.setLock=t.setConjunction=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(o,u,l):o[u]=e[u]}o.default=e,r&&r.set(e,o);return o}(r(75931)),i=r(10173);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}t.setConjunction=function(e,t,r){return{type:o.SET_CONJUNCTION,path:(0,i.toImmutableList)(t),conjunction:r}};t.setNot=function(e,t,r){return{type:o.SET_NOT,path:(0,i.toImmutableList)(t),not:r}};t.setLock=function(e,t,r){return{type:o.SET_LOCK,path:(0,i.toImmutableList)(t),lock:r}}},85750:(e,t,r)=>{"use strict";var n=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.tree=t.rule=t.group=t.drag=void 0;var o=s(r(88334));t.tree=o;var i=s(r(11613));t.group=i;var a=s(r(49376));t.rule=a;var u=s(r(88711));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}t.drag=u},49376:(e,t,r)=>{"use strict";var n=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.setValueSrc=t.setValue=t.setOperatorOption=t.setOperator=t.setField=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(o,u,l):o[u]=e[u]}o.default=e,r&&r.set(e,o);return o}(r(75931)),i=r(10173);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}t.setField=function(e,t,r){return{type:o.SET_FIELD,path:(0,i.toImmutableList)(t),field:r,config:e}};t.setOperator=function(e,t,r){return{type:o.SET_OPERATOR,path:(0,i.toImmutableList)(t),operator:r,config:e}};t.setValue=function(e,t,r,n,a,u,l){return{type:o.SET_VALUE,path:(0,i.toImmutableList)(t),delta:r,value:n,valueType:a,asyncListValues:u,config:e,__isInternal:l}};t.setValueSrc=function(e,t,r,n){return{type:o.SET_VALUE_SRC,path:(0,i.toImmutableList)(t),delta:r,srcKey:n,config:e}};t.setOperatorOption=function(e,t,r,n){return{type:o.SET_OPERATOR_OPTION,path:(0,i.toImmutableList)(t),name:r,value:n,config:e}}},88334:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.setTree=t.removeRule=t.removeGroup=t.moveItem=t.addRule=t.addGroup=t.addDefaultCaseGroup=t.addCaseGroup=void 0;var i=n(r(73172)),a=r(10173),u=r(32951),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(75931));n(r(40745));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}t.setTree=function(e,t){return{type:l.SET_TREE,tree:t}};t.addRule=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rule",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:l.ADD_RULE,ruleType:n,children:o,path:(0,a.toImmutableList)(t),id:(0,i.default)(),properties:(0,u.defaultRuleProperties)(e).merge(r||{}),config:e}};t.removeRule=function(e,t){return{type:l.REMOVE_RULE,path:(0,a.toImmutableList)(t),config:e}};t.addDefaultCaseGroup=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:l.ADD_CASE_GROUP,path:(0,a.toImmutableList)(t),children:n,id:(0,i.default)(),properties:(0,u.defaultGroupProperties)(e).merge(r||{}),config:e,meta:{isDefaultCase:!0}}};t.addCaseGroup=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:l.ADD_CASE_GROUP,path:(0,a.toImmutableList)(t),children:n,id:(0,i.default)(),properties:(0,u.defaultGroupProperties)(e).merge(r||{}),config:e}};t.addGroup=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:l.ADD_GROUP,path:(0,a.toImmutableList)(t),children:n,id:(0,i.default)(),properties:(0,u.defaultGroupProperties)(e).merge(r||{}),config:e}};t.removeGroup=function(e,t){return{type:l.REMOVE_GROUP,path:(0,a.toImmutableList)(t),config:e}};t.moveItem=function(e,t,r,n){return{type:l.MOVE_ITEM,fromPath:(0,a.toImmutableList)(t),toPath:(0,a.toImmutableList)(r),placement:n,config:e}}},24092:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a,u=n(r(72380)),l=n(r(50189)),s=n(r(6633)),c=n(r(91917)),f=n(r(95595)),d=E(r(68404)),p=n(r(59160)),v=E(r(40745)),g=r(44609),h=n(r(51115)),y=r(92969),m=(n(r(73172)),r(82363));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var _=(0,h.default)((a=function(e){(0,s.default)(r,e);var t=b(r);function r(e){var n;return(0,u.default)(this,r),(n=t.call(this,e))._updPath(e),n}return(0,l.default)(r,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=(0,m.pureShouldComponentUpdate)(this)(e,t);if(n){var o=[];for(var i in e){e[i]!==r[i]&&"__isInternalValueChange"!=i&&o.push(i)}o.length||(n=!1),1==o.length&&"tree"==o[0]&&e.__isInternalValueChange&&(n=!1)}return n}},{key:"_updPath",value:function(e){var t=e.tree.get("id");this.path=v.default.List.of(t)}},{key:"render",value:function(){var e=this.props.tree,t=e.get("type"),r="switch_group"==t,n=r?null:(0,y.getTotalReordableNodesCountInTree)(e),o=r?null:(0,y.getTotalRulesCountInTree)(e),i=e.get("id");return d.default.createElement(g.Item,{key:i,id:i,path:this.path,type:t,properties:e.get("properties")||new v.Map,config:this.props.config,actions:this.props.actions,children1:e.get("children1")||new v.Map,reordableNodesCnt:n,totalRulesCnt:o,parentReordableNodesCnt:0,onDragStart:this.props.onDragStart})}}]),r}(d.Component),a.propTypes={tree:p.default.any.isRequired,config:p.default.object.isRequired,actions:p.default.object.isRequired,onDragStart:p.default.func},i=a))||i;t.default=_},88133:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.validateAndFixTree=t.default=void 0;var i=n(r(62764)),a=n(r(72380)),u=n(r(50189)),l=n(r(27937)),s=n(r(6633)),c=n(r(91917)),f=n(r(95595)),d=E(r(68404)),p=n(r(59160)),v=E(r(85750)),g=r(92969),h=r(10173),y=r(82363),m=r(59175);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var S=function(e,t,r,n){var o=(0,m.validateTree)(e,t,r,n);return o=(0,g.fixPathsInTree)(o)};t.validateAndFixTree=S;var R=function(e){(0,s.default)(r,e);var t=T(r);function r(e){var n;return(0,a.default)(this,r),n=t.call(this,e),(0,y.useOnPropsChanged)((0,l.default)(n)),n._updateActions(e),n.validatedTree=n.validateTree(e,e),n}return(0,u.default)(r,[{key:"validateTree",value:function(e,t){return S(e.tree,t.tree,e.config,t.config)}},{key:"_updateActions",value:function(e){var t=e.config,r=e.dispatch;this.actions=(0,y.bindActionCreators)(_(_(_({},v.tree),v.group),v.rule),t,r)}},{key:"onPropsChanged",value:function(e){var t=e.onChange,r=this.props.config,n=e.tree,o=e.config,i=this.validatedTree;this.validatedTree=n,r!==o&&(this._updateActions(e),this.validatedTree=this.validateTree(e,this.props)),!(0,h.immutableEqual)(this.validatedTree,i)&&t&&t(this.validatedTree,o,e.__lastAction)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.renderBuilder,n=e.dispatch,o=e.__isInternalValueChange;return r({tree:this.validatedTree,actions:this.actions,config:t,dispatch:n,__isInternalValueChange:o})}}]),r}(d.PureComponent);t.default=R,R.propTypes={config:p.default.object.isRequired,onChange:p.default.func,renderBuilder:p.default.func,tree:p.default.any}},64694:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(62764)),a=n(r(72380)),u=n(r(50189)),l=n(r(27937)),s=n(r(6633)),c=n(r(91917)),f=n(r(95595)),d=C(r(68404)),p=n(r(59160)),v=n(r(78512)),g=n(r(49277)),h=r(31259),y=r(39574),m=C(r(85750)),O=r(87242),E=r(10173),b=r(32951),_=r(82363),T=n(r(7275)),S=C(r(88133));function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(R=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=R(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var I=["conjunctions","fields","types","operators","widgets","settings","funcs"],A=(0,y.connect)((function(e){return{tree:e.tree,__isInternalValueChange:e.__isInternalValueChange,__lastAction:e.__lastAction}}),null,null,{context:g.default})(S.default);A.displayName="ConnectedQuery";var w=function(e){(0,s.default)(r,e);var t=L(r);function r(e,n){var o;(0,a.default)(this,r),(o=t.call(this,e,n)).shouldComponentUpdate=(0,_.liteShouldComponentUpdate)((0,l.default)(o),{value:function(e,t,r){return!1}}),(0,_.useOnPropsChanged)((0,l.default)(o));var i=(0,T.default)(e,I),u=(0,O.extendConfig)(i),s=e.value,c=s?(0,S.validateAndFixTree)(s,null,i,i):null,f=(0,v.default)(N(N({},i),{},{tree:c}));return o.state={store:(0,h.createStore)(f),config:u},o}return(0,u.default)(r,[{key:"onPropsChanged",value:function(e){var t=this,r=(0,T.default)(this.props,I),n=(0,T.default)(e,I);!(0,E.shallowEqual)(r,n,!0)&&(n=(0,O.extendConfig)(n),this.setState({config:n}));var o=this.state.store.getState().tree;if(!(0,E.immutableEqual)(e.value,this.props.value)&&!(0,E.immutableEqual)(e.value,o)){var i=e.value||(0,b.defaultRoot)(N(N({},e),{},{tree:null})),a=(0,S.validateAndFixTree)(i,null,n,r);return Promise.resolve().then((function(){t.state.store.dispatch(m.tree.setTree(e,a))}))}}},{key:"render",value:function(){var e=this.props,t=e.renderBuilder,r=e.get_children,n=e.onChange,o=e.settings,i=this.state,a=i.config,u=i.store,l=o.renderProvider;return d.default.createElement(l,{config:a},d.default.createElement(y.Provider,{store:u,context:g.default},d.default.createElement(A,{store:u,config:a,onChange:n,renderBuilder:t||r})))}}]),r}(d.Component);t.default=w,w.propTypes={conjunctions:p.default.object.isRequired,fields:p.default.object.isRequired,types:p.default.object.isRequired,operators:p.default.object.isRequired,widgets:p.default.object.isRequired,settings:p.default.object.isRequired,onChange:p.default.func,renderBuilder:p.default.func,value:p.default.any}},77754:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(21403)),a=n(r(81723)),u=n(r(72380)),l=n(r(50189)),s=n(r(6633)),c=n(r(91917)),f=n(r(95595)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),p=n(r(59160)),v=["isDraggingTempo","isDraggingMe","dragging"];function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var y=r(23019);t.default=function(e){return function(t){var r;return(r=function(r){(0,s.default)(o,r);var n=h(o);function o(e){var t;return(0,u.default)(this,o),(t=n.call(this,e)).handleDraggerMouseDown=function(e){var r=t.props.id,n=t.wrapper.current;t.props.onDragStart&&t.props.onDragStart(r,n,e)},t.wrapper=d.default.createRef(),t}return(0,l.default)(o,[{key:"render",value:function(){var r=this.props,n=r.isDraggingTempo,o=r.isDraggingMe,u=r.dragging,l=(0,a.default)(r,v),s=l.isTrueLocked,c={};o&&n&&(c={top:u.y,left:u.x,width:u.w});var f=y(e,"group-or-rule",o&&n?"qb-draggable":null,o&&!n?"qb-placeholder":null,s?"locked":null);return d.default.createElement("div",{className:f,style:c,ref:this.wrapper,"data-id":this.props.id},d.default.createElement(t,(0,i.default)({handleDraggerMouseDown:this.handleDraggerMouseDown,isDraggingMe:o,isDraggingTempo:n},l)))}}]),o}(d.PureComponent)).propTypes={isDraggingTempo:p.default.bool,isDraggingMe:p.default.bool,onDragStart:p.default.func,dragging:p.default.object,isLocked:p.default.bool,isTrueLocked:p.default.bool},r}}},44799:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(72380)),a=n(r(50189)),u=n(r(27937)),l=n(r(6633)),s=n(r(91917)),c=n(r(95595)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),d=n(r(59160)),p=n(r(74937)),v=n(r(49277)),g=r(82363),h=r(39574),y=r(32951);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}t.default=function(e){var t=(0,h.connect)((function(e){return{dragging:e.dragging}}),null,null,{context:v.default})(function(e){var t;return t=function(t){(0,l.default)(n,t);var r=O(n);function n(e){var t;return(0,i.default)(this,n),(t=r.call(this,e))._selectedConjunction=function(e){return(e=e||t.props).conjunction||(0,y.defaultGroupConjunction)(e.config,e.field)},t.setConjunction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setConjunction(t.props.path,e)},t.setNot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setNot(t.props.path,e)},t.setLock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setLock(t.props.path,e)},t.dummyFn=function(){},t.removeSelf=function(){t.props.actions.removeGroup(t.props.path)},t.addGroup=function(){t.props.actions.addGroup(t.props.path)},t.addCaseGroup=function(){t.props.actions.addCaseGroup(t.props.path)},t.addDefaultCaseGroup=function(){t.props.actions.addDefaultCaseGroup(t.props.path)},t.addRule=function(){t.props.actions.addRule(t.props.path)},t.setField=function(e){t.props.actions.setField(t.props.path,e)},t.setOperator=function(e){t.props.actions.setOperator(t.props.path,e)},t.setValue=function(e,r,n){t.props.actions.setValue(t.props.path,e,r,n)},(0,g.useOnPropsChanged)((0,u.default)(t)),t.selectedConjunction=t._selectedConjunction(e),t.conjunctionOptions=t._getConjunctionOptions(e),t.dummyFn.isDummyFn=!0,t}return(0,a.default)(n,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=(0,g.pureShouldComponentUpdate)(this)(e,t);if(o&&n==t&&r!=e){var i=(e.dragging.id||r.dragging.id)==e.id,a=[];for(var u in e){var l=e[u]!=r[u];"dragging"!=u||i||(l=!1),l&&a.push(u)}a.length||(o=!1)}return o}},{key:"onPropsChanged",value:function(e){var t=e.config,r=(e.id,e.conjunction),n=this.props.config,o=this.props.conjunction;n==t&&o==r||(this.selectedConjunction=this._selectedConjunction(e),this.conjunctionOptions=this._getConjunctionOptions(e))}},{key:"_getConjunctionOptions",value:function(e){var t=this;return(0,p.default)(e.config.conjunctions,(function(r,n){return{id:"conjunction-".concat(e.id,"-").concat(n),name:"conjunction[".concat(e.id,"]"),key:n,label:r.label,checked:n===t._selectedConjunction(e)}}))}},{key:"render",value:function(){var t=this.props.dragging.id==this.props.id,r=this.props.path.size,n=this.props.config.settings.maxNesting,o=!t&&this.props.isDraggingTempo,i=void 0===n||r<n,a=1==r;return f.default.createElement("div",{className:"group-or-rule-container group-container","data-id":this.props.id},[t?f.default.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,isRoot:a,allowFurtherNesting:i,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:this.dummyFn,setNot:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,addGroup:this.dummyFn,addCaseGroup:this.dummyFn,addDefaultCaseGroup:this.dummyFn,addRule:this.dummyFn,setField:this.dummyFn,setOperator:this.dummyFn,setValue:this.dummyFn,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,f.default.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:t,isDraggingTempo:o,onDragStart:this.props.onDragStart,isRoot:a,allowFurtherNesting:i,conjunctionOptions:this.conjunctionOptions,not:this.props.not,selectedConjunction:this.selectedConjunction,setConjunction:o?this.dummyFn:this.setConjunction,setNot:o?this.dummyFn:this.setNot,setLock:o?this.dummyFn:this.setLock,removeSelf:o?this.dummyFn:this.removeSelf,addGroup:o?this.dummyFn:this.addGroup,addCaseGroup:o?this.dummyFn:this.addCaseGroup,addDefaultCaseGroup:o?this.dummyFn:this.addDefaultCaseGroup,addRule:o?this.dummyFn:this.addRule,setField:o?this.dummyFn:this.setField,setOperator:o?this.dummyFn:this.setOperator,setValue:o?this.dummyFn:this.setValue,value:this.props.value||null,config:this.props.config,children1:this.props.children1,actions:this.props.actions,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),n}(f.Component),t.propTypes={config:d.default.object.isRequired,actions:d.default.object.isRequired,path:d.default.any.isRequired,id:d.default.string.isRequired,groupId:d.default.string,not:d.default.bool,conjunction:d.default.string,children1:d.default.any,onDragStart:d.default.func,reordableNodesCnt:d.default.number,field:d.default.string,parentField:d.default.string,isLocked:d.default.bool,isTrueLocked:d.default.bool,dragging:d.default.object,isDraggingTempo:d.default.bool},t}(e));return t.displayName="ConnectedGroupContainer",t}},73905:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(72380)),a=n(r(50189)),u=n(r(6633)),l=n(r(91917)),s=n(r(95595)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),f=n(r(59160)),d=n(r(49277)),p=r(87242),v=r(82363),g=r(39574);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var m=r(23019);t.default=function(e){var t=(0,g.connect)((function(e){return{dragging:e.dragging}}),null,null,{context:d.default})(function(e){var t;return t=function(t){(0,u.default)(n,t);var r=y(n);function n(e){var t;return(0,i.default)(this,n),(t=r.call(this,e)).dummyFn=function(){},t.removeSelf=function(){t.props.actions.removeRule(t.props.path)},t.setLock=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.props.actions.setLock(t.props.path,e)},t.setField=function(e){t.props.actions.setField(t.props.path,e)},t.setOperator=function(e){t.props.actions.setOperator(t.props.path,e)},t.setOperatorOption=function(e,r){t.props.actions.setOperatorOption(t.props.path,e,r)},t.setValue=function(e,r,n,o,i){t.props.actions.setValue(t.props.path,e,r,n,o,i)},t.setValueSrc=function(e,r){t.props.actions.setValueSrc(t.props.path,e,r)},t.dummyFn.isDummyFn=!0,t}return(0,a.default)(n,[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=(0,v.pureShouldComponentUpdate)(this)(e,t);if(o&&n==t&&r!=e){var i=(e.dragging.id||r.dragging.id)==e.id,a=[];for(var u in e){var l=e[u]!=r[u];"dragging"!=u||i||(l=!1),l&&a.push(u)}a.length||(o=!1)}return o}},{key:"render",value:function(){var t=this.props.dragging.id==this.props.id,r=(0,p.getFieldConfig)(this.props.config,this.props.field),n=this.props.config.settings.showErrorMessage,o=(r&&r.type,!t&&this.props.isDraggingTempo),i=this.props.valueError,a=null!=(i&&i.toArray().filter((function(e){return!!e})).shift()||null)&&n;return c.default.createElement("div",{className:m("group-or-rule-container","rule-container",a?"rule-with-error":null),"data-id":this.props.id},[t?c.default.createElement(e,{key:"dragging",id:this.props.id,groupId:this.props.groupId,isDraggingMe:!0,isDraggingTempo:!0,dragging:this.props.dragging,setField:this.dummyFn,setOperator:this.dummyFn,setOperatorOption:this.dummyFn,setLock:this.dummyFn,removeSelf:this.dummyFn,setValue:this.dummyFn,setValueSrc:this.dummyFn,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt}):null,c.default.createElement(e,{key:this.props.id,id:this.props.id,groupId:this.props.groupId,isDraggingMe:t,isDraggingTempo:o,onDragStart:this.props.onDragStart,setLock:o?this.dummyFn:this.setLock,removeSelf:o?this.dummyFn:this.removeSelf,setField:o?this.dummyFn:this.setField,setOperator:o?this.dummyFn:this.setOperator,setOperatorOption:o?this.dummyFn:this.setOperatorOption,setValue:o?this.dummyFn:this.setValue,setValueSrc:o?this.dummyFn:this.setValueSrc,selectedField:this.props.field||null,parentField:this.props.parentField||null,selectedOperator:this.props.operator||null,value:this.props.value||null,valueSrc:this.props.valueSrc||null,valueError:this.props.valueError||null,operatorOptions:this.props.operatorOptions,config:this.props.config,reordableNodesCnt:this.props.reordableNodesCnt,totalRulesCnt:this.props.totalRulesCnt,asyncListValues:this.props.asyncListValues,isLocked:this.props.isLocked,isTrueLocked:this.props.isTrueLocked,parentReordableNodesCnt:this.props.parentReordableNodesCnt})])}}]),n}(c.Component),t.propTypes={id:f.default.string.isRequired,groupId:f.default.string,config:f.default.object.isRequired,path:f.default.any.isRequired,operator:f.default.string,field:f.default.string,actions:f.default.object.isRequired,onDragStart:f.default.func,value:f.default.any,valueSrc:f.default.any,asyncListValues:f.default.array,valueError:f.default.any,operatorOptions:f.default.object,reordableNodesCnt:f.default.number,parentField:f.default.string,isLocked:f.default.bool,isTrueLocked:f.default.bool,dragging:f.default.object,isDraggingTempo:f.default.bool},t}(e));return t.displayName="ConnectedRuleContainer",t}},51115:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(21403)),a=n(r(66604)),u=n(r(72380)),l=n(r(50189)),s=n(r(27937)),c=n(r(6633)),f=n(r(91917)),d=n(r(95595)),p=S(r(68404)),v=r(39574),g=r(92969),h=r(10173),y=n(r(49277)),m=S(r(75931)),O=n(r(29521)),E=n(r(59160)),b=S(r(85750)),_=r(82363);function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var C=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=function(t){(0,c.default)(o,t);var n=R(o);function o(e){var t;return(0,u.default)(this,o),(t=n.call(this,e))._getEventTarget=function(e,t){return e&&e.__mocked_window||document.body||window},t.onDragStart=function(e,r,n){var o=r.closest(".query-builder");document.body.classList.add("qb-dragging"),o.classList.add("qb-dragging");var i,a=o.closest(".query-builder-container")||o,u=(a=t._getScrollParent(a)||document.body).scrollTop,l=(t._getDraggableNodeEl(o),t._getPlaceholderNodeEl(o),o.querySelectorAll(".group--children")),s=l.length?l[0]:null;s&&(i=window.getComputedStyle(s,null).getPropertyValue("padding-left"),i=parseInt(i));var c={id:e,x:r.offsetLeft,y:r.offsetTop,w:r.offsetWidth,h:r.offsetHeight,itemInfo:t.tree.items[e],paddingLeft:i},f={id:e,x:r.offsetLeft,y:r.offsetTop,scrollTop:u,clientX:n.clientX,clientY:n.clientY,itemInfo:(0,O.default)(t.tree.items[e]),treeEl:o,treeElContainer:a},d={clientX:n.clientX,clientY:n.clientY},p=t._getEventTarget(n,f);t.eventTarget=p,p.addEventListener("mousemove",t.onDrag),p.addEventListener("mouseup",t.onDragEnd),t.props.setDragStart(f,c,d)},t.onDrag=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=Object.assign({},t.props.dragging),i=t.props.dragStart,a=o.paddingLeft,u=i.treeElContainer,l=u.scrollTop;if(o.itemInfo=t.tree.items[o.id],o.itemInfo){var s={clientX:e.clientX,clientY:e.clientY},c={clientX:i.clientX,clientY:i.clientY};if(e.__mock_dom){var f=i.treeEl,d=t._getDraggableNodeEl(f),p=t._getPlaceholderNodeEl(f);e.__mock_dom({treeEl:f,dragEl:d,plhEl:p})}if(!i.plX){var v=i.treeEl,g=t._getPlaceholderNodeEl(v);g&&(i.plX=g.getBoundingClientRect().left+window.scrollX,i.plY=g.getBoundingClientRect().top+window.scrollY)}var h=i.x,y=i.y,m=i.clientX,O=i.clientY,E=i.scrollTop,b={x:h+(e.clientX-m),y:y+(e.clientY-O)+(l-E)};o.x=b.x,o.y=b.y,o.paddingLeft=a,o.mousePos=s,o.startMousePos=c,t.props.setDragProgress(s,o);var _=!!n&&t.handleDrag(o,e,r);_||e.preventDefault&&e.preventDefault()}},t.onDragEnd=function(){var e=t.props.dragStart.treeEl;t.props.setDragEnd(),e.classList.remove("qb-dragging"),document.body.classList.remove("qb-dragging"),t._cacheEls={};var r=t.eventTarget||t._getEventTarget();r.removeEventListener("mousemove",t.onDrag),r.removeEventListener("mouseup",t.onDragEnd)},(0,_.useOnPropsChanged)((0,s.default)(t)),t.onPropsChanged(e),t}return(0,l.default)(o,[{key:"onPropsChanged",value:function(e){this.tree=(0,g.getFlatTree)(e.tree)}},{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=this.state,o=(0,_.pureShouldComponentUpdate)(this)(e,t);if(o&&n==t&&r!=e){var i=[];for(var a in e){e[a]!=r[a]&&"dragging"!=a&&"mousePos"!=a&&i.push(a)}i.length||(o=!1)}return o}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.dragging,n=this.props.dragStart;if(n&&n.id&&(r.itemInfo=this.tree.items[r.id],r.itemInfo&&(r.itemInfo.index!=n.itemInfo.index||r.itemInfo.parent!=n.itemInfo.parent))){var o=n.treeEl,i=n.treeElContainer,a=this._getPlaceholderNodeEl(o,!0);if(a){var u=a.getBoundingClientRect().left+window.scrollX,l=a.getBoundingClientRect().top+window.scrollY,s=n.plX,c=n.plY,f=i.scrollTop;n.plX=u,n.plY=l,n.itemInfo=(0,O.default)(r.itemInfo),n.y=a.offsetTop,n.x=a.offsetLeft,n.clientY+=l-c,n.clientX+=u-s,i!=document.body&&(n.scrollTop=f),this.onDrag(this.props.mousePos,!1)}}}},{key:"_getNodeElById",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t)return null;this._cacheEls||(this._cacheEls={});var n=this._cacheEls[t];return n&&document.contains(n)&&!r||(n=e.querySelector('.group-or-rule-container[data-id="'+t+'"]'),this._cacheEls[t]=n),n}},{key:"_getDraggableNodeEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._cacheEls||(this._cacheEls={});var r=this._cacheEls.draggable;if(r&&document.contains(r)&&!t)return r;var n=e.getElementsByClassName("qb-draggable");return r=n.length?n[0]:null,this._cacheEls.draggable=r,r}},{key:"_getPlaceholderNodeEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._cacheEls||(this._cacheEls={});var r=this._cacheEls.placeholder;if(r&&document.contains(r)&&!t)return r;var n=e.getElementsByClassName("qb-placeholder");return r=n.length?n[0]:null,this._cacheEls.placeholder=r,r}},{key:"_isScrollable",value:function(e){var t=window.getComputedStyle(e)["overflow-y"];return("scroll"===t||"auto"===t)&&e.scrollHeight>e.offsetHeight}},{key:"_getScrollParent",value:function(e){return null==e?null:e===document.body||this._isScrollable(e)?e:this._getScrollParent(e.parentNode)}},{key:"handleDrag",value:function(e,t,r){var n,o,i,u,l=this,s=e.itemInfo,c=e.paddingLeft,f=null,d=this.props.dragStart.treeEl,p=e.id,v=this._getDraggableNodeEl(d),g=this._getPlaceholderNodeEl(d);if(v&&g){if(n=v.getBoundingClientRect(),!(o=g.getBoundingClientRect()).width)return;var y={hrz:0,vrt:0};n.top<o.top?y.vrt=-1:n.bottom>o.bottom&&(y.vrt=1),n.left>o.left?y.hrz=1:n.left<o.left&&(y.hrz=-1);var O,E={x:(u=d.getBoundingClientRect()).left+(u.right-u.left)/2,y:y.vrt>=0?n.bottom:n.top};if(t.__mocked_hov_container)O=t.__mocked_hov_container;else{var b=document.elementFromPoint(E.x,E.y-1);if(!(O=b?b.closest(".group-or-rule-container"):null)&&b&&b.classList.contains("query-builder-container")){var _,T=null==b||null===(_=b.firstChild)||void 0===_?void 0:_.firstChild;T&&T.classList.contains("group-or-rule-container")&&(O=T)}}if(O){var S=O.classList.contains("group-container"),R=O.getAttribute("data-id"),C=O,P=!1,N=!1;if(C){var L=(i=C.getBoundingClientRect()).bottom-i.top,I=this.tree.items[R],A=null,w=null,j=null,F=null;if(0==y.vrt)j=s,(w=g)&&(A=w.getBoundingClientRect());else if(S){if(y.vrt>0){var k=O.getElementsByClassName("group--header"),x=k.length?k[0]:null;if(x){var M=x.getBoundingClientRect(),D=M.bottom-M.top;n.bottom-M.top>3*D/4&&I.top>e.itemInfo.top&&(j=I,A=M,w=x,N=!0)}}else if(y.vrt<0){if(I.lev>=s.lev)i.bottom-n.top>=2&&I.top<e.itemInfo.top&&(j=I,A=i,w=C,P=!0)}(y.vrt<0?i.bottom-n.top>L-5:n.bottom-i.top>L-5)&&(N||P||(j=I,A=i,w=C),F=I)}else{(y.vrt<0?i.bottom-n.top>L/2:n.bottom-i.top>L/2)&&(j=I,A=i,w=C)}var V=j&&j.id==p;if(A){var U=n.left-u.left,q=(A.left,u.left,Math.max(0,Math.round(U/c))),W=[],G=[];if(V);else{if(S&&(P?W.push([m.PLACEMENT_APPEND,j,j.lev+1]):N&&W.push([m.PLACEMENT_PREPEND,j,j.lev+1]),F)){var B=0==F.lev,K="case_group"==F.type&&"case_group"!=s.type,z=F.prev&&this.tree.items[F.prev].caseId,H=F.next&&this.tree.items[F.next].caseId;s.caseId==z&&(z=null),s.caseId==H&&(H=null);var Y=z&&this.tree.items[z],J=H&&this.tree.items[H];y.vrt>0?B?G.push([m.PLACEMENT_APPEND,F,F.lev+1]):K&&J?G.push([m.PLACEMENT_PREPEND,J,J.lev+1]):G.push([m.PLACEMENT_AFTER,F,F.lev]):y.vrt<0&&(B?G.push([m.PLACEMENT_PREPEND,F,F.lev+1]):K&&Y?G.push([m.PLACEMENT_APPEND,Y,Y.lev+1]):G.push([m.PLACEMENT_BEFORE,F,F.lev]))}P||N||(y.vrt<0?W.push([m.PLACEMENT_BEFORE,j,j.lev]):y.vrt>0&&W.push([m.PLACEMENT_AFTER,j,j.lev]))}var $=function(e){var t=e[1],r=s.caseId?l.tree.items[s.caseId]:null,n=t.caseId?l.tree.items[t.caseId]:null;return[].concat((0,a.default)(e),[r,n])};W=W.map($),G=G.map($);var Q=null,X=(W=W.filter((function(e){var t=e[0],r=e[1];if((t==m.PLACEMENT_BEFORE||t==m.PLACEMENT_AFTER)&&null==r.parent)return!1;if(r.collapsed&&(t==m.PLACEMENT_APPEND||t==m.PLACEMENT_PREPEND))return!1;var n=r.id==s.id;if(!n)for(var o=r;o.parent;)if((o=l.tree.items[o.parent]).id==s.id){n=!0;break}return!n})).map((function(e){var t=e[0],r=e[1],n=(e[2],e[3],e[4],null);return(n=t==m.PLACEMENT_APPEND||t==m.PLACEMENT_PREPEND?r:l.tree.items[r.parent])&&null==n.parent&&(n=null),e[5]=n,e}))).filter((function(e){return l.canMove(s,e[1],e[0],e[3],e[4],e[5],r)}));0==X.length&&G.length>0&&(X=G.filter((function(e){return l.canMove(s,e[1],e[0],e[3],e[4],e[5],r)})));var Z=X.map((function(e){return e[2]})),ee=s.lev,te=Z.concat(ee),re=null;-1!=te.indexOf(q)?re=q:q>Math.max.apply(Math,(0,a.default)(te))?re=Math.max.apply(Math,(0,a.default)(te)):q<Math.min.apply(Math,(0,a.default)(te))&&(re=Math.min.apply(Math,(0,a.default)(te))),Q=X.find((function(e){return e[2]==re})),V||Q||!X.length||(Q=X[0]),f=Q}}}else h.logger.log("out of tree bounds!")}return!!f&&(this.move(s,f[1],f[0],f[3]),!0)}},{key:"canMove",value:function(e,t,r,n,o,i,a){if(!e||!t)return!1;if(e.id===t.id)return!1;var u=this.props.config.settings,l=u.canRegroup,s=u.canRegroupCases,c=u.maxNesting,f=u.maxNumberOfRules,d=u.canLeaveEmptyCase,p=i?i.lev+1:t.lev,v=r==m.PLACEMENT_BEFORE||r==m.PLACEMENT_AFTER,g=r==m.PLACEMENT_PREPEND||r==m.PLACEMENT_APPEND,h=v&&1==t.lev||g&&0==t.lev,y=e.parent!=t.parent,O=g||y,E="case_group"==e.type&&!h||"rule_group"==e.parentType||"rule_group"==t.type||"rule_group"==t.parentType||"case_group"!=e.type&&"case_group"==t.type&&v||"case_group"!=e.type&&"switch_group"==t.type||!s&&e.caseId!=t.caseId,b=t.isLocked||e.isLocked||i&&i.isLocked;if(c&&p>c)return!1;if(O&&(!l||E||b))return!1;if("case_group"!=e.type&&e.caseId!=t.caseId){var _=!!n&&2==n._height,T=o?o.leafsCount+1:0;if(f&&T>f)return!1;if(_&&!d)return!1}if("case_group"==e.type&&(e.isDefaultCase||t.isDefaultCase||"switch_group"==t.type&&r==m.PLACEMENT_APPEND))return!1;var S=!0;return a&&(S=a(e.node.toJS(),t.node.toJS(),r,i?i.node.toJS():null)),S}},{key:"move",value:function(e,t,r,n){this.props.actions.moveItem(e.path,t.path,r)}},{key:"render",value:function(){return p.default.createElement(e,(0,i.default)({},this.props,{onDragStart:this.onDragStart}))}}]),o}(p.Component),t.propTypes={tree:E.default.any.isRequired,actions:E.default.object.isRequired},t};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,v.connect)((function(e){return{dragging:e.dragging,dragStart:e.dragStart,mousePos:e.mousePos}}),{setDragStart:b.drag.setDragStart,setDragProgress:b.drag.setDragProgress,setDragEnd:b.drag.setDragEnd},null,{context:y.default})(C(e,t));return r.displayName="ConnectedSortableContainer",r}},64304:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,a,u=n(r(62764)),l=n(r(72380)),s=n(r(50189)),c=n(r(27937)),f=n(r(48333)),d=n(r(6633)),p=n(r(91917)),v=n(r(95595)),g=n(r(68404)),h=n(r(59160)),y=n(r(44799)),m=n(r(77754)),O=r(84400),E=r(57822),b=r(82363),_=r(68678),T=n(r(9923));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,v.default)(e);if(t){var o=(0,v.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var P=r(23019),N=(o=(0,m.default)("group case_group"),(0,y.default)(i=o(i=(0,_.ConfirmFn)((a=function(e){(0,d.default)(r,e);var t=C(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).childrenClassName=function(){return"case_group--children"},n.renderFooterWrapper=function(){return null},(0,b.useOnPropsChanged)((0,c.default)(n)),n.onPropsChanged(e),n}return(0,s.default)(r,[{key:"onPropsChanged",value:function(e){}},{key:"isDefaultCase",value:function(){return null==this.props.children1}},{key:"reordableNodesCnt",value:function(){return this.props.parentReordableNodesCnt}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(e){return this.props.totalRulesCnt}},{key:"showDragIcon",value:function(){return!this.isDefaultCase()&&(0,f.default)((0,v.default)(r.prototype),"showDragIcon",this).call(this)}},{key:"renderHeaderWrapper",value:function(){return g.default.createElement("div",{key:"group-header",className:P("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeaderLeft(),this.renderHeaderCenter(),this.renderActions())}},{key:"renderChildrenWrapper",value:function(){return this.isDefaultCase()?null:g.default.createElement("div",{className:"case_group--body"},this.renderCondition(),this.renderValue())}},{key:"renderHeaderLeft",value:function(){return this.isDefaultCase()?this.props.config.settings.defaultCaseLabel||"":g.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderCondition",value:function(){return this.isDefaultCase()?null:(0,f.default)((0,v.default)(r.prototype),"renderChildrenWrapper",this).call(this)}},{key:"renderHeaderCenter",value:function(){return this.isDefaultCase()?this.renderValue():null}},{key:"canAddGroup",value:function(){return!this.isDefaultCase()&&(0,f.default)((0,v.default)(r.prototype),"canAddGroup",this).call(this)}},{key:"canAddRule",value:function(){return!this.isDefaultCase()&&(0,f.default)((0,v.default)(r.prototype),"canAddRule",this).call(this)}},{key:"renderValue",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.value,o=e.setValue,i=e.id,a=t.settings.immutableValuesMode,u=g.default.createElement(T.default,{key:"values",isCaseValue:!0,field:"!case_value",operator:null,value:n,valueSrc:"value",valueError:null,config:t,setValue:a?_.dummyFn:o,setValueSrc:_.dummyFn,readonly:a||r,id:i,groupId:null});return g.default.createElement(_.Col,{className:"case_group--value"},u)}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addGroup,n=e.addRule,o=e.isLocked,i=e.isTrueLocked,a=e.id;return g.default.createElement(E.GroupActions,{config:t,addGroup:r,addRule:n,canAddRule:this.canAddRule(),canAddGroup:this.canAddGroup(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props.value,t=e&&e.size?e.get(0):null,n=null!=t&&(!Array.isArray(t)||t.length>0);return(0,f.default)((0,v.default)(r.prototype),"isEmptyCurrentGroup",this).call(this)&&!n}}]),r}(O.BasicGroup),a.propTypes=R(R({},O.BasicGroup.propTypes),{},{parentReordableNodesCnt:h.default.number,value:h.default.any,setValue:h.default.func}),i=a))||i)||i)||i);t.default=N},84400:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BasicGroup=void 0;var i=n(r(21403)),a=n(r(62764)),u=n(r(72380)),l=n(r(50189)),s=n(r(27937)),c=n(r(6633)),f=n(r(91917)),d=n(r(95595)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),v=n(r(59160)),g=n(r(94738)),h=n(r(44799)),y=n(r(77754)),m=r(44609),O=r(57822),E=r(68678);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var R=r(23019),C=function(e){(0,c.default)(r,e);var t=S(r);function r(e){var n;return(0,u.default)(this,r),(n=t.call(this,e)).childrenClassName=function(){return""},n.renderBeforeActions=function(){var e=n.props.config.settings.renderBeforeActions;return null==e?null:"function"==typeof e?p.default.createElement(e,n.props):e},n.renderAfterActions=function(){var e=n.props.config.settings.renderAfterActions;return null==e?null:"function"==typeof e?p.default.createElement(e,n.props):e},n.removeSelf=n.removeSelf.bind((0,s.default)(n)),n.setLock=n.setLock.bind((0,s.default)(n)),n.renderItem=n.renderItem.bind((0,s.default)(n)),n}return(0,l.default)(r,[{key:"isGroupTopPosition",value:function(){return(0,g.default)(this.props.config.settings.groupActionsPosition||"topRight","top")}},{key:"setLock",value:function(e){this.props.setLock(e)}},{key:"removeSelf",value:function(){var e=this,t=this.props.confirmFn,r=this.props.config.settings,n=r.renderConfirm,o=r.removeGroupConfirmOptions,i=function(){e.props.removeSelf()};o&&!this.isEmptyCurrentGroup()?n(T(T({},o),{},{onOk:i,onCancel:null,confirmFn:t})):i()}},{key:"isEmptyCurrentGroup",value:function(){var e=this.props.children1;return!e||0==e.size||1==e.size&&this.isEmpty(e.first())}},{key:"isEmpty",value:function(e){return"group"==e.get("type")||"rule_group"==e.get("type")?this.isEmptyGroup(e):this.isEmptyRule(e)}},{key:"isEmptyGroup",value:function(e){var t=e.get("children1");return!t||0==t.size||1==t.size&&this.isEmpty(t.first())}},{key:"isEmptyRule",value:function(e){var t=e.get("properties");return!(null!==t.get("field")&&null!==t.get("operator")&&t.get("value").filter((function(e){return void 0!==e})).size>0)}},{key:"render",value:function(){return p.default.createElement(p.default.Fragment,null,this.renderHeaderWrapper(),this.renderChildrenWrapper(),this.renderFooterWrapper())}},{key:"showNot",value:function(){return this.props.config.settings.showNot}},{key:"showConjs",value:function(){var e=this.props,t=e.conjunctionOptions;e.children1,e.config;return Object.keys(t).length>1||this.showNot()}},{key:"isOneChild",value:function(){var e=this.props.children1;return!e||e.size<2}},{key:"renderChildrenWrapper",value:function(){return this.props.children1&&p.default.createElement("div",{key:"group-children",className:R("group--children",this.showConjs()?"":"hide--conjs",this.isOneChild()?"hide--line":"",this.isOneChild()?"one--child":"",this.childrenClassName())},this.renderChildren())}},{key:"renderHeaderWrapper",value:function(){var e=this.isGroupTopPosition();return p.default.createElement("div",{key:"group-header",className:R("group--header",this.isOneChild()?"one--child":"")},this.renderHeader(),e&&this.renderBeforeActions(),e&&this.renderActions(),e&&this.renderAfterActions())}},{key:"renderFooterWrapper",value:function(){return!this.isGroupTopPosition()&&p.default.createElement("div",{key:"group-footer",className:"group--footer"},this.renderBeforeActions(),this.renderActions(),this.renderAfterActions())}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.isLocked,i=e.isTrueLocked,a=e.id;return p.default.createElement(O.GroupActions,{config:t,addRule:r,addGroup:n,canAddGroup:this.canAddGroup(),canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}},{key:"canAddGroup",value:function(){return this.props.allowFurtherNesting}},{key:"canAddRule",value:function(){var e=this.props.config.settings.maxNumberOfRules,t=this.props.totalRulesCnt;return!e||t<e}},{key:"canDeleteGroup",value:function(){return!this.props.isRoot}},{key:"renderChildren",value:function(){var e=this.props.children1;return e?e.map(this.renderItem).toList():null}},{key:"renderItem",value:function(e){var t=this.props,r=t.config,n=t.actions,o=t.onDragStart,a=t.isLocked,u="group"==e.get("type")&&null!=e.getIn(["properties","field"])?"rule_group":e.get("type");return p.default.createElement(m.Item,(0,i.default)({},this.extraPropsForItem(e),{key:e.get("id"),id:e.get("id"),groupId:t.id,path:e.get("path"),type:u,properties:e.get("properties"),config:r,actions:n,children1:e.get("children1"),reordableNodesCnt:this.reordableNodesCntForItem(e),totalRulesCnt:this.totalRulesCntForItem(e),parentReordableNodesCnt:this.reordableNodesCnt(),onDragStart:o,isDraggingTempo:this.props.isDraggingTempo,isParentLocked:a}))}},{key:"extraPropsForItem",value:function(e){return{}}},{key:"reordableNodesCnt",value:function(){return this.props.isLocked?0:this.props.reordableNodesCnt}},{key:"totalRulesCntForItem",value:function(e){return this.props.totalRulesCnt}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.reordableNodesCnt()}},{key:"showDragIcon",value:function(){var e=this.props,t=e.config,r=e.isRoot,n=e.isLocked,o=this.reordableNodesCnt();return t.settings.canReorder&&!r&&o>1&&!n}},{key:"renderDrag",value:function(){var e=this.props.handleDraggerMouseDown;return this.showDragIcon()&&p.default.createElement("span",{key:"group-drag-icon",className:"qb-drag-handler group--drag-handler",onMouseDown:e},p.default.createElement(E.DragIcon,null)," ")}},{key:"conjunctionOptions",value:function(){var e=this.props.conjunctionOptions;return e}},{key:"renderConjs",value:function(){var e=this.props,t=e.config,r=e.children1,n=e.id,o=e.selectedConjunction,i=e.setConjunction,a=e.not,u=e.setNot,l=e.isLocked,s=t.settings,c=s.immutableGroupsMode,f=s.renderConjs,d=(s.showNot,s.notLabel),v=this.conjunctionOptions();if(!this.showConjs())return null;if(!r||!r.size)return null;var g={disabled:this.isOneChild(),readonly:c||l,selectedConjunction:o,setConjunction:c?E.dummyFn:i,conjunctionOptions:v,config:t,not:a||!1,id:n,setNot:c?E.dummyFn:u,notLabel:d,showNot:this.showNot(),isLocked:l};return p.default.createElement(f,g)}},{key:"renderHeader",value:function(){return p.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}}]),r}(p.PureComponent);t.BasicGroup=C,C.propTypes={reordableNodesCnt:v.default.number,conjunctionOptions:v.default.object.isRequired,allowFurtherNesting:v.default.bool.isRequired,isRoot:v.default.bool.isRequired,not:v.default.bool,selectedConjunction:v.default.string,config:v.default.object.isRequired,id:v.default.string.isRequired,groupId:v.default.string,path:v.default.any,children1:v.default.any,isDraggingMe:v.default.bool,isDraggingTempo:v.default.bool,isLocked:v.default.bool,isTrueLocked:v.default.bool,handleDraggerMouseDown:v.default.func,onDragStart:v.default.func,addRule:v.default.func.isRequired,addGroup:v.default.func.isRequired,removeSelf:v.default.func.isRequired,setConjunction:v.default.func.isRequired,setNot:v.default.func.isRequired,setLock:v.default.func.isRequired,actions:v.default.object.isRequired};var P=(0,h.default)((0,y.default)("group")((0,E.ConfirmFn)(C)));t.default=P},57822:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.GroupActions=void 0;var i=n(r(72380)),a=n(r(50189)),u=n(r(6633)),l=n(r(91917)),s=n(r(95595)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var p={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},v=function(e){(0,u.default)(r,e);var t=d(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,a.default)(r,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.addGroup,o=e.removeSelf,i=e.setLock,a=e.isLocked,u=e.isTrueLocked,l=e.id,s=e.canAddGroup,f=e.canAddRule,d=e.canDeleteGroup,v=t.settings,g=v.immutableGroupsMode,h=v.addRuleLabel,y=v.addGroupLabel,m=v.delGroupLabel,O=v.groupActionsPosition,E=v.renderButton,b=v.renderSwitch,_=v.renderButtonGroup,T=v.lockLabel,S=v.lockedLabel,R=v.showLock,C=v.canDeleteLocked,P=p[O||"topRight"],N=R&&!(a&&!u)&&c.default.createElement(b,{type:"lock",id:l,value:a,setValue:i,label:T,checkedLabel:S,config:t}),L=!g&&f&&!a&&c.default.createElement(E,{type:"addRule",onClick:r,label:h,readonly:a,config:t}),I=!g&&s&&!a&&c.default.createElement(E,{type:"addGroup",onClick:n,label:y,readonly:a,config:t}),A=!g&&d&&(!a||a&&C)&&c.default.createElement(E,{type:"delGroup",onClick:o,label:m,config:t});return c.default.createElement("div",{className:"group--actions ".concat(P)},c.default.createElement(_,{config:t},N,L,I,A))}}]),r}(c.PureComponent);t.GroupActions=v},44609:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;var i=n(r(81723)),a=n(r(72380)),u=n(r(50189)),l=n(r(6633)),s=n(r(91917)),c=n(r(95595)),f=n(r(21403)),d=n(r(62764)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),v=n(r(59160)),g=n(r(62469)),h=n(r(84400)),y=n(r(90458)),m=n(r(66782)),O=n(r(76229)),E=n(r(64304)),b=["type"];function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var R=function(e){var t=e.properties.toObject(),r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);return e.isParentLocked&&(r.isLocked=!0),t.isLocked&&(r.isTrueLocked=!0),r},C={rule:function(e){return p.default.createElement(g.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,config:e.config,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},group:function(e){return p.default.createElement(h.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group:function(e){return p.default.createElement(y.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},rule_group_ext:function(e){return p.default.createElement(m.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:e.parentField,parentReordableNodesCnt:e.parentReordableNodesCnt}))},switch_group:function(e){return p.default.createElement(O.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))},case_group:function(e){return p.default.createElement(E.default,(0,f.default)({},R(e),{id:e.id,groupId:e.groupId,path:e.path,actions:e.actions,config:e.config,reordableNodesCnt:e.reordableNodesCnt,totalRulesCnt:e.totalRulesCnt,onDragStart:e.onDragStart,isDraggingTempo:e.isDraggingTempo,children1:e.children1,parentField:null,parentReordableNodesCnt:e.parentReordableNodesCnt}))}},P=function(e){(0,l.default)(r,e);var t=T(r);function r(){return(0,a.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,t=e.type,r=(0,i.default)(e,b),n=r.properties.get("mode"),o=C[t+("array"==n?"_ext":"")];return o?o(r):null}}]),r}(p.PureComponent);t.Item=P,P.propTypes={config:v.default.object.isRequired,id:v.default.string.isRequired,groupId:v.default.string,type:v.default.oneOf(["rule","group","rule_group","switch_group","case_group"]).isRequired,path:v.default.any.isRequired,properties:v.default.any.isRequired,children1:v.default.any,actions:v.default.object.isRequired,reordableNodesCnt:v.default.number,onDragStart:v.default.func,parentField:v.default.string,isDraggingTempo:v.default.bool,isParentLocked:v.default.bool}},62469:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a,u,l=n(r(62764)),s=n(r(72380)),c=n(r(50189)),f=n(r(27937)),d=n(r(6633)),p=n(r(91917)),v=n(r(95595)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),h=n(r(59160)),y=n(r(73905)),m=n(r(77754)),O=n(r(79375)),E=n(r(18829)),b=n(r(9923)),_=n(r(69503)),T=r(87242),S=r(75362),R=r(82363),C=r(68678);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,v.default)(e);if(t){var o=(0,v.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var A=r(23019),w=(i=(0,m.default)("rule"),(0,y.default)(a=i(a=(0,C.ConfirmFn)((u=function(e){(0,d.default)(r,e);var t=I(r);function r(e){var n;return(0,s.default)(this,r),n=t.call(this,e),(0,R.useOnPropsChanged)((0,f.default)(n)),n.removeSelf=n.removeSelf.bind((0,f.default)(n)),n.setLock=n.setLock.bind((0,f.default)(n)),n.onPropsChanged(e),n}return(0,c.default)(r,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["selectedField","selectedOperator","config","reordableNodesCnt","isLocked"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.selectedField,r=e.selectedOperator,n=e.config,o=e.reordableNodesCnt,i=e.isLocked,a=(0,S.getFieldPathLabels)(t,n),u=(0,T.getFieldConfig)(n,t),l=u&&"!struct"==u.type,s=t&&r&&!l,c=(0,T.getOperatorConfig)(n,r,t),f=c&&null!=c.options,d=(0,T.getFieldWidgetConfig)(n,t,r)||{},p=d.hideOperator;return{selectedFieldPartsLabels:a,selectedFieldWidgetConfig:d,showDragIcon:n.settings.canReorder&&o>1&&!i,showOperator:t&&!p,showOperatorLabel:t&&p&&d.operatorInlineLabel,showWidget:s,showOperatorOptions:s&&f}}},{key:"setLock",value:function(e){this.props.setLock(e)}},{key:"removeSelf",value:function(){var e=this,t=this.props.confirmFn,r=this.props.config.settings,n=r.renderConfirm,o=r.removeRuleConfirmOptions,i=function(){e.props.removeSelf()};o&&!this.isEmptyCurrentRule()?n(L(L({},o),{},{onOk:i,onCancel:null,confirmFn:t})):i()}},{key:"isEmptyCurrentRule",value:function(){return!(null!==this.props.selectedField&&null!==this.props.selectedOperator&&this.props.value.filter((function(e){return void 0!==e})).size>0)}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=t.settings.immutableFieldsMode;return g.default.createElement(E.default,{key:"field",classname:"rule--field",config:t,selectedField:this.props.selectedField,setField:n?C.dummyFn:this.props.setField,parentField:this.props.parentField,readonly:n||r,id:this.props.id,groupId:this.props.groupId})}},{key:"renderOperator",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=this.meta,o=n.selectedFieldPartsLabels,i=n.selectedFieldWidgetConfig,a=n.showOperator,u=n.showOperatorLabel,l=t.settings.immutableOpsMode;return g.default.createElement(O.default,{key:"operator",config:t,selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,setOperator:l?C.dummyFn:this.props.setOperator,selectedFieldPartsLabels:o,showOperator:a,showOperatorLabel:u,selectedFieldWidgetConfig:i,readonly:l||r,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var e=this.props,t=e.config,r=e.valueError,n=e.isLocked,o=this.meta.showWidget,i=t.settings.immutableValuesMode;if(!o)return null;var a=g.default.createElement(b.default,{key:"values",field:this.props.selectedField,parentField:this.props.parentField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:this.props.valueSrc,asyncListValues:this.props.asyncListValues,valueError:r,config:t,setValue:i?C.dummyFn:this.props.setValue,setValueSrc:i?C.dummyFn:this.props.setValueSrc,readonly:i||n,id:this.props.id,groupId:this.props.groupId});return g.default.createElement(C.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},a)}},{key:"renderOperatorOptions",value:function(){var e=this.props.config,t=this.meta.showOperatorOptions,r=e.settings,n=r.immutableOpsMode,o=r.immutableValuesMode;if(!t)return null;var i=g.default.createElement(_.default,{key:"operatorOptions",selectedField:this.props.selectedField,selectedOperator:this.props.selectedOperator,operatorOptions:this.props.operatorOptions,setOperatorOption:n?C.dummyFn:this.props.setOperatorOption,config:e,readonly:o});return g.default.createElement(C.Col,{key:"op-options-for-"+this.props.selectedOperator,className:"rule--operator-options"},i)}},{key:"renderBeforeWidget",value:function(){var e=this.props.config.settings.renderBeforeWidget;return e&&g.default.createElement(C.Col,{key:"before-widget-for-"+this.props.selectedOperator,className:"rule--before-widget"},"function"==typeof e?e(this.props):e)}},{key:"renderAfterWidget",value:function(){var e=this.props.config.settings.renderAfterWidget;return e&&g.default.createElement(C.Col,{key:"after-widget-for-"+this.props.selectedOperator,className:"rule--after-widget"},"function"==typeof e?e(this.props):e)}},{key:"renderError",value:function(){var e=this.props,t=e.config,r=e.valueError,n=t.settings,o=n.renderRuleError,i=n.showErrorMessage,a=r&&r.toArray().filter((function(e){return!!e})).shift()||null;return i&&a&&g.default.createElement("div",{className:"rule--error"},o?o({error:a}):a)}},{key:"renderDrag",value:function(){return this.meta.showDragIcon&&g.default.createElement("span",{key:"rule-drag-icon",className:"qb-drag-handler rule--drag-handler",onMouseDown:this.props.handleDraggerMouseDown},g.default.createElement(C.DragIcon,null)," ")}},{key:"renderDel",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=t.settings,o=n.deleteLabel,i=n.immutableGroupsMode,a=n.renderButton,u=n.canDeleteLocked;return!i&&(!r||r&&u)&&g.default.createElement(a,{type:"delRule",onClick:this.removeSelf,label:o,config:t})}},{key:"renderLock",value:function(){var e=this.props,t=e.config,r=e.isLocked,n=e.isTrueLocked,o=e.id,i=t.settings,a=i.lockLabel,u=i.lockedLabel,l=i.showLock,s=i.renderSwitch;return l&&!(r&&!n)&&g.default.createElement(s,{type:"lock",id:o,value:r,setValue:this.setLock,label:a,checkedLabel:u,hideLabel:!0,config:t})}},{key:"render",value:function(){var e=this.meta,t=e.showOperatorOptions,r=e.selectedFieldWidgetConfig,n=this.props,o=n.valueSrc,i=n.value,a=n.config,u="value"==o.first()&&!t&&1==i.size&&r.fullWidth,l=a.settings.renderButtonGroup,s=[this.renderField(),this.renderOperator(),this.renderBeforeWidget(),this.renderWidget(),this.renderAfterWidget(),this.renderOperatorOptions()],c=g.default.createElement("div",{key:"rule-body",className:A("rule--body",u&&"can--shrink--value")},s),f=this.renderError(),d=this.renderDrag(),p=this.renderLock(),v=this.renderDel();return g.default.createElement(g.default.Fragment,null,d,g.default.createElement("div",{className:"rule--body--wrapper"},c,f),g.default.createElement("div",{className:"rule--header"},g.default.createElement(l,{config:a},p,v)))}}]),r}(g.PureComponent),u.propTypes={id:h.default.string.isRequired,groupId:h.default.string,selectedField:h.default.string,selectedOperator:h.default.string,operatorOptions:h.default.object,config:h.default.object.isRequired,value:h.default.any,valueSrc:h.default.any,asyncListValues:h.default.array,isDraggingMe:h.default.bool,isDraggingTempo:h.default.bool,parentField:h.default.string,valueError:h.default.any,isLocked:h.default.bool,isTrueLocked:h.default.bool,handleDraggerMouseDown:h.default.func,setField:h.default.func,setOperator:h.default.func,setOperatorOption:h.default.func,setLock:h.default.func,removeSelf:h.default.func,setValue:h.default.func,setValueSrc:h.default.func,reordableNodesCnt:h.default.number},a=u))||a)||a)||a);t.default=w},90458:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,a,u=n(r(62764)),l=n(r(72380)),s=n(r(50189)),c=n(r(27937)),f=n(r(48333)),d=n(r(6633)),p=n(r(91917)),v=n(r(95595)),g=n(r(68404)),h=n(r(59160)),y=n(r(44799)),m=n(r(77754)),O=r(84400),E=r(92547),b=n(r(18829)),_=r(82363),T=r(68678);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,v.default)(e);if(t){var o=(0,v.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var P=(o=(0,m.default)("group rule_group"),(0,y.default)(i=o(i=(0,T.ConfirmFn)((a=function(e){(0,d.default)(r,e);var t=C(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).childrenClassName=function(){return"rule_group--children"},n.renderHeaderWrapper=function(){return null},n.renderFooterWrapper=function(){return null},n.renderConjs=function(){return null},n.canAddGroup=function(){return!1},n.canAddRule=function(){return!0},n.canDeleteGroup=function(){return!1},(0,_.useOnPropsChanged)((0,c.default)(n)),n.onPropsChanged(e),n}return(0,s.default)(r,[{key:"onPropsChanged",value:function(e){}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.props.children1.size}},{key:"renderChildrenWrapper",value:function(){return g.default.createElement(g.default.Fragment,null,this.renderDrag(),this.renderField(),this.renderActions(),(0,f.default)((0,v.default)(r.prototype),"renderChildrenWrapper",this).call(this))}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.setField,o=e.parentField,i=e.id,a=e.groupId,u=e.isLocked,l=t.settings.immutableFieldsMode;return g.default.createElement(b.default,{key:"field",classname:"group--field",config:t,selectedField:r,setField:n,parentField:o,readonly:l||u,id:i,groupId:a})}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.isLocked,o=e.isTrueLocked,i=e.id;return g.default.createElement(E.RuleGroupActions,{config:t,addRule:r,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:n,isTrueLocked:o,id:i})}},{key:"extraPropsForItem",value:function(e){return{parentField:this.props.selectedField}}}]),r}(O.BasicGroup),a.propTypes=R(R({},O.BasicGroup.propTypes),{},{selectedField:h.default.string,parentField:h.default.string,setField:h.default.func}),i=a))||i)||i)||i);t.default=P},92547:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.RuleGroupActions=void 0;var i=n(r(72380)),a=n(r(50189)),u=n(r(6633)),l=n(r(91917)),s=n(r(95595)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var p=function(e){(0,u.default)(r,e);var t=d(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,a.default)(r,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.canAddRule,o=e.canDeleteGroup,i=e.removeSelf,a=e.setLock,u=e.isLocked,l=e.isTrueLocked,s=e.id,f=t.settings,d=f.immutableGroupsMode,p=f.addRuleLabel,v=f.delGroupLabel,g=f.renderButton,h=f.renderSwitch,y=f.renderButtonGroup,m=f.lockLabel,O=f.lockedLabel,E=f.showLock,b=f.canDeleteLocked,_=E&&!(u&&!l)&&c.default.createElement(h,{type:"lock",id:s,value:u,setValue:a,label:m,checkedLabel:O,hideLabel:!0,config:t}),T=!d&&n&&!u&&c.default.createElement(g,{type:"addRuleGroup",onClick:r,label:p,readonly:u,config:t}),S=!d&&o&&(!u||u&&b)&&c.default.createElement(g,{type:"delRuleGroup",onClick:i,label:v,config:t});return c.default.createElement("div",{className:"group--actions"},c.default.createElement(y,{config:t},_,T,S))}}]),r}(c.PureComponent);t.RuleGroupActions=p},66782:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,a,u=n(r(62764)),l=n(r(72380)),s=n(r(50189)),c=n(r(27937)),f=n(r(48333)),d=n(r(6633)),p=n(r(91917)),v=n(r(95595)),g=n(r(68404)),h=n(r(59160)),y=n(r(44799)),m=n(r(77754)),O=r(84400),E=r(99050),b=n(r(18829)),_=n(r(79375)),T=r(82363),S=r(68678),R=r(87242),C=n(r(9923));function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,v.default)(e);if(t){var o=(0,v.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}var w=r(23019),j=(o=(0,m.default)("group rule_group_ext"),(0,y.default)(i=o(i=(0,S.ConfirmFn)((a=function(e){(0,d.default)(r,e);var t=A(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).childrenClassName=function(){return"rule_group_ext--children"},n.renderFooterWrapper=function(){return null},n.canAddGroup=function(){return!1},n.canAddRule=function(){return!0},n.canDeleteGroup=function(){return!0},(0,T.useOnPropsChanged)((0,c.default)(n)),n.onPropsChanged(e),n}return(0,s.default)(r,[{key:"onPropsChanged",value:function(e){}},{key:"renderHeaderWrapper",value:function(){return g.default.createElement("div",{key:"group-header",className:w("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeader(),this.renderGroupField(),this.renderActions())}},{key:"renderHeader",value:function(){return g.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderGroupField",value:function(){return g.default.createElement("div",{className:"group--field--count--rule"},this.renderField(),this.renderOperator(),this.renderWidget())}},{key:"showNot",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=(e.selectedOperator,(0,R.getFieldConfig)(t,r)||{});return null!=n.showNot?n.showNot:t.settings.showNot}},{key:"conjunctionOptions",value:function(){var e=this.props,t=e.config,n=e.selectedField,o=(e.selectedOperator,(0,R.getFieldConfig)(t,n)||{}),i=(0,f.default)((0,v.default)(r.prototype),"conjunctionOptions",this).call(this);if(o.conjunctions){var a,u={},l=L(o.conjunctions);try{for(l.s();!(a=l.n()).done;){var s=a.value;u[s]=i[s]}}catch(e){l.e(e)}finally{l.f()}i=u}return i}},{key:"renderField",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.setField,o=e.parentField,i=e.id,a=e.groupId,u=e.isLocked,l=t.settings.immutableFieldsMode;return g.default.createElement(b.default,{key:"field",classname:"rule--field",config:t,selectedField:r,setField:n,parentField:o,readonly:l||u,id:i,groupId:a})}},{key:"renderOperator",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.setField,i=e.setOperator,a=e.isLocked,u=t.settings.immutableFieldsMode,l=(0,R.getFieldWidgetConfig)(t,r,n)||{},s=l.hideOperator,c=r&&s&&l.operatorInlineLabel,f=r&&!s;return g.default.createElement(_.default,{key:"operator",classname:"group--operator",config:t,selectedField:r,selectedOperator:n,setField:o,setOperator:i,selectedFieldPartsLabels:["group"],showOperator:f,showOperatorLabel:c,selectedFieldWidgetConfig:l,readonly:u||a,id:this.props.id,groupId:this.props.groupId})}},{key:"renderWidget",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.isLocked,i=t.settings.immutableValuesMode;if(!(r&&n))return null;var a=g.default.createElement(C.default,{key:"values",isForRuleGruop:!0,field:this.props.selectedField,operator:this.props.selectedOperator,value:this.props.value,valueSrc:"value",valueError:null,config:t,setValue:i?S.dummyFn:this.props.setValue,setValueSrc:S.dummyFn,readonly:i||o,id:this.props.id,groupId:this.props.groupId});return g.default.createElement(S.Col,{key:"widget-for-"+this.props.selectedOperator,className:"rule--value"},a)}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.isLocked,o=e.isTrueLocked,i=e.id;return g.default.createElement(E.RuleGroupExtActions,{config:t,addRule:r,canAddRule:this.canAddRule(),canDeleteGroup:this.canDeleteGroup(),removeSelf:this.removeSelf,setLock:this.setLock,isLocked:n,isTrueLocked:o,id:i})}},{key:"reordableNodesCntForItem",value:function(e){return this.props.isLocked?0:this.props.children1.size}},{key:"extraPropsForItem",value:function(e){return{parentField:this.props.selectedField}}}]),r}(O.BasicGroup),a.propTypes=N(N({},O.BasicGroup.propTypes),{},{selectedField:h.default.string,selectedOperator:h.default.string,value:h.default.any,parentField:h.default.string,setField:h.default.func,setOperator:h.default.func,setValue:h.default.func}),i=a))||i)||i)||i);t.default=j},99050:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.RuleGroupExtActions=void 0;var i=n(r(72380)),a=n(r(50189)),u=n(r(6633)),l=n(r(91917)),s=n(r(95595)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var p=function(e){(0,u.default)(r,e);var t=d(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,a.default)(r,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addRule,n=e.canAddRule,o=e.canDeleteGroup,i=e.removeSelf,a=e.setLock,u=e.isLocked,l=e.isTrueLocked,s=e.id,f=t.settings,d=f.immutableGroupsMode,p=f.addSubRuleLabel,v=f.delGroupLabel,g=f.renderButton,h=f.renderSwitch,y=f.renderButtonGroup,m=f.lockLabel,O=f.lockedLabel,E=f.showLock,b=f.canDeleteLocked,_=E&&!(u&&!l)&&c.default.createElement(h,{type:"lock",id:s,value:u,setValue:a,label:m,checkedLabel:O,config:t}),T=!d&&n&&!u&&c.default.createElement(g,{type:"addRuleGroupExt",onClick:r,label:p,readonly:u,config:t}),S=!d&&o&&(!u||u&&b)&&c.default.createElement(g,{type:"delRuleGroup",onClick:i,label:v,config:t});return c.default.createElement("div",{className:"group--actions group--actions--tr"},c.default.createElement(y,{config:t},_,T,S))}}]),r}(c.PureComponent);t.RuleGroupExtActions=p},76229:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,a,u=n(r(62764)),l=n(r(72380)),s=n(r(50189)),c=n(r(27937)),f=n(r(6633)),d=n(r(91917)),p=n(r(95595)),v=n(r(68404)),g=(n(r(59160)),n(r(44799))),h=n(r(77754)),y=r(84400),m=r(58283),O=r(82363),E=r(68678),b=r(92969);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}var S=r(23019),R=(o=(0,h.default)("group switch_group"),(0,g.default)(i=o(i=(0,E.ConfirmFn)((a=function(e){(0,f.default)(r,e);var t=T(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).childrenClassName=function(){return"switch_group--children"},n.renderFooterWrapper=function(){return null},n.hasDefaultCase=function(){return n.props.children1.size&&n.props.children1.filter((function(e){return null==e.get("children1")})).size>0},(0,O.useOnPropsChanged)((0,c.default)(n)),n.onPropsChanged(e),n}return(0,s.default)(r,[{key:"onPropsChanged",value:function(e){}},{key:"canAddGroup",value:function(){var e=this.props.config.settings.maxNumberOfCases,t=this.props.children1.size;return!e||t<e}},{key:"canAddRule",value:function(){return!1}},{key:"reordableNodesCnt",value:function(){var e=this.props.children1.size;return this.hasDefaultCase()&&e--,e}},{key:"totalRulesCntForItem",value:function(e){return(0,b.getTotalRulesCountInTree)(e)}},{key:"reordableNodesCntForItem",value:function(e){if(this.props.isLocked)return 0;var t=this.props.config.settings,r=t.canLeaveEmptyCase,n=t.canRegroupCases,o=this.props.children1.size;this.hasDefaultCase()&&o--;var i=(0,b.getTotalReordableNodesCountInTree)(e);return 1==i&&n&&r&&o>1&&(i=111),i}},{key:"renderHeaderWrapper",value:function(){return v.default.createElement("div",{key:"group-header",className:S("group--header",this.isOneChild()?"one--child":"",this.showDragIcon()?"with--drag":"hide--drag",!this.showConjs()||this.isOneChild()&&!this.showNot()?"hide--conjs":"with--conjs")},this.renderHeader(),this.renderActions())}},{key:"renderHeader",value:function(){return v.default.createElement("div",{className:"group--conjunctions"},this.renderConjs(),this.renderDrag())}},{key:"renderConjs",value:function(){var e=this.props.config.settings.renderSwitchPrefix;return e?e():null}},{key:"showNot",value:function(){return!1}},{key:"renderActions",value:function(){var e=this.props,t=e.config,r=e.addCaseGroup,n=e.addDefaultCaseGroup,o=e.isLocked,i=e.isTrueLocked,a=e.id;return v.default.createElement(m.SwitchGroupActions,{config:t,addCaseGroup:r,addDefaultCaseGroup:n,canAddDefault:!this.hasDefaultCase(),canAddGroup:this.canAddGroup(),setLock:this.setLock,isLocked:o,isTrueLocked:i,id:a})}}]),r}(y.BasicGroup),a.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},y.BasicGroup.propTypes),i=a))||i)||i)||i);t.default=R},58283:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchGroupActions=void 0;var i=n(r(72380)),a=n(r(50189)),u=n(r(6633)),l=n(r(91917)),s=n(r(95595)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var p={topLeft:"group--actions--tl",topCenter:"group--actions--tc",topRight:"group--actions--tr",bottomLeft:"group--actions--bl",bottomCenter:"group--actions--bc",bottomRight:"group--actions--br"},v=function(e){(0,u.default)(r,e);var t=d(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,a.default)(r,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.addCaseGroup,n=e.addDefaultCaseGroup,o=e.setLock,i=e.isLocked,a=e.isTrueLocked,u=e.id,l=e.canAddGroup,s=e.canAddDefault,f=t.settings,d=f.immutableGroupsMode,v=f.addCaseLabel,g=f.addDefaultCaseLabel,h=f.groupActionsPosition,y=f.renderButton,m=f.renderSwitch,O=f.renderButtonGroup,E=f.lockLabel,b=f.lockedLabel,_=f.showLock,T=p[h||"topRight"],S=_&&!(i&&!a)&&c.default.createElement(m,{type:"lock",id:u,value:i,setValue:o,label:E,checkedLabel:b,config:t}),R=!d&&l&&!i&&c.default.createElement(y,{type:"addCaseGroup",onClick:r,label:v,readonly:i,config:t}),C=!d&&s&&!i&&c.default.createElement(y,{type:"addDefaultCaseGroup",onClick:n,label:g,readonly:i,config:t});return c.default.createElement("div",{className:"group--actions ".concat(T)},c.default.createElement(O,{config:t},S,R,C))}}]),r}(c.PureComponent);t.SwitchGroupActions=v},70327:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(21403)),a=n(r(72380)),u=n(r(50189)),l=n(r(6633)),s=n(r(91917)),c=n(r(95595)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),d=n(r(59160)),p=n(r(31536));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var h=function(e){(0,l.default)(r,e);var t=g(r);function r(){var e;(0,a.default)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleChange=function(t){e.props.setOption("proximity",parseInt(t))},e}return(0,u.default)(r,[{key:"render",value:function(){var e=this.props,t=e.defaults,r=e.options,n=e.config,o=e.optionLabel,a=e.optionPlaceholder,u=e.customProps,l=e.minProximity,s=e.maxProximity,c=e.optionTextBefore,d=e.readonly,v=n.settings,g=n.widgets,h=t?t.proximity:void 0,y=v.showLabels,m=r.get("proximity",h),O=(0,p.default)(l,s+1).map((function(e){return{title:e,value:e}})),E=g.select.factory;return f.default.createElement("div",{className:"operator--PROXIMITY"},f.default.createElement("div",{className:"operator--options"},y&&f.default.createElement("label",{className:"rule--label"},o),!y&&c&&f.default.createElement("div",{className:"operator--options--sep"},f.default.createElement("span",null,c)),f.default.createElement(E,(0,i.default)({config:n,value:m,listValues:O,setValue:this.handleChange,readonly:d,placeholder:a},u))),f.default.createElement("div",{className:"operator--widgets"},this.props.children))}}]),r}(f.PureComponent);t.default=h,h.propTypes={config:d.default.object.isRequired,setOption:d.default.func.isRequired,options:d.default.any.isRequired,minProximity:d.default.number,maxProximity:d.default.number,optionPlaceholder:d.default.string,optionTextBefore:d.default.string,optionLabel:d.default.string,customProps:d.default.object,readonly:d.default.bool},h.defaultProps={customProps:{},minProximity:2,maxProximity:10,optionPlaceholder:"Select words between",optionLabel:"Words between",optionTextBefore:null}},68549:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ProximityOperator",{enumerable:!0,get:function(){return o.default}});var o=n(r(70327))},47912:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(62764)),a=n(r(72380)),u=n(r(50189)),l=n(r(27937)),s=n(r(6633)),c=n(r(91917)),f=n(r(95595)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),p=n(r(59160)),v=r(87242),g=r(75362),h=r(10173),y=r(82363),m=n(r(4161)),O=n(r(65555));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var T=function(e){(0,s.default)(r,e);var t=_(r);function r(e){var n;return(0,a.default)(this,r),n=t.call(this,e),(0,y.useOnPropsChanged)((0,l.default)(n)),n.onPropsChanged(e),n}return(0,u.default)(r,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["selectedField","config","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.selectedField,r=e.config,n=e.parentField,o=t,i=r.settings,a=i.maxLabelsLength,u=i.fieldSeparatorDisplay,l=i.fieldPlaceholder,s=i.fieldSeparator,c=!!t,f=c?null:(0,h.truncateString)(l,a),d=c?(0,v.getFieldConfig)(r,o):null,p=d||{},y=(0,g.getFieldPath)(o,r),m=(0,g.getFieldPath)(o,r,!0),O=this.getFieldLabel(d,o,r),E=(0,g.getFieldPathLabels)(o,r),b=E?E.join(u):null;(b==O||n)&&(b=null);var _=p.label2,T="string"==typeof n?n.split(s):n,S=n?(0,v.getFieldConfig)(r,n):null,R=n?S&&S.subfields:r.fields;return{placeholder:f,items:this.buildOptions(T,r,R,T),parentField:n,selectedKey:o,selectedKeys:y,selectedPath:m,selectedLabel:O,selectedOpts:p,selectedAltLabel:_,selectedFullLabel:b}}},{key:"getFieldLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.fieldSeparator,o=r.settings.maxLabelsLength,i=Array.isArray(t)?t:t.split(n),a=e&&e.label||(0,m.default)(i);return a=(0,h.truncateString)(a,o)}},{key:"buildOptions",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!r)return null;var a=t.settings,u=a.fieldSeparator,l=a.fieldSeparatorDisplay,s=o?o.join(u)+u:"";return(0,O.default)(r).map((function(a){var u=r[a],c=n.getFieldLabel(u,a,t),f=(0,g.getFieldPathLabels)(s+a,t).join(l);(f==c||e)&&(f=null);var d=u.label2,p=u.tooltip,v=(o||[]).concat(a),h=u.disabled;if(!u.hideForSelect)return"!struct"==u.type?{disabled:h,key:a,path:s+a,label:c,fullLabel:f,altLabel:d,tooltip:p,items:n.buildOptions(e,t,u.subfields,v,c)}:{disabled:h,key:a,path:s+a,label:c,fullLabel:f,altLabel:d,tooltip:p,grouplabel:i}})).filter((function(e){return!!e}))}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setField,o=e.readonly,a=e.id,u=e.groupId,l=t.settings.renderField,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:a,groupId:u,config:t,customProps:r,readonly:o,setField:n},this.meta);return l(s)}}]),r}(d.PureComponent);t.default=T,T.propTypes={id:p.default.string,groupId:p.default.string,config:p.default.object.isRequired,selectedField:p.default.string,parentField:p.default.string,customProps:p.default.object,readonly:p.default.bool,setField:p.default.func.isRequired}},18829:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(72380)),a=n(r(50189)),u=n(r(6633)),l=n(r(91917)),s=n(r(95595)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),f=n(r(47912)),d=r(68678);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var g=function(e){(0,u.default)(r,e);var t=v(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,a.default)(r,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.setField,o=e.parentField,i=e.classname,a=e.readonly,u=e.id,l=e.groupId;return c.default.createElement(d.Col,{className:i},t.settings.showLabels&&c.default.createElement("label",{className:"rule--label"},t.settings.fieldLabel),c.default.createElement(f.default,{config:t,selectedField:r,parentField:o,setField:n,customProps:t.settings.customFieldSelectProps,readonly:a,id:u,groupId:l}))}}]),r}(c.PureComponent);t.default=g},34270:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(62764)),a=n(r(72380)),u=n(r(50189)),l=n(r(27937)),s=n(r(6633)),c=n(r(91917)),f=n(r(95595)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),p=n(r(59160)),v=r(87242),g=r(75362),h=r(10173),y=r(82363),m=n(r(4161)),O=n(r(65555)),E=n(r(29521));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var S=function(e){(0,s.default)(r,e);var t=T(r);function r(e){var n;return(0,a.default)(this,r),n=t.call(this,e),(0,y.useOnPropsChanged)((0,l.default)(n)),n.onPropsChanged(e),n}return(0,u.default)(r,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.items||["config","field","operator"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0;(!this.meta||["config","field","value"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e)),r&&(this.items=this.getItems(e))}},{key:"getItems",value:function(e){var t=e.config,r=e.field,n=e.operator,o=e.parentFuncs,i=t.settings.canUseFuncForField,a=this.filterFuncs(t,t.funcs,r,n,i,o);return this.buildOptions(t,a)}},{key:"getMeta",value:function(e){var t=e.config,r=e.field,n=e.value,o=t.settings,i=o.funcPlaceholder,a=o.fieldSeparatorDisplay,u=n,l=!!n,s=(0,v.getFieldConfig)(t,r).widgets.field,c=(s&&s.widgetProps,l?null:i),f=l?(0,v.getFuncConfig)(t,u):null,d=f||{},p=(0,g.getFieldPath)(u,t),h=(0,g.getFieldPath)(u,t,!0),y=this.getFuncLabel(f,u,t),m=(0,g.getFuncPathLabels)(u,t),O=m?m.join(a):null;return O==y&&(O=null),{placeholder:c,selectedKey:u,selectedKeys:p,selectedPath:h,selectedLabel:y,selectedOpts:d,selectedFullLabel:O}}},{key:"filterFuncs",value:function(e,t,r,n,o,i){t=(0,E.default)(t);var a,u=e.settings.fieldSeparator,l=(0,v.getFieldConfig)(e,r),s=(0,g.getWidgetForFieldOp)(e,r,n,"value");if(s){var c=e.widgets[s].type;a=c}else a=l.type;return function t(s,c){for(var f in s){var d=s[f].subfields,p=(c||[]).concat(f),g=p.join(u),h=(0,v.getFuncConfig)(e,g);if("!struct"==h.type)0==t(d,p)&&delete s[f];else{var y=h.returnType==a;l.funcs&&(y=y&&l.funcs.includes(g)),o&&(y=y&&o(r,l,g,h,n)),i&&i.includes(g)&&(y=!1),y||delete s[f]}}return(0,O.default)(s).length}(t,[]),t}},{key:"buildOptions",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!t)return null;var i=e.settings,a=i.fieldSeparator,u=i.fieldSeparatorDisplay,l=n?n.join(a)+a:"";return(0,O.default)(t).map((function(i){var a=t[i],s=r.getFuncLabel(a,i,e),c=(0,g.getFuncPathLabels)(i,e).join(u);c==s&&(c=null);var f=a.tooltip,d=(n||[]).concat(i);return"!struct"==a.type?{key:i,path:l+i,label:s,fullLabel:c,tooltip:f,items:r.buildOptions(e,a.subfields,d,s)}:{key:i,path:l+i,label:s,fullLabel:c,tooltip:f,grouplabel:o}}))}},{key:"getFuncLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.fieldSeparator,o=r.settings.maxLabelsLength,i=Array.isArray(t)?t:t.split(n),a=e.label||(0,m.default)(i);return a=(0,h.truncateString)(a,o)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setValue,o=e.readonly,a=e.id,u=e.groupId,l=t.settings.renderFunc,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({config:t,customProps:r,readonly:o,setField:n,items:this.items,id:a,groupId:u},this.meta);return l(s)}}]),r}(d.PureComponent);t.default=S,S.propTypes={id:p.default.string,groupId:p.default.string,config:p.default.object.isRequired,field:p.default.string.isRequired,operator:p.default.string,customProps:p.default.object,value:p.default.string,setValue:p.default.func.isRequired,readonly:p.default.bool,parentFuncs:p.default.array}},35147:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(21403)),a=n(r(66604)),u=n(r(72380)),l=n(r(50189)),s=n(r(27937)),c=n(r(6633)),f=n(r(91917)),d=n(r(95595)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),v=n(r(59160)),g=n(r(34270)),h=r(87242),y=n(r(9923)),m=r(68678),O=r(84145),E=r(82363);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}var T=function(e){(0,c.default)(r,e);var t=_(r);function r(e){var n;return(0,u.default)(this,r),(n=t.call(this,e)).setFunc=function(e){n.props.setValue((0,O.setFunc)(n.props.value,e,n.props.config))},n.setArgValue=function(e,t){var r=n.props.config,o=n.meta.funcDefinition.args[e];n.props.setValue((0,O.setArgValue)(n.props.value,e,t,o,r))},n.setArgValueSrc=function(e,t){var r=n.props.config,o=n.meta.funcDefinition.args[e];n.props.setValue((0,O.setArgValueSrc)(n.props.value,e,t,o,r))},n.renderFuncSelect=function(){var e=n.props,t=e.config,r=e.field,o=e.operator,i=e.customProps,a=e.value,u=e.readonly,l=e.parentFuncs,s=e.id,c=e.groupId,f={value:a?a.get("func"):null,setValue:n.setFunc,config:t,field:r,operator:o,customProps:i,readonly:u,parentFuncs:l,id:s,groupId:c},d=t.settings,v=d.showLabels,h=d.funcLabel,y=v?p.default.createElement("label",{className:"rule--label"},h):null;return p.default.createElement(m.Col,{key:"func",className:"rule--func"},y,p.default.createElement(g.default,f))},n.renderArgLabel=function(e,t){var r=t.valueSources,o=t.type,i=t.showPrefix,a=t.label,u=n.props.config,l=r&&1==r.length&&"const"==r[0];return!u.settings.showLabels&&("boolean"==o||l)&&i?p.default.createElement(m.Col,{className:"rule--func--arg-label"},a||e):null},n.renderArgLabelSep=function(e,t){var r=t.valueSources,o=t.type,i=t.showPrefix,a=n.props.config,u=r&&1==r.length&&"const"==r[0];return!a.settings.showLabels&&("boolean"==o||u)&&i?p.default.createElement(m.Col,{className:"rule--func--arg-label-sep"},":"):null},n.renderArgVal=function(e,t,r){var o=n.props,i=o.config,a=o.field,u=(o.operator,o.value),l=o.readonly,s=o.parentFuncs,c=o.id,f=o.groupId,d=u?u.getIn(["args",t]):null,v=d?d.get("value"):void 0,g=1==r.valueSources.length?r.valueSources[0]:void 0,h={config:i,fieldFunc:e,fieldArg:t,leftField:a,operator:null,value:v,valueSrc:d?d.get("valueSrc")||g||"value":g,setValue:n.setArgValue,setValueSrc:n.setArgValueSrc,funcKey:e,argKey:t,argDefinition:r,readonly:l,parentFuncs:s,id:c,groupId:f};return p.default.createElement(m.Col,{className:"rule--func--arg-value"},p.default.createElement(S,h))},n.renderArgSep=function(e,t,r,n){var o=n.renderSeps;return r?p.default.createElement(m.Col,{className:"rule--func--arg-sep"},o?o[r-1]:", "):null},n.renderBracketBefore=function(e){var t=e.renderBrackets;return p.default.createElement(m.Col,{key:"before_args",className:"rule--func--bracket-before"},t?t[0]:"(")},n.renderBracketAfter=function(e){var t=e.renderBrackets;return p.default.createElement(m.Col,{key:"after_args",className:"rule--func--bracket-after"},t?t[1]:")")},n.renderFuncArgs=function(){var e=n.meta,t=e.funcDefinition,r=e.funcKey;if(!r)return null;var o=t.args;return o?p.default.createElement(p.default.Fragment,null,n.renderBracketBefore(t),p.default.createElement(m.Col,{key:"args",className:"rule--func--args"},Object.keys(o).map((function(e,i){return p.default.createElement(m.Col,{key:"arg-".concat(e,"-").concat(i),className:"rule--func--arg"},n.renderArgSep(e,o[e],i,t),n.renderArgLabel(e,o[e]),n.renderArgLabelSep(e,o[e]),n.renderArgVal(r,e,o[e]))}))),n.renderBracketAfter(t)):null},(0,E.useOnPropsChanged)((0,s.default)(n)),n.onPropsChanged(e),n}return(0,l.default)(r,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","field","operator","value"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.config,r=(e.field,e.operator,e.value),n=r?r.get("func"):null;return{funcDefinition:n?(0,h.getFuncConfig)(t,n):null,funcKey:n}}},{key:"render",value:function(){return p.default.createElement(m.Col,{className:"rule--func--wrapper"},this.renderFuncSelect(),this.renderFuncArgs())}}]),r}(p.PureComponent);t.default=T,T.propTypes={id:v.default.string,groupId:v.default.string,config:v.default.object.isRequired,field:v.default.string.isRequired,operator:v.default.string,customProps:v.default.object,value:v.default.object,setValue:v.default.func.isRequired,readonly:v.default.bool,parentFuncs:v.default.array};var S=function(e){(0,c.default)(r,e);var t=_(r);function r(){var e;(0,u.default)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).setValue=function(t,r,n){var o=e.props;(0,o.setValue)(o.argKey,r)},e.setValueSrc=function(t,r,n){var o=e.props;(0,o.setValueSrc)(o.argKey,r)},e}return(0,l.default)(r,[{key:"render",value:function(){var e=this.props,t=e.funcKey,r=e.parentFuncs;return p.default.createElement(y.default,(0,i.default)({},this.props,{setValue:this.setValue,setValueSrc:this.setValueSrc,isFuncArg:!0,parentFuncs:[].concat((0,a.default)(r||[]),[t])}))}}]),r}(p.PureComponent);S.propTypes={funcKey:v.default.string.isRequired,argKey:v.default.string.isRequired,setValue:v.default.func.isRequired,setValueSrc:v.default.func.isRequired,readonly:v.default.bool,parentFuncs:v.default.array,id:v.default.string,groupId:v.default.string}},77138:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(62764)),a=n(r(72380)),u=n(r(50189)),l=n(r(27937)),s=n(r(6633)),c=n(r(91917)),f=n(r(95595)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),p=n(r(59160)),v=r(87242),g=n(r(65555)),h=n(r(76175)),y=n(r(74937)),m=r(82363);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var _=function(e){(0,s.default)(r,e);var t=b(r);function r(e){var n;return(0,a.default)(this,r),n=t.call(this,e),(0,m.useOnPropsChanged)((0,l.default)(n)),n.onPropsChanged(e),n}return(0,u.default)(r,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","selectedField","selectedOperator"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=e.config,r=e.selectedField,n=e.selectedOperator,o=(0,v.getFieldConfig)(t,r),i=null==o?void 0:o.operators,a=(0,y.default)((0,h.default)(t.operators,(function(e,t){return-1!==(null==i?void 0:i.indexOf(t))})),(function(e,n){return(0,v.getOperatorConfig)(t,n,r)})),u=this.buildOptions(t,a,i),l=!!n,s=(l?a[n]:null)||{},c=l?[n]:null;return{placeholder:this.props.config.settings.operatorPlaceholder,items:u,selectedKey:n,selectedKeys:c,selectedPath:c,selectedLabel:s.label,selectedOpts:s,fieldConfig:o}}},{key:"buildOptions",value:function(e,t,r){return t&&r?(0,g.default)(t).sort((function(e,t){return r.indexOf(e)-r.indexOf(t)})).map((function(e){return{key:e,path:e,label:t[e].label}})):null}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setOperator,o=e.readonly,a=e.id,u=e.groupId,l=t.settings.renderOperator,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:a,groupId:u,config:t,customProps:r,readonly:o,setField:n},this.meta);return s.items?l(s):null}}]),r}(d.PureComponent);t.default=_,_.propTypes={id:p.default.string,groupId:p.default.string,config:p.default.object.isRequired,selectedField:p.default.string,selectedOperator:p.default.string,readonly:p.default.bool,setOperator:p.default.func.isRequired}},69503:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(81723)),a=n(r(72380)),u=n(r(50189)),l=n(r(6633)),s=n(r(91917)),c=n(r(95595)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),d=n(r(59160)),p=r(87242),v=["factory"];function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}var y=function(e){(0,l.default)(r,e);var t=h(r);function r(){return(0,a.default)(this,r),t.apply(this,arguments)}return(0,u.default)(r,[{key:"render",value:function(){if(!this.props.selectedOperator)return null;var e=(0,p.getOperatorConfig)(this.props.config,this.props.selectedOperator,this.props.selectedField);if(void 0===e.options)return null;var t=e.options,r=t.factory,n=(0,i.default)(t,v),o=r(Object.assign({},n,{config:this.props.config,field:this.props.selectedField,operator:this.props.selectedOperator,options:this.props.operatorOptions,setOption:this.props.setOperatorOption,readonly:this.props.readonly})),a=this.props.selectedOperator;return f.default.createElement("div",{className:"rule--operator rule--operator--".concat(a.toUpperCase())},o)}}]),r}(f.PureComponent);t.default=y,y.propTypes={config:d.default.object.isRequired,operatorOptions:d.default.any.isRequired,selectedField:d.default.string.isRequired,selectedOperator:d.default.string.isRequired,readonly:d.default.bool,setOperatorOption:d.default.func.isRequired}},79375:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(72380)),a=n(r(50189)),u=n(r(6633)),l=n(r(91917)),s=n(r(95595)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),f=n(r(77138)),d=r(68678);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var o=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,l.default)(this,r)}}var g=function(e){(0,u.default)(r,e);var t=v(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,a.default)(r,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.selectedField,n=e.selectedOperator,o=e.setOperator,i=e.selectedFieldPartsLabels,a=e.showOperator,u=e.showOperatorLabel,l=e.selectedFieldWidgetConfig,s=e.readonly,p=e.id,v=e.groupId;return[a&&c.default.createElement(d.Col,{key:"operators-for-"+(i||[]).join("_"),className:"rule--operator"},t.settings.showLabels&&c.default.createElement("label",{className:"rule--label"},t.settings.operatorLabel),c.default.createElement(f.default,{key:"operator",config:t,selectedField:r,selectedOperator:n,setOperator:o,readonly:s,id:p,groupId:v})),u&&c.default.createElement(d.Col,{key:"operators-for-"+(i||[]).join("_"),className:"rule--operator"},c.default.createElement("div",{className:"rule--operator"},t.settings.showLabels?c.default.createElement("label",{className:"rule--label"},""):null,c.default.createElement("span",null,l.operatorInlineLabel)))]}}]),r}(c.PureComponent);t.default=g},70298:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(62764)),a=n(r(72380)),u=n(r(50189)),l=n(r(27937)),s=n(r(6633)),c=n(r(91917)),f=n(r(95595)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),p=n(r(59160)),v=r(87242),g=r(75362),h=r(10173),y=r(82363),m=n(r(4161)),O=n(r(65555)),E=n(r(29521));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var S=function(e){(0,s.default)(r,e);var t=T(r);function r(e){var n;return(0,a.default)(this,r),n=t.call(this,e),(0,y.useOnPropsChanged)((0,l.default)(n)),n.onPropsChanged(e),n}return(0,u.default)(r,[{key:"onPropsChanged",value:function(e){var t=this.props,r=!this.items||["config","field","operator","isFuncArg","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0,n=!this.meta||["config","field","operator","value","placeholder","isFuncArg","parentField"].map((function(r){return e[r]!==t[r]})).filter((function(e){return e})).length>0;r&&(this.items=this.getItems(e)),n&&(this.meta=this.getMeta(e))}},{key:"getItems",value:function(e){var t=e.config,r=e.field,n=e.operator,o=e.parentField,i=e.isFuncArg,a=e.fieldDefinition,u=t.settings.canCompareFieldWithField,l=t.settings.fieldSeparator,s="string"==typeof o?o.split(l):o,c=o?(0,v.getFieldConfig)(t,o):null,f=o?c&&c.subfields:t.fields,d=this.filterFields(t,f,r,o,s,n,u,i,a);return this.buildOptions(s,t,d,s)}},{key:"getMeta",value:function(e){var t=e.config,r=e.field,n=(e.operator,e.value),o=e.placeholder,i=e.isFuncArg,a=e.parentField,u=t.settings,l=u.fieldPlaceholder,s=u.fieldSeparatorDisplay,c=n,f=!!n,d=(0,v.getFieldConfig)(t,r).widgets.field,p=d&&d.widgetProps||{},h=f?null:i&&o||p.valuePlaceholder||l,y=f?(0,v.getFieldConfig)(t,c):null,m=y||{},O=(0,g.getFieldPath)(c,t),E=(0,g.getFieldPath)(c,t,!0),b=this.getFieldLabel(y,c,t),_=(0,g.getFieldPathLabels)(c,t),T=_?_.join(s):null;return(T==b||a)&&(T=null),{placeholder:h,selectedKey:c,selectedKeys:O,selectedPath:E,selectedLabel:b,selectedOpts:m,selectedAltLabel:m.label2,selectedFullLabel:T}}},{key:"filterFields",value:function(e,t,r,n,o,i,a,u,l){t=(0,E.default)(t);var s,c=e.settings.fieldSeparator,f=(0,v.getFieldConfig)(e,r),d=(0,g.getWidgetForFieldOp)(e,r,i,"value");if(u&&l)s=l.type;else if(d){var p=e.widgets[d].type;s=p}else s=f.type;return function t(n,o){for(var l in n){var d=n[l].subfields,p=(o||[]).concat(l),g=p.join(c),h=(0,v.getFieldConfig)(e,g);if(h)if("!struct"==h.type||"!group"==h.type)0==t(d,p)&&delete n[l];else{var y=h.type==s&&(!!u||g!=r),m=a||e.settings.canCompareFieldWithField;m&&(y=y&&m(r,f,g,h,i)),y||delete n[l]}else delete n[l]}return(0,O.default)(n).length}(t,o||[]),t}},{key:"buildOptions",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!r)return null;var a=t.settings,u=a.fieldSeparator,l=a.fieldSeparatorDisplay,s=o?o.join(u)+u:"";return(0,O.default)(r).map((function(a){var u=r[a],c=n.getFieldLabel(u,a,t),f=(0,g.getFieldPathLabels)(a,t).join(l);(f==c||e)&&(f=null);var d=u.label2,p=u.tooltip,v=(o||[]).concat(a);if(!u.hideForCompare)return"!struct"==u.type||"!group"==u.type?{key:a,path:s+a,label:c,fullLabel:f,altLabel:d,tooltip:p,items:n.buildOptions(e,t,u.subfields,v,c)}:{key:a,path:s+a,label:c,fullLabel:f,altLabel:d,tooltip:p,grouplabel:i}})).filter((function(e){return!!e}))}},{key:"getFieldLabel",value:function(e,t,r){if(!t)return null;var n=r.settings.fieldSeparator,o=r.settings.maxLabelsLength,i=Array.isArray(t)?t:t.split(n),a=e.label||(0,m.default)(i);return a=(0,h.truncateString)(a,o)}},{key:"render",value:function(){var e=this.props,t=e.config,r=e.customProps,n=e.setValue,o=e.readonly,a=e.id,u=e.groupId,l=t.settings.renderField,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({config:t,customProps:r,setField:n,readonly:o,items:this.items,id:a,groupId:u},this.meta);return l(s)}}]),r}(d.PureComponent);t.default=S,S.propTypes={id:p.default.string,groupId:p.default.string,setValue:p.default.func.isRequired,config:p.default.object.isRequired,field:p.default.string.isRequired,value:p.default.string,operator:p.default.string,customProps:p.default.object,readonly:p.default.bool,parentField:p.default.string}},9923:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(21403)),a=n(r(72380)),u=n(r(50189)),l=n(r(27937)),s=n(r(6633)),c=n(r(91917)),f=n(r(95595)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(68404)),p=n(r(59160)),v=n(r(31536)),g=r(87242),h=r(75362),y=r(10173),m=r(82363),O=n(r(7275)),E=n(r(40745)),b=n(r(30923)),_=r(68678);function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}var R={cardinality:1},C=function(e){(0,s.default)(r,e);var t=S(r);function r(e){var n;return(0,a.default)(this,r),(n=t.call(this,e))._setValue=function(e,t,r,o,i,a){if(e&&Array.isArray(o)){var u=[n.props.value.get(0),n.props.value.get(1)];u[0]!=o[0]&&n.props.setValue(0,o[0],r,i,a),u[1]!=o[1]&&n.props.setValue(1,o[1],r,i,a)}else n.props.setValue(t,o,r,i,a)},n._onChangeValueSrc=function(e,t){n.props.setValueSrc(e,t)},n.renderWidget=function(e,t,r){var n=r.config,o=r.isFuncArg,a=r.leftField,u=r.operator,l=r.value,s=r.valueError,c=r.readonly,f=r.parentField,p=r.parentFuncs,v=r.id,g=r.groupId,h=n.settings,y=t.widgets,m=t.iValues,E=t.aField,_=o?m:l,T=o?a:E,S=y[e],R=S.valueSrc,C=S.valueLabel,P=h.showLabels?d.default.createElement("label",{className:"rule--label"},C.label):null;return d.default.createElement("div",{key:"widget-"+T+"-"+e,className:"widget--widget"},"func"==R?null:P,d.default.createElement(b.default,(0,i.default)({id:v,groupId:g,valueSrc:R,delta:e,value:_,valueError:s,isFuncArg:o},(0,O.default)(t,["isSpecialRange","fieldDefinition","asyncListValues"]),(0,O.default)(y[e],["widget","widgetDefinition","widgetValueLabel","valueLabels","textSeparators","setValueHandler"]),{config:n,field:T,parentField:f,parentFuncs:p,operator:u,readonly:c})))},n.renderValueSources=function(e,t,r){var n=r.config,o=r.isFuncArg,i=r.leftField,a=r.operator,u=r.readonly,l=n.settings,s=t.valueSources,c=t.widgets,f=t.aField,p=o?i:f,v=c[e],g=v.valueSrc,h=v.setValueSrcHandler,y=l.valueSourcesInfo,m=l.renderValueSources,O=s.map((function(e){return[e,{label:y[e].label}]})),E=l.showLabels?d.default.createElement("label",{className:"rule--label"},""):null;return s.length>1&&!u&&d.default.createElement("div",{key:"valuesrc-"+p+"-"+e,className:"widget--valuesrc"},E,d.default.createElement(m,{key:"valuesrc-"+e,delta:e,valueSources:O,valueSrc:g,config:n,field:p,operator:a,setValueSrc:h,readonly:u,title:l.valueSourcesPopupTitle}))},n.renderSep=function(e,t,r){var n=r.config,o=t.widgets,i=n.settings,a=o[e].sepText,u=i.showLabels?d.default.createElement("label",{className:"rule--label"},""):null;return a&&d.default.createElement("div",{key:"widget-separators-"+e,className:"widget--sep"},u,d.default.createElement("span",null,a))},n.renderWidgetDelta=function(e){return[n.renderSep(e,n.meta,n.props),n.renderValueSources(e,n.meta,n.props),n.renderWidget(e,n.meta,n.props)]},(0,m.useOnPropsChanged)((0,l.default)(n)),n.onPropsChanged(e),n}return(0,u.default)(r,[{key:"onPropsChanged",value:function(e){var t=this.props;(!this.meta||["config","field","fieldFunc","fieldArg","leftField","operator","valueSrc","isFuncArg","asyncListValues"].map((function(r){return e[r]!==t[r]||"isFuncArg"==r&&e.isFuncArg&&e.value!==t.value})).filter((function(e){return e})).length>0)&&(this.meta=this.getMeta(e))}},{key:"getMeta",value:function(e){var t=this,r=e.config,n=e.field,o=e.fieldFunc,i=e.fieldArg,a=e.operator,u=e.valueSrc,l=e.value,s=e.isForRuleGruop,c=e.isCaseValue,f=e.isFuncArg,d=e.leftField,p=e.asyncListValues,m=f?{func:o,arg:i}:n,O=u,b=l;(f||s||c)&&(O=E.default.List([u]),b=E.default.List([l]));var _=(0,g.getFieldConfig)(r,m),T=(0,h.getWidgetForFieldOp)(r,m,a),S=((0,h.getWidgetsForFieldOp)(r,m,a),f?R:(0,g.getOperatorConfig)(r,a,m));if((null==_||null==S)&&!c)return null;var C=null==S?void 0:S.isSpecialRange,P=C&&("field"==O.get(0)||"field"==O.get(1)),N=C&&!P,L=N?1:(0,y.defaultValue)(null==S?void 0:S.cardinality,1);if(0===L)return null;var I=(0,h.getValueSourcesForFieldOp)(r,m,a,_,f?d:null),A=(0,v.default)(0,L).map((function(e){var n,o=O.get(e)||null,i=(0,h.getWidgetForFieldOp)(r,m,a,o),u=(0,g.getFieldWidgetConfig)(r,m,a,i,o);P&&(i=u.singleWidget,u=(0,g.getFieldWidgetConfig)(r,m,a,i,o));var l=null===(n=u)||void 0===n?void 0:n.type,s=(0,h.getValueLabel)(r,m,a,e,o,N),c=(0,h.getValueLabel)(r,m,a,e,null,N),f=null!=S&&S.textSeparators?null==S?void 0:S.textSeparators[e]:null,d=t._onChangeValueSrc.bind(t,e),p=null,v=null;return C&&(p={placeholder:[(p=[(0,h.getValueLabel)(r,m,a,0),(0,h.getValueLabel)(r,m,a,1)])[0].placeholder,p[1].placeholder],label:[p[0].label,p[1].label]},v=null==S?void 0:S.textSeparators),{valueSrc:o,valueLabel:s,widget:i,sepText:f,setValueSrcHandler:d,widgetDefinition:u,widgetValueLabel:c,valueLabels:p,textSeparators:v,setValueHandler:t._setValue.bind(t,C,e,l)}}));return{defaultWidget:T,fieldDefinition:_,operatorDefinition:S,isSpecialRange:N,cardinality:L,valueSources:I,widgets:A,iValues:b,aField:m,asyncListValues:p}}},{key:"render",value:function(){if(!this.meta)return null;var e=this.meta,t=e.defaultWidget,r=e.cardinality;if(!t)return null;var n=t;return d.default.createElement(_.Col,{className:"rule--widget rule--widget--".concat(n.toUpperCase()),key:"widget-col-"+n},(0,v.default)(0,r).map(this.renderWidgetDelta))}}]),r}(d.PureComponent);t.default=C,C.propTypes={config:p.default.object.isRequired,value:p.default.any,valueSrc:p.default.any,valueError:p.default.any,field:p.default.string,operator:p.default.string,readonly:p.default.bool,asyncListValues:p.default.array,id:p.default.string,groupId:p.default.string,setValue:p.default.func,setValueSrc:p.default.func,isFuncArg:p.default.bool,fieldFunc:p.default.string,fieldArg:p.default.string,leftField:p.default.string,isForRuleGruop:p.default.bool,parentField:p.default.string,parentFuncs:p.default.array,isCaseValue:p.default.bool}},30923:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(81723)),i=(n(r(68404)),r(10173)),a=["factory"];t.default=function(e){var t=e.delta,r=e.isFuncArg,n=(e.valueSrc,e.value),u=e.valueError,l=e.asyncListValues,s=e.isSpecialRange,c=e.fieldDefinition,f=(e.widget,e.widgetDefinition),d=e.widgetValueLabel,p=e.valueLabels,v=e.textSeparators,g=e.setValueHandler,h=e.config,y=e.field,m=e.operator,O=e.readonly,E=e.parentField,b=e.parentFuncs,_=e.id,T=e.groupId,S=f.factory,R=(0,o.default)(f,a),C=r&&c.valueSources&&1==c.valueSources.length&&"const"==c.valueSources[0],P=c.defaultValue;if(!S)return"?";var N=s?[n.get(0),n.get(1)]:n?n.get(t):void 0,L=u&&(s?[u.get(0),u.get(1)]:u.get(t))||null;s&&void 0===N[0]&&void 0===N[1]&&(N=void 0);var I=(c||{}).fieldSettings,A=Object.assign({},R,I,{config:h,field:y,parentField:E,parentFuncs:b,fieldDefinition:c,operator:m,delta:t,isSpecialRange:s,isFuncArg:r,value:N,valueError:L,label:d.label,placeholder:d.placeholder,placeholders:p?p.placeholder:null,textSeparators:v,setValue:g,readonly:O,asyncListValues:l,id:_,groupId:T});return C&&P?"boolean"==typeof P?P?A.labelYes||"YES":A.labelNo||"NO":I.listValues?Array.isArray(P)?P.map((function(e){return(0,i.getTitleInListValues)(I.listValues,e)||e})).join(", "):(0,i.getTitleInListValues)(I.listValues,P)||P:""+P:S(A)}},68678:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.dummyFn=t.DragIcon=t.ConfirmFn=t.Col=void 0;var o=n(r(21403)),i=n(r(81723)),a=n(r(68404)),u=["children"];t.Col=function(e){var t=e.children,r=(0,i.default)(e,u);return a.default.createElement("div",r,t)};t.dummyFn=function(){};t.DragIcon=function(){return a.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"gray",width:"18px",height:"18px"},a.default.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),a.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}))};t.ConfirmFn=function(e){return function(t){var r=t.config.settings.useConfirm,n=r?r():null;return a.default.createElement(e,(0,o.default)({},t,{confirmFn:n}))}}},27682:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0});var o={ValueFieldWidget:!0,FuncWidget:!0};Object.defineProperty(t,"FuncWidget",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ValueFieldWidget",{enumerable:!0,get:function(){return i.default}});var i=n(r(70298)),a=n(r(35147)),u=r(9345);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}))},80393:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(68404));t.default=function(e){var t=e.type,r=e.label,n=e.onClick,i=e.readonly,a=(e.config,r||{addRuleGroup:"+",addRuleGroupExt:"+",delGroup:"x",delRuleGroup:"x",delRule:"x"}[t]);return o.default.createElement("button",{onClick:n,type:"button",disabled:i},a)}},55490:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(68404));t.default=function(e){var t=e.children;e.config;return o.default.createElement(o.default.Fragment,null,t)}},25632:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(68404));t.default=function(e){var t,r=e.id,n=e.not,i=e.setNot,a=e.conjunctionOptions,u=e.setConjunction,l=e.disabled,s=e.readonly,c=e.config,f=e.showNot,d=e.notLabel,p=Object.keys(a).length,v=l,g=c.settings.forceShowConj||p>1&&!v,h=function(e){return u(e.target.value)},y=function(e){return i(e.target.checked)};return[f&&(t="not",[o.default.createElement("input",{key:r+t,type:"checkbox",id:r+t,checked:n,disabled:s,onChange:y}),o.default.createElement("label",{key:r+t+"label",htmlFor:r+t},d||"NOT")]),g&&Object.keys(a).map((function(e){var t=a[e],r=t.id,n=t.name,i=t.label,c=t.checked,f=u.isDummyFn?"__dummy":"";return!s&&!l||c?[o.default.createElement("input",{key:r+f,type:"radio",id:r+f,name:n+f,checked:c,disabled:s||l,value:e,onChange:h}),o.default.createElement("label",{key:r+f+"label",htmlFor:r+f},i)]:null}))]}},87326:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(68404));t.default=function(e){var t=e.items,r=e.setField,n=e.selectedKey,i=e.readonly,a=null!=n;return o.default.createElement("select",{onChange:function(e){return r(e.target.value)},value:a?n:"",disabled:i},!a&&o.default.createElement("option",{disabled:!0,value:""}),function e(t){return t.map((function(t){var r=t.items,n=t.path,i=t.label,a=t.disabled;return r?o.default.createElement("optgroup",{disabled:a,key:n,label:i},e(r)):o.default.createElement("option",{disabled:a,key:n,value:n},i)}))}(t))}},74596:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(68404));t.default=function(e){var t=e.value,r=e.setValue,n=e.label,i=e.id,a=(e.config,e.type);return[o.default.createElement("input",{key:i+a,type:"checkbox",id:i+a,checked:!!t,onChange:function(e){return r(e.target.checked)}}),o.default.createElement("label",{key:i+a+"label",htmlFor:i+a},n)]}},56558:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(16459)),i=n(r(68404));t.default=function(e){e.config;var t=e.valueSources,r=e.valueSrc,n=(e.title,e.setValueSrc),a=e.readonly;return i.default.createElement("select",{onChange:function(e){return n(e.target.value)},value:r,disabled:a},function(e){return e.map((function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];return i.default.createElement("option",{key:r,value:r},n.label)}))}(t))}},86507:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){var t=e.onOk,r=(e.okText,e.cancelText,e.title);confirm(r)&&t()}},9345:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"VanillaBooleanWidget",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"VanillaButton",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"VanillaButtonGroup",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"VanillaConjs",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"VanillaDateTimeWidget",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"VanillaDateWidget",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"VanillaFieldSelect",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"VanillaMultiSelectWidget",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"VanillaNumberWidget",{enumerable:!0,get:function(){return d.default}}),t.VanillaProvider=void 0,Object.defineProperty(t,"VanillaSelectWidget",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"VanillaSliderWidget",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"VanillaSwitch",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"VanillaTextAreaWidget",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"VanillaTextWidget",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"VanillaTimeWidget",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"VanillaValueSources",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"vanillaConfirm",{enumerable:!0,get:function(){return E.default}});n(r(68404));var o=n(r(83600)),i=n(r(80098)),a=n(r(39449)),u=n(r(34665)),l=n(r(98931)),s=n(r(37081)),c=n(r(82403)),f=n(r(70597)),d=n(r(91018)),p=n(r(71382)),v=n(r(87326)),g=n(r(25632)),h=n(r(80393)),y=n(r(55490)),m=n(r(56558)),O=n(r(74596)),E=n(r(86507));t.VanillaProvider=function(e){e.config;return e.children}},83600:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21403)),i=n(r(68404)),a=n(r(73172));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.labelYes),u=e.labelNo,l=e.readonly,s=e.customProps,c=void 0===s?{}:s,f=c.radioYes||{},d=c.radioNo||{},p=function(e){return r("true"==e.target.value)},v=(0,a.default)(),g=(0,a.default)();return i.default.createElement(i.default.Fragment,null,i.default.createElement("input",(0,o.default)({key:v,type:"radio",id:v,value:!0,checked:!!t,disabled:l,onChange:p},f)),i.default.createElement("label",{style:{display:"inline"},key:v+"label",htmlFor:v},n),i.default.createElement("input",(0,o.default)({key:g,type:"radio",id:g,value:!1,checked:!t,disabled:l,onChange:p},d)),i.default.createElement("label",{style:{display:"inline"},key:g+"label",htmlFor:g},u))}},34665:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21403)),i=n(r(68404));n(r(36365));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.readonly),a=e.customProps;return i.default.createElement("input",(0,o.default)({type:"date",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}},a))}},37081:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21403)),i=n(r(68404)),a=n(r(36365));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat),u=(e.use12Hours,e.readonly),l=e.customProps,s=t;return s=t?(0,a.default)(t).format("YYYY-MM-DDTHH:mm"):"",i.default.createElement("input",(0,o.default)({type:"datetime-local",value:s,disabled:u,onChange:function(e){var t=e.target.value;t=""==t?void 0:(0,a.default)(new Date(t)).format(n),r(t)}},l))}},82403:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21403)),i=n(r(68404)),a=r(10173),u=n(r(50234));t.default=function(e){var t=e.listValues,r=e.value,n=e.setValue,l=(e.allowCustomValues,e.readonly),s=e.customProps;return i.default.createElement("select",(0,o.default)({multiple:!0,onChange:function(e){return n(function(e){for(var t=[],r=e.options,n=0;n<r.length;n++){var o=r[n];o.selected&&t.push(o.value)}return t.length||(t=void 0),t}(e.target))},value:r,disabled:l},(0,u.default)(s,["showSearch","input","showCheckboxes"])),(0,a.mapListValues)(t,(function(e){var t=e.title,r=e.value;return i.default.createElement("option",{key:r,value:r},t)})))}},91018:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21403)),i=n(r(68404));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),a=e.min,u=e.max,l=e.step,s=e.placeholder,c=e.customProps,f=null==t?"":t;return i.default.createElement("input",(0,o.default)({type:"number",value:f,placeholder:s,disabled:n,min:a,max:u,step:l,onChange:function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)}},c))}},70597:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21403)),i=n(r(68404)),a=r(10173),u=n(r(50234));t.default=function(e){var t=e.listValues,r=e.value,n=e.setValue,l=(e.allowCustomValues,e.readonly),s=e.customProps,c=null!=r;return i.default.createElement("select",(0,o.default)({onChange:function(e){return n(e.target.value)},value:c?r:"",disabled:l},(0,u.default)(s,["showSearch","input"])),!c&&i.default.createElement("option",{disabled:!0,value:""}),(0,a.mapListValues)(t,(function(e){var t=e.title,r=e.value;return i.default.createElement("option",{key:r,value:r},t)})))}},71382:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21403)),i=n(r(68404));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),a=e.min,u=e.max,l=e.step,s=e.placeholder,c=e.customProps,f=void 0===c?{}:c,d=f.input||{},p=f.slider||f,v=function(e){var t=e.target.value;t=""===t||null===t?void 0:Number(t),r(t)},g=null==t?"":t;return[i.default.createElement("input",(0,o.default)({key:"number",type:"number",value:g,placeholder:s,disabled:n,min:a,max:u,step:l,onChange:v},d)),i.default.createElement("input",(0,o.default)({key:"range",type:"range",value:g,disabled:n,min:a,max:u,step:l,onChange:v},p))]}},80098:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21403)),i=n(r(68404));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),a=e.placeholder,u=e.maxLength,l=e.customProps,s=t||"";return i.default.createElement("input",(0,o.default)({type:"text",value:s,placeholder:a,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:u},l))}},39449:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21403)),i=n(r(68404));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.readonly),a=e.placeholder,u=e.maxLength,l=(e.maxRows,e.fullWidth),s=e.customProps,c=t||"";return i.default.createElement("textarea",(0,o.default)({value:c,placeholder:a,disabled:n,onChange:function(e){var t=e.target.value;""===t&&(t=void 0),r(t)},maxLength:u,style:{width:l?"100%":void 0}},s))}},98931:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21403)),i=n(r(68404));t.default=function(e){var t=e.value,r=e.setValue,n=(e.config,e.valueFormat,e.use12Hours,e.readonly),a=e.customProps;return i.default.createElement("input",(0,o.default)({type:"time",value:t||"",disabled:n,onChange:function(e){var t=e.target.value;""==t&&(t=void 0),r(t)}},a))}},90505:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.stringifyForDisplay=t.mongoFormatOp2=t.mongoFormatOp1=t.default=void 0;var i=n(r(62764)),a=n(r(68404)),u=v(r(27682)),l=v(r(68549)),s=r(91593),c=r(10173),f=n(r(36365)),d=r(96130);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=u.VanillaBooleanWidget,m=u.VanillaTextWidget,O=u.VanillaTextAreaWidget,E=u.VanillaDateWidget,b=u.VanillaTimeWidget,_=u.VanillaDateTimeWidget,T=u.VanillaMultiSelectWidget,S=u.VanillaSelectWidget,R=u.VanillaNumberWidget,C=u.VanillaSliderWidget,P=u.ValueFieldWidget,N=u.FuncWidget,L=l.ProximityOperator,I=function(e,t,r,n,o,a,u,l,s,c,f,d){var p="string"!=typeof n||n.startsWith("$")?n:"$"+n,v=t(a,d);if(void 0!==v)return r?u||e&&"$eq"!=e?u?{$not:(0,i.default)({},e,[p,v])}:(0,i.default)({},n,{$not:(0,i.default)({},e,v)}):(0,i.default)({},n,{$ne:v}):u||e&&"$eq"!=e?u?(0,i.default)({},e,[p,v]):(0,i.default)({},n,(0,i.default)({},e,v)):(0,i.default)({},n,v)};t.mongoFormatOp1=I;var A=function(e,t,r,n,o,a,u,l,s,c,f){var d,p,v="string"!=typeof r||r.startsWith("$")?r:"$"+r;return t?a?{$not:{$and:[(0,i.default)({},e[0],[v,o[0]]),(0,i.default)({},e[1],[v,o[1]])]}}:(0,i.default)({},r,{$not:(d={},(0,i.default)(d,e[0],o[0]),(0,i.default)(d,e[1],o[1]),d)}):a?{$and:[(0,i.default)({},e[0],[v,o[0]]),(0,i.default)({},e[1],[v,o[1]])]}:(0,i.default)({},r,(p={},(0,i.default)(p,e[0],o[0]),(0,i.default)(p,e[1],o[1]),p))};t.mongoFormatOp2=A;var w={equal:{label:"==",labelForFormat:"==",sqlOp:"=",spelOp:"==",spelOps:["==","eq"],reversedOp:"not_equal",formatOp:function(e,t,r,n,o,i,a,u,l){var s=u?"=":i.label;return"boolean"==o&&u?"No"==r?"NOT ".concat(e):"".concat(e):"".concat(e," ").concat(s," ").concat(r)},mongoFormatOp:I.bind(null,"$eq",(function(e){return e}),!1),jsonLogic:"==",elasticSearchQueryType:"term"},not_equal:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",spelOp:"!=",spelOps:["!=","ne"],reversedOp:"equal",formatOp:function(e,t,r,n,o,i,a,u,l){return"boolean"==o&&u?"No"==r?"".concat(e):"NOT ".concat(e):"".concat(e," ").concat(i.label," ").concat(r)},mongoFormatOp:I.bind(null,"$ne",(function(e){return e}),!1),jsonLogic:"!="},less:{label:"<",labelForFormat:"<",sqlOp:"<",spelOp:"<",spelOps:["<","lt"],reversedOp:"greater_or_equal",mongoFormatOp:I.bind(null,"$lt",(function(e){return e}),!1),jsonLogic:"<",elasticSearchQueryType:"range"},less_or_equal:{label:"<=",labelForFormat:"<=",sqlOp:"<=",spelOp:"<=",spelOps:["<=","le"],reversedOp:"greater",mongoFormatOp:I.bind(null,"$lte",(function(e){return e}),!1),jsonLogic:"<=",elasticSearchQueryType:"range"},greater:{label:">",labelForFormat:">",sqlOp:">",spelOp:">",spelOps:[">","gt"],reversedOp:"less_or_equal",mongoFormatOp:I.bind(null,"$gt",(function(e){return e}),!1),jsonLogic:">",elasticSearchQueryType:"range"},greater_or_equal:{label:">=",labelForFormat:">=",sqlOp:">=",spelOp:">=",spelOps:[">=","ge"],reversedOp:"less",mongoFormatOp:I.bind(null,"$gte",(function(e){return e}),!1),jsonLogic:">=",elasticSearchQueryType:"range"},like:{label:"Contains",labelForFormat:"Contains",reversedOp:"not_like",sqlOp:"LIKE",spelOp:".contains",spelOps:["matches",".contains"],mongoFormatOp:I.bind(null,"$regex",(function(e){return"string"==typeof e?(0,c.escapeRegExp)(e):void 0}),!1),jsonLogic:"in",_jsonLogicIsRevArgs:!0,valueSources:["value"],elasticSearchQueryType:"regexp"},not_like:{isNotOp:!0,label:"Not contains",reversedOp:"like",labelForFormat:"Not Contains",sqlOp:"NOT LIKE",mongoFormatOp:I.bind(null,"$regex",(function(e){return"string"==typeof e?(0,c.escapeRegExp)(e):void 0}),!0),valueSources:["value"]},starts_with:{label:"Starts with",labelForFormat:"Starts with",sqlOp:"LIKE",spelOp:".startsWith",spelOps:["matches",".startsWith"],mongoFormatOp:I.bind(null,"$regex",(function(e){return"string"==typeof e?"^"+(0,c.escapeRegExp)(e):void 0}),!1),jsonLogic:void 0,valueSources:["value"]},ends_with:{label:"Ends with",labelForFormat:"Ends with",sqlOp:"LIKE",spelOp:".endsWith",spelOps:["matches",".endsWith"],mongoFormatOp:I.bind(null,"$regex",(function(e){return"string"==typeof e?(0,c.escapeRegExp)(e)+"$":void 0}),!1),jsonLogic:void 0,valueSources:["value"]},between:{label:"Between",labelForFormat:"BETWEEN",sqlOp:"BETWEEN",cardinality:2,formatOp:function(e,t,r,n,o,i,a,u){var l=r.first(),s=r.get(1);return u?"".concat(e," BETWEEN ").concat(l," AND ").concat(s):"".concat(e," >= ").concat(l," && ").concat(e," <= ").concat(s)},spelFormatOp:function(e,t,r,n,o,i,a,u){var l=r[0],s=r[1];return"".concat(e," >= ").concat(l," && ").concat(e," <= ").concat(s)},mongoFormatOp:A.bind(null,["$gte","$lte"],!1),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"not_between",jsonLogic:"<=",validateValues:function(e){return null!=e[0]&&null!=e[1]?e[0]<=e[1]?null:"Invalid range":null},elasticSearchQueryType:function(e){return"time"===e?"filter":"range"}},not_between:{isNotOp:!0,label:"Not between",labelForFormat:"NOT BETWEEN",sqlOp:"NOT BETWEEN",cardinality:2,formatOp:function(e,t,r,n,o,i,a,u){var l=r.first(),s=r.get(1);return u?"".concat(e," NOT BETWEEN ").concat(l," AND ").concat(s):"(".concat(e," < ").concat(l," || ").concat(e," > ").concat(s,")")},spelFormatOp:function(e,t,r,n,o,i,a,u){var l=r[0],s=r[1];return"(".concat(e," < ").concat(l," || ").concat(e," > ").concat(s,")")},mongoFormatOp:A.bind(null,["$gte","$lte"],!0),valueLabels:["Value from","Value to"],textSeparators:[null,"and"],reversedOp:"between",validateValues:function(e){return null!=e[0]&&null!=e[1]?e[0]<=e[1]?null:"Invalid range":null}},is_empty:{label:"Is empty",labelForFormat:"IS EMPTY",cardinality:0,reversedOp:"is_not_empty",formatOp:function(e,t,r,n,o,i,a,u){return u?"".concat(e," IS EMPTY"):"!".concat(e)},sqlFormatOp:function(e,t,r,n,o,i,a,u){var l=(0,s.sqlEmptyValue)(u);return"COALESCE(".concat(e,", ").concat(l,") = ").concat(l)},spelFormatOp:function(e,t,r,n,o,i,a,u){return"".concat(e," <= ''")},mongoFormatOp:I.bind(null,"$in",(function(e,t){return[(0,s.mongoEmptyValue)(t),null]}),!1),jsonLogic:"!"},is_not_empty:{isNotOp:!0,label:"Is not empty",labelForFormat:"IS NOT EMPTY",cardinality:0,reversedOp:"is_empty",formatOp:function(e,t,r,n,o,i,a,u){return u?"".concat(e," IS NOT EMPTY"):"!!".concat(e)},sqlFormatOp:function(e,t,r,n,o,i,a,u){var l=(0,s.sqlEmptyValue)(u);return"COALESCE(".concat(e,", ").concat(l,") <> ").concat(l)},spelFormatOp:function(e,t,r,n,o,i,a,u){return"".concat(e," > ''")},mongoFormatOp:I.bind(null,"$nin",(function(e,t){return[(0,s.mongoEmptyValue)(t),null]}),!1),jsonLogic:"!!",elasticSearchQueryType:"exists"},is_null:{label:"Is null",labelForFormat:"IS NULL",sqlOp:"IS NULL",cardinality:0,reversedOp:"is_not_null",formatOp:function(e,t,r,n,o,i,a,u){return u?"".concat(e," IS NULL"):"!".concat(e)},spelFormatOp:function(e,t,r,n,o,i,a,u){return"".concat(e," == null")},mongoFormatOp:I.bind(null,"$eq",(function(e){return null}),!1),jsonLogic:"=="},is_not_null:{label:"Is not null",labelForFormat:"IS NOT NULL",sqlOp:"IS NOT NULL",cardinality:0,reversedOp:"is_null",formatOp:function(e,t,r,n,o,i,a,u){return u?"".concat(e," IS NOT NULL"):"!!".concat(e)},spelFormatOp:function(e,t,r,n,o,i,a,u){return"".concat(e," != null")},mongoFormatOp:I.bind(null,"$ne",(function(e){return null}),!1),jsonLogic:"!=",elasticSearchQueryType:"exists"},select_equals:{label:"==",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,r,n,o,i,a,u){var l=u?"=":"==";return"".concat(e," ").concat(l," ").concat(r)},spelOp:"==",spelOps:["==","eq"],mongoFormatOp:I.bind(null,"$eq",(function(e){return e}),!1),reversedOp:"select_not_equals",jsonLogic:"==",elasticSearchQueryType:"term"},select_not_equals:{isNotOp:!0,label:"!=",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,r,n,o,i,a,u){return"".concat(e," != ").concat(r)},spelOp:"!=",spelOps:["!=","ne"],mongoFormatOp:I.bind(null,"$ne",(function(e){return e}),!1),reversedOp:"select_equals",jsonLogic:"!="},select_any_in:{label:"Any in",labelForFormat:"IN",sqlOp:"IN",formatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," IN (").concat(r.join(", "),")"):"".concat(e," IN (").concat(r,")")},sqlFormatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," IN (").concat(r.join(", "),")"):void 0},spelOp:"$contains",mongoFormatOp:I.bind(null,"$in",(function(e){return e}),!1),reversedOp:"select_not_any_in",jsonLogic:"in",elasticSearchQueryType:"term"},select_not_any_in:{isNotOp:!0,label:"Not in",labelForFormat:"NOT IN",sqlOp:"NOT IN",formatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," NOT IN (").concat(r.join(", "),")"):"".concat(e," NOT IN (").concat(r,")")},sqlFormatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," NOT IN (").concat(r.join(", "),")"):void 0},mongoFormatOp:I.bind(null,"$nin",(function(e){return e}),!1),reversedOp:"select_any_in"},multiselect_equals:{label:"Equals",labelForFormat:"==",sqlOp:"=",formatOp:function(e,t,r,n,o,i,a,u){var l=u?"=":"==";return"value"==n?"".concat(e," ").concat(l," [").concat(r.join(", "),"]"):"".concat(e," ").concat(l," ").concat(r)},sqlFormatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," = '").concat(r.map((function(e){return s.SqlString.trim(e)})).join(","),"'"):void 0},spelOp:".equals",mongoFormatOp:I.bind(null,"$eq",(function(e){return e}),!1),reversedOp:"multiselect_not_equals",jsonLogic2:"all-in",jsonLogic:function(e,t,r){return{all:[e,{in:[{var:""},r]}]}},elasticSearchQueryType:"term"},multiselect_not_equals:{isNotOp:!0,label:"Not equals",labelForFormat:"!=",sqlOp:"<>",formatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," != [").concat(r.join(", "),"]"):"".concat(e," != ").concat(r)},sqlFormatOp:function(e,t,r,n,o,i,a,u){return"value"==n?"".concat(e," != '").concat(r.map((function(e){return s.SqlString.trim(e)})).join(","),"'"):void 0},mongoFormatOp:I.bind(null,"$ne",(function(e){return e}),!1),reversedOp:"multiselect_equals"},proximity:{label:"Proximity search",cardinality:2,valueLabels:[{label:"Word 1",placeholder:"Enter first word"},{label:"Word 2",placeholder:"Enter second word"}],textSeparators:[],formatOp:function(e,t,r,n,o,i,a,u){var l=r.first(),s=r.get(1),c=a.get("proximity");return"".concat(e," ").concat(l," NEAR/").concat(c," ").concat(s)},sqlFormatOp:function(e,t,r,n,o,i,a,u){var l=r.first(),c=r.get(1),f=s.SqlString.trim(l),d=s.SqlString.trim(c),p=a.get("proximity");return"CONTAINS(".concat(e,", 'NEAR((").concat(f,", ").concat(d,"), ").concat(p,")')")},mongoFormatOp:void 0,jsonLogic:void 0,options:{optionLabel:"Near",optionTextBefore:"Near",optionPlaceholder:"Select words between",factory:function(e){return a.default.createElement(L,e)},minProximity:2,maxProximity:10,defaults:{proximity:2}}},some:{label:"Some",labelForFormat:"SOME",cardinality:0,jsonLogic:"some",spelFormatOp:function(e){return"".concat(e," > 0")},mongoFormatOp:I.bind(null,"$gt",(function(e){return 0}),!1)},all:{label:"All",labelForFormat:"ALL",cardinality:0,jsonLogic:"all",spelFormatOp:function(e,t,r){return"".concat(e," == ").concat(r)},mongoFormatOp:I.bind(null,"$eq",(function(e){return e}),!1)},none:{label:"None",labelForFormat:"NONE",cardinality:0,jsonLogic:"none",spelFormatOp:function(e){return"".concat(e," == 0")},mongoFormatOp:I.bind(null,"$eq",(function(e){return 0}),!1)}},j=function(e){return null==e?"NULL":e.toString()};t.stringifyForDisplay=j;var F={conjunctions:{AND:{label:"And",mongoConj:"$and",jsonLogicConj:"and",sqlConj:"AND",spelConj:"and",spelConjs:["and","&&"],reversedConj:"OR",formatConj:function(e,t,r,n){return e.size>1?(r?"NOT ":"")+"("+e.join(" "+(n?"AND":"&&")+" ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},sqlFormatConj:function(e,t,r){return e.size>1?(r?"NOT ":"")+"("+e.join(" AND ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},spelFormatConj:function(e,t,r,n){return r&&(n=!1),e.size>1?(r?"!":"")+(n?"":"(")+e.join(" && ")+(n?"":")"):(r?"!(":"")+e.first()+(r?")":"")}},OR:{label:"Or",mongoConj:"$or",jsonLogicConj:"or",sqlConj:"OR",spelConj:"or",spelConjs:["or","||"],reversedConj:"AND",formatConj:function(e,t,r,n){return e.size>1?(r?"NOT ":"")+"("+e.join(" "+(n?"OR":"||")+" ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},sqlFormatConj:function(e,t,r){return e.size>1?(r?"NOT ":"")+"("+e.join(" OR ")+")":(r?"NOT (":"")+e.first()+(r?")":"")},spelFormatConj:function(e,t,r,n){return r&&(n=!1),e.size>1?(r?"!":"")+(n?"":"(")+e.join(" || ")+(n?"":")"):(r?"!(":"")+e.first()+(r?")":"")}}},operators:w,widgets:{text:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"String",valuePlaceholder:"Enter string",factory:function(e){return a.default.createElement(m,e)},formatValue:function(e,t,r,n){return n?j(e):JSON.stringify(e)},spelFormatValue:function(e,t,r,n,o){var i;return"matches"==o.spelOp&&"regex"!=n?(i="starts_with"==n?"(?s)^".concat((0,c.escapeRegExp)(e),".*"):"(?s).*".concat((0,c.escapeRegExp)(e),"ends_with"==n?"$":".*"),(0,s.spelEscape)(i)):(0,s.spelEscape)(e)},sqlFormatValue:function(e,t,r,n,o){return"LIKE"==o.sqlOp||"NOT LIKE"==o.sqlOp?s.SqlString.escapeLike(e,"starts_with"!=n,"ends_with"!=n):s.SqlString.escape(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},textarea:{type:"text",jsType:"string",valueSrc:"value",valueLabel:"Text",valuePlaceholder:"Enter text",factory:function(e){return a.default.createElement(O,e)},formatValue:function(e,t,r,n){return n?j(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return"LIKE"==o.sqlOp||"NOT LIKE"==o.sqlOp?s.SqlString.escapeLike(e,"starts_with"!=n,"ends_with"!=n):s.SqlString.escape(e)},spelFormatValue:function(e){return(0,s.spelEscape)(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e},fullWidth:!0},number:{type:"number",jsType:"number",valueSrc:"value",factory:function(e){return a.default.createElement(R,e)},valueLabel:"Number",valuePlaceholder:"Enter number",valueLabels:[{label:"Number from",placeholder:"Enter number from"},{label:"Number to",placeholder:"Enter number to"}],formatValue:function(e,t,r,n){return n?j(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return s.SqlString.escape(e)},spelFormatValue:function(e,t,r){var n=r.step&&!Number.isInteger(r.step);return(0,s.spelEscape)(e,n)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},slider:{type:"number",jsType:"number",valueSrc:"value",factory:function(e){return a.default.createElement(C,e)},valueLabel:"Number",valuePlaceholder:"Enter number or move slider",formatValue:function(e,t,r,n){return n?j(e):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return s.SqlString.escape(e)},spelFormatValue:function(e){return(0,s.spelEscape)(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},select:{type:"select",jsType:"string",valueSrc:"value",factory:function(e){return a.default.createElement(S,e)},valueLabel:"Value",valuePlaceholder:"Select value",formatValue:function(e,t,r,n){var o=(0,c.getTitleInListValues)(t.fieldSettings.listValues||t.asyncListValues,e);return n?j(o):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){return s.SqlString.escape(e)},spelFormatValue:function(e){return(0,s.spelEscape)(e)},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},multiselect:{type:"multiselect",jsType:"array",valueSrc:"value",factory:function(e){return a.default.createElement(T,e)},valueLabel:"Values",valuePlaceholder:"Select values",formatValue:function(e,t,r,n){var o=e.map((function(e){return(0,c.getTitleInListValues)(t.fieldSettings.listValues||t.asyncListValues,e)}));return n?o.map(j):e.map(JSON.stringify)},sqlFormatValue:function(e,t,r,n,o){return e.map((function(e){return s.SqlString.escape(e)}))},spelFormatValue:function(e,t,r,n,o){var i=o.spelOp&&"$"==o.spelOp[0],a=(0,s.spelEscape)(e);return i&&(a=(0,s.spelFixList)(a)),a},toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},date:{type:"date",jsType:"string",valueSrc:"value",factory:function(e){return a.default.createElement(E,e)},dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD",useKeyboard:!0,valueLabel:"Date",valuePlaceholder:"Enter date",valueLabels:[{label:"Date from",placeholder:"Enter date from"},{label:"Date to",placeholder:"Enter date to"}],formatValue:function(e,t,r,n){var o=(0,f.default)(e,r.valueFormat);return n?o.format(r.dateFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return s.SqlString.escape(i.format("YYYY-MM-DD"))},spelFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd').parse('".concat(i.format("YYYY-MM-DD"),"')")},jsonLogic:function(e,t,r){return(0,f.default)(e,r.valueFormat).toDate()},toJS:function(e,t){var r=(0,f.default)(e,t.valueFormat);return r.isValid()?r.toDate():void 0},mongoFormatValue:function(e,t,r){var n=(0,f.default)(e,r.valueFormat);return n.isValid()?n.toDate():void 0}},time:{type:"time",jsType:"string",valueSrc:"value",factory:function(e){return a.default.createElement(b,e)},timeFormat:"HH:mm",valueFormat:"HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Time",valuePlaceholder:"Enter time",valueLabels:[{label:"Time from",placeholder:"Enter time from"},{label:"Time to",placeholder:"Enter time to"}],formatValue:function(e,t,r,n){var o=(0,f.default)(e,r.valueFormat);return n?o.format(r.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return s.SqlString.escape(i.format("HH:mm:ss"))},spelFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return"T(java.time.LocalTime).parse('".concat(i.format("HH:mm:ss"),"')")},jsonLogic:function(e,t,r){var n=(0,f.default)(e,r.valueFormat);return 60*n.get("hour")*60+60*n.get("minute")+n.get("second")},toJS:function(e,t){var r=(0,f.default)(e,t.valueFormat);return r.isValid()?60*r.get("hour")*60+60*r.get("minute")+r.get("second"):void 0},mongoFormatValue:function(e,t,r){var n=(0,f.default)(e,r.valueFormat);return 60*n.get("hour")*60+60*n.get("minute")+n.get("second")},elasticSearchFormatValue:function(e,t,r,n){return{script:{script:{source:"doc[".concat(n,"][0].getHour() >== params.min && doc[").concat(n,"][0].getHour() <== params.max"),params:{min:t[0],max:t[1]}}}}}},datetime:{type:"datetime",jsType:"string",valueSrc:"value",factory:function(e){return a.default.createElement(_,e)},timeFormat:"HH:mm",dateFormat:"DD.MM.YYYY",valueFormat:"YYYY-MM-DD HH:mm:ss",use12Hours:!1,useKeyboard:!0,valueLabel:"Datetime",valuePlaceholder:"Enter datetime",valueLabels:[{label:"Datetime from",placeholder:"Enter datetime from"},{label:"Datetime to",placeholder:"Enter datetime to"}],formatValue:function(e,t,r,n){var o=(0,f.default)(e,r.valueFormat);return n?o.format(r.dateFormat+" "+r.timeFormat):JSON.stringify(e)},sqlFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return s.SqlString.escape(i.toDate())},spelFormatValue:function(e,t,r,n,o){var i=(0,f.default)(e,r.valueFormat);return"new java.text.SimpleDateFormat('yyyy-MM-dd HH:mm:ss').parse('".concat(i.format("YYYY-MM-DD HH:mm:ss"),"')")},jsonLogic:function(e,t,r){return(0,f.default)(e,r.valueFormat).toDate()},toJS:function(e,t){var r=(0,f.default)(e,t.valueFormat);return r.isValid()?r.toDate():void 0},mongoFormatValue:function(e,t,r){var n=(0,f.default)(e,r.valueFormat);return n.isValid()?n.toDate():void 0}},boolean:{type:"boolean",jsType:"boolean",valueSrc:"value",factory:function(e){return a.default.createElement(y,e)},labelYes:"Yes",labelNo:"No",formatValue:function(e,t,r,n){return n?e?"Yes":"No":JSON.stringify(!!e)},sqlFormatValue:function(e,t,r,n,o){return s.SqlString.escape(e)},spelFormatValue:function(e,t,r,n,o){return(0,s.spelEscape)(e)},defaultValue:!1,toJS:function(e,t){return e},mongoFormatValue:function(e,t,r){return e}},field:{valueSrc:"field",factory:function(e){return a.default.createElement(P,e)},formatValue:function(e,t,r,n,o,i,a){return n&&a.label||e},sqlFormatValue:function(e,t,r,n,o,i){return e},spelFormatValue:function(e,t,r,n,o){return e},valueLabel:"Field to compare",valuePlaceholder:"Select field to compare",customProps:{showSearch:!0}},func:{valueSrc:"func",factory:function(e){return a.default.createElement(N,e)},valueLabel:"Function",valuePlaceholder:"Select function",customProps:{}},case_value:{valueSrc:"value",type:"case_value",spelFormatValue:function(e){return(0,s.spelEscape)(""===e?null:e)},spelImportValue:function(e){return[e.value,[]]},factory:function(e){var t=e.value,r=e.setValue;return a.default.createElement("input",{type:"text",value:t||"",onChange:function(e){return r(e.target.value)}})}}},types:{text:{defaultOperator:"equal",mainWidget:"text",widgets:{text:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","proximity","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},textarea:{operators:["equal","not_equal","like","not_like","starts_with","ends_with","is_empty","is_not_empty","is_null","is_not_null"],widgetProps:{},opProps:{}},field:{operators:["equal","not_equal","proximity"]}}},number:{defaultOperator:"equal",mainWidget:"number",widgets:{number:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]},slider:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_null","is_not_null"]}}},date:{defaultOperator:"equal",widgets:{date:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},time:{defaultOperator:"equal",widgets:{time:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},datetime:{defaultOperator:"equal",widgets:{datetime:{operators:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","is_null","is_not_null"]}}},select:{mainWidget:"select",defaultOperator:"select_equals",widgets:{select:{operators:["select_equals","select_not_equals","is_null","is_not_null"],widgetProps:{customProps:{showSearch:!0}}},multiselect:{operators:["select_any_in","select_not_any_in","is_null","is_not_null"]}}},multiselect:{defaultOperator:"multiselect_equals",widgets:{multiselect:{operators:["multiselect_equals","multiselect_not_equals","is_null","is_not_null"]}}},boolean:{defaultOperator:"equal",widgets:{boolean:{operators:["equal","not_equal","is_null","is_not_null"],widgetProps:{}},field:{operators:["equal","not_equal"]}}},"!group":{defaultOperator:"some",mainWidget:"number",widgets:{number:{widgetProps:{min:0},operators:["some","all","none","equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between"],opProps:{equal:{label:"Count =="},not_equal:{label:"Count !="},less:{label:"Count <"},less_or_equal:{label:"Count <="},greater:{label:"Count >"},greater_or_equal:{label:"Count >="},between:{label:"Count between"},not_between:{label:"Count not between"}}}}},case_value:{mainWidget:"case_value",widgets:{case_value:{}}}},settings:h(h({},d.settings),{},{formatField:function(e,t,r,n,o,i){return i?r:e},formatSpelField:function(e,t,r,n,o,i){var a=n.map((function(e,t){var r=e.key,n=e.parent;return 0==t?"[map]"==n?"#this[".concat((0,s.spelEscape)(r),"]"):r:"map"==n||"[map]"==n?"[".concat((0,s.spelEscape)(r),"]"):".".concat(r)})).join("");return o.isSpelVariable&&(a="#"+a),a},sqlFormatReverse:function(e){if(null!=e)return"NOT("+e+")"},spelFormatReverse:function(e){if(null!=e)return"!("+e+")"},formatReverse:function(e,t,r,n,o,i){if(null!=e)return i?"NOT ("+e+")":"!("+e+")"},formatAggr:function(e,t,r,n,o,i,a,u,l,s){var c=a.labelForFormat,f=a.cardinality;if(0==f){var d=e?" HAVE ".concat(e):"";return"".concat(c," OF ").concat(t).concat(d)}if(null==f||1==f){var p=e?" WHERE ".concat(e):"";return"COUNT OF ".concat(t).concat(p," ").concat(c," ").concat(n)}if(2==f){var v=e?" WHERE ".concat(e):"",g=n.first(),h=n.get(1);return"COUNT OF ".concat(t).concat(v," ").concat(c," ").concat(g," AND ").concat(h)}},canCompareFieldWithField:function(e,t,r,n){return!0},valueSourcesInfo:{value:{label:"Value"},field:{label:"Field",widget:"field"},func:{label:"Function",widget:"func"}},customFieldSelectProps:{showSearch:!0},defaultSliderWidth:"200px",defaultSelectWidth:"200px",defaultSearchWidth:"100px",defaultMaxRows:5})};t.default=F},96130:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.settings=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(27682)),a=n(r(68404));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l=i.VanillaFieldSelect,s=i.VanillaConjs,c=i.VanillaButton,f=i.VanillaButtonGroup,d=i.VanillaProvider,p=i.VanillaValueSources,v=i.vanillaConfirm,g=i.VanillaSwitch,h={formatField:function(e,t,r,n,o,i){return i?r:e},renderField:function(e){return a.default.createElement(l,e)},renderOperator:function(e){return a.default.createElement(l,e)},renderFunc:function(e){return a.default.createElement(l,e)},renderConjs:function(e){return a.default.createElement(s,e)},renderSwitch:function(e){return a.default.createElement(g,e)},renderButton:function(e){return a.default.createElement(c,e)},renderButtonGroup:function(e){return a.default.createElement(f,e)},renderProvider:function(e){return a.default.createElement(d,e)},renderValueSources:function(e){return a.default.createElement(p,e)},renderConfirm:v,renderSwitchPrefix:function(){return a.default.createElement(a.default.Fragment,null,"Conditions")},valueSourcesInfo:{value:{}},fieldSeparator:".",fieldSeparatorDisplay:".",renderSize:"small",maxLabelsLength:100,canReorder:!0,canRegroup:!0,showLock:!1,canDeleteLocked:!1,showNot:!0,canLeaveEmptyGroup:!0,shouldCreateEmptyGroup:!1,forceShowConj:!1,canShortMongoQuery:!0,removeEmptyGroupsOnLoad:!0,removeIncompleteRulesOnLoad:!1,groupActionsPosition:"topRight",setOpOnChangeField:["keep","default"],groupOperators:["some","all","none"],convertableWidgets:{number:["slider","rangeslider"],slider:["number","rangeslider"],rangeslider:["number","slider"],text:["textarea"],textarea:["text"]},locale:{moment:"en"},valueLabel:"Value",valuePlaceholder:"Value",fieldLabel:"Field",operatorLabel:"Operator",funcLabel:"Function",fieldPlaceholder:"Select field",funcPlaceholder:"Select function",operatorPlaceholder:"Select operator",lockLabel:"Lock",lockedLabel:"Locked",deleteLabel:null,addGroupLabel:"Add group",addCaseLabel:"Add condition",addDefaultCaseLabel:"Add default condition",defaultCaseLabel:"Default:",addRuleLabel:"Add rule",addSubRuleLabel:"Add sub rule",delGroupLabel:"",notLabel:"Not",valueSourcesPopupTitle:"Select value source",removeRuleConfirmOptions:null,removeGroupConfirmOptions:null,defaultGroupConjunction:"AND",jsonLogic:{groupVarKey:"var",altVarKey:"var",lockedOp:"locked"}};t.settings=h},95428:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.UPPER=t.RELATIVE_DATETIME=t.NOW=t.LOWER=t.LINEAR_REGRESSION=void 0;var o=n(r(36365)),i={label:"Now",returnType:"datetime",jsonLogic:"now",jsonLogicCustomOps:{now:function(){return new Date}},spelFunc:"new java.util.Date()",sqlFormatFunc:function(){return"NOW()"},mongoFormatFunc:function(){return new Date},formatFunc:function(){return"NOW"}};t.NOW=i;var a={label:"Relative",returnType:"datetime",renderBrackets:["",""],renderSeps:["","",""],jsonLogic:function(e){var t=e.date,r=e.op;return{date_add:[t,e.val*("minus"==r?-1:1),e.dim]}},jsonLogicImport:function(e){var t=e.date_add[0],r=Math.abs(e.date_add[1]);return[t,e.date_add[1]>=0?"plus":"minus",r,e.date_add[2]]},jsonLogicCustomOps:{date_add:function(e,t,r){return(0,o.default)(e).add(t,r).toDate()}},sqlFormatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim;return"DATE_ADD(".concat(t,", INTERVAL ").concat(parseInt(n)*("minus"==r?-1:1)," ").concat(o.replace(/^'|'$/g,""),")")},mongoFormatFunc:null,formatFunc:function(e){var t=e.date,r=e.op,n=e.val,o=e.dim;return n?"".concat(t," ").concat("minus"==r?"-":"+"," ").concat(n," ").concat(o):t},args:{date:{label:"Date",type:"datetime",defaultValue:{func:"NOW",args:[]},valueSources:["func","field"]},op:{label:"Op",type:"select",defaultValue:"plus",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{plus:"+",minus:"-"}}},val:{label:"Value",type:"number",fieldSettings:{min:0},defaultValue:0,valueSources:["value"]},dim:{label:"Dimension",type:"select",defaultValue:"day",valueSources:["value"],mainWidgetProps:{customProps:{showSearch:!1}},fieldSettings:{listValues:{day:"day",week:"week",month:"month",year:"year"}}}}};t.RELATIVE_DATETIME=a;t.LOWER={label:"Lowercase",mongoFunc:"$toLower",jsonLogic:"toLowerCase",spelFunc:".toLowerCase",jsonLogicCustomOps:{toLowerCase:function(e){return e.toLowerCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};t.UPPER={label:"Uppercase",mongoFunc:"$toUpper",jsonLogic:"toUpperCase",spelFunc:".toUpperCase",jsonLogicCustomOps:{toUpperCase:function(e){return e.toUpperCase()}},returnType:"text",args:{str:{label:"String",type:"text",valueSources:["value","field"]}}};t.LINEAR_REGRESSION={label:"Linear regression",returnType:"number",formatFunc:function(e,t){var r=e.coef,n=e.bias,o=e.val;return"(".concat(r," * ").concat(o," + ").concat(n,")")},sqlFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},spelFormatFunc:function(e){var t=e.coef,r=e.bias,n=e.val;return"(".concat(t," * ").concat(n," + ").concat(r,")")},mongoFormatFunc:function(e){var t=e.coef,r=e.bias;return{$sum:[{$multiply:[t,e.val]},r]}},jsonLogic:function(e){var t=e.coef,r=e.bias;return{"+":[{"*":[t,e.val]},r]}},jsonLogicImport:function(e){return[e["+"][0]["*"][0],e["+"][0]["*"][1],e["+"][1]]},renderBrackets:["",""],renderSeps:[" * "," + "],args:{coef:{label:"Coef",type:"number",defaultValue:1,valueSources:["value"]},val:{label:"Value",type:"number",valueSources:["value","field"]},bias:{label:"Bias",type:"number",defaultValue:0,valueSources:["value"]}}}},75931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_VALUE_SRC=t.SET_VALUE=t.SET_TREE=t.SET_OPERATOR_OPTION=t.SET_OPERATOR=t.SET_NOT=t.SET_LOCK=t.SET_FIELD=t.SET_DRAG_START=t.SET_DRAG_PROGRESS=t.SET_DRAG_END=t.SET_CONJUNCTION=t.REMOVE_RULE=t.REMOVE_GROUP=t.PLACEMENT_PREPEND=t.PLACEMENT_BEFORE=t.PLACEMENT_APPEND=t.PLACEMENT_AFTER=t.MOVE_ITEM=t.ADD_RULE=t.ADD_GROUP=t.ADD_CASE_GROUP=void 0;t.ADD_GROUP="ADD_GROUP";t.ADD_CASE_GROUP="ADD_CASE_GROUP";t.REMOVE_GROUP="REMOVE_GROUP";t.SET_CONJUNCTION="SET_CONJUNCTION";t.SET_NOT="SET_NOT";t.ADD_RULE="ADD_RULE";t.REMOVE_RULE="REMOVE_RULE";t.SET_FIELD="SET_FIELD";t.SET_OPERATOR="SET_OPERATOR";t.SET_VALUE="SET_VALUE";t.SET_VALUE_SRC="SET_VALUE_SRC";t.SET_OPERATOR_OPTION="SET_OPERATOR_OPTION";t.SET_LOCK="SET_LOCK";t.SET_TREE="SET_TREE";t.MOVE_ITEM="MOVE_ITEM";t.PLACEMENT_AFTER="after";t.PLACEMENT_BEFORE="before";t.PLACEMENT_APPEND="append";t.PLACEMENT_PREPEND="prepend";t.SET_DRAG_PROGRESS="SET_DRAG_PROGRESS";t.SET_DRAG_START="SET_DRAG_START";t.SET_DRAG_END="SET_DRAG_END"},63652:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.elasticSearchFormat=function e(t,r){if(!t)return;var n=t.get("type"),i=t.get("properties")||new Map;if("rule"===n&&i.get("field")){var u,l,s=i.get("operator"),f=i.get("field"),d=i.get("value").toJS(),p=(null===(u=i.get("valueType"))||void 0===u||u.get(0),null===(l=i.get("valueSrc"))||void 0===l?void 0:l.get(0));if("func"===p)return;return d&&Array.isArray(d[0])?d[0].map((function(e){return c(f,[e],s,r,p)})):c(f,d,s,r,p)}if("group"===n||"rule_group"===n){var v=i.get("conjunction");return v||(v=(0,a.defaultConjunction)(r)),function(e,t,r,n){if(!e||!e.size)return;var i=e.valueSeq().toArray(),a=function(e){switch(e){case"AND":return"must";case"OR":return"should";case"NOT":return"must_not";default:return}}(t),u=i.map((function(e){return r(e,n)})).filter((function(e){return void 0!==e}));if(!u.length)return;var l=u.flat(1/0);return{bool:(0,o.default)({},a,l)}}(t.get("children1"),v,e,r)}};var o=n(r(62764)),i=r(75362),a=r(32951);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r,n,i){var a=function(e,t){return e}(n);switch(e){case"filter":return{script:i.operators[r].elasticSearchScript(n,t)};case"exists":return{field:n};case"match":return(0,o.default)({},a,t[0]);case"term":return(0,o.default)({},n,t[0]);case"geo_bounding_box":return(0,o.default)({},n,function(e){if(null==e)return null;var t=e.split(",").map(Number);return{top_left:{lat:t[0],lon:t[1]},bottom_right:{lat:t[2],lon:t[3]}}}(t[0]));case"range":return(0,o.default)({},n,function(e,t){if(e.length>1)return{gte:"".concat(e[0]),lte:"".concat(e[1])};var r=e[0];switch(t){case"on_date":case"not_on_date":case"equal":case"select_equals":case"not_equal":return{gte:"".concat(r,"||/d"),lte:"".concat(r,"||+1d")};case"less_or_equal":return{lte:"".concat(r)};case"greater_or_equal":case"greater":return{gte:"".concat(r)};case"less":return{lt:"".concat(r)};default:return}}(t,r));case"wildcard":return(0,o.default)({},n,function(e){return{value:"*"+e+"*"}}(t[0]));case"regexp":return(0,o.default)({},n,function(e){return{value:e}}(t[0]));default:return}}function c(e,t,r,n,a){if(e&&r&&null!=t){var u=r,c=n.operators[u];if(c){var f=c.elasticSearchQueryType,d=!1;if(!f&&c.reversedOp)d=!0,u=c.reversedOp,f=(c=n.operators[u]).elasticSearchQueryType;var p,v,g=(0,i.getWidgetForFieldOp)(n,e,u,a),h=n.widgets[g].elasticSearchFormatValue;if(p="function"==typeof f?f(g):f)return v="function"==typeof h?h(p,t,u,e,n):s(p,t,u,e,n),d?{bool:{must_not:(0,o.default)({},p,l({},v))}}:(0,o.default)({},p,l({},v))}}}},52810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18628);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(36492);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(3810);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a=r(63176);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var u=r(94462);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=r(17201);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var s=r(63652);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},36492:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.jsonLogicFormat=void 0;var o=n(r(66604)),i=n(r(63448)),a=n(r(62764)),u=r(10173),l=r(87242),s=r(75362),c=r(32951),f=r(84145),d=r(40745),p=n(r(50234)),v=n(r(7275));function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.jsonLogicFormat=function(e,t){var r,n={usedFields:[],errors:[]},o=O(e,t,n,!0),i=n.errors,a=n.usedFields,u=t.settings.fieldSeparator,s={},c=y(a);try{for(c.s();!(r=c.n()).done;)for(var f=r.value,d=((0,l.getFieldConfig)(t,f),f.split(u)),p=s,v=0;v<d.length;v++){var g=d[v],h=(0,l.getFieldConfig)(t,d.slice(0,v+1))||{};v!=d.length-1?"!group"==h.type&&"struct"!=h.mode?(p[g]||(p[g]=[{}]),p=p[g][0]):(p[g]||(p[g]={}),p=p[g]):p[g]||(p[g]=null)}}catch(e){c.e(e)}finally{c.f()}return{errors:i,logic:o,data:s}};var O=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e){var i,u=e.get("type"),l=e.get("properties")||new d.Map,s=l.get("isLocked"),c=t.settings.jsonLogic.lockedOp;return"group"===u||"rule_group"===u?i=E(e,t,r,n,o):"rule"===u&&(i=b(e,t,r,o)),s&&i&&c&&(i=(0,a.default)({},c,i)),i}},E=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=e.get("type"),u=e.get("properties")||new d.Map,s=u.get("mode"),f=e.get("children1"),p=u.get("field");if(f){var v=u.get("conjunction");v||(v=(0,c.defaultConjunction)(t));var g=t.conjunctions[v],h=g.jsonLogicConj||v.toLowerCase(),y=u.get("not");if("and"==h||"or"==h){var m="rule_group"===i&&!n,E=m&&"struct"!=s?p:o,b=u.get("operator"),T=b&&(0,l.getOperatorConfig)(t,b,p)||null,S=_(t,u,r,b,o),C=m&&(!b||0==T.cardinality),N=f.map((function(e){return O(e,t,r,!1,E)})).filter((function(e){return void 0!==e}));if(m&&"struct"!=s&&!C){if(null==S)return}else if(!N.size)return;var L={};if(1!=N.size||n?L[h]=N.toList().toJS():L=N.first(),y&&(L={"!":L}),m&&"struct"!=s){var I=R(r,t,p,o);if(C){var A=b||"some";L=(0,a.default)({},A,[I,L])}else{var w=N.size?{filter:[I,L]}:I,j={reduce:[w,{"+":[1,{var:"accumulator"}]},0]};L=P(t,u,j,S,b)}}return L}r.errors.push("Conjunction ".concat(h," is not supported"))}},b=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("properties")||new d.Map,i=o.get("field"),a=o.get("operator"),u=o.get("operatorOptions");if((u=u?u.toJS():null)&&!Object.keys(u).length&&(u=null),null!=i&&null!=a){var s=(0,l.getFieldConfig)(t,i)||{},c=(0,l.getOperatorConfig)(t,a,i)||{},f=c.reversedOp,p=(0,l.getOperatorConfig)(t,f,i)||{},v=!1;if(c.jsonLogic||p.jsonLogic){if(!c.jsonLogic&&p.jsonLogic){v=!0;var g=[f,a];a=g[0],f=g[1];var h=[p,c];c=h[0],p=h[1]}var y=_(t,o,r,a,n);if(void 0!==y){var m=R(r,t,i,n);return P(t,o,m,y,a,u,s,v)}}else r.errors.push("Operator ".concat(a," is not supported"))}},_=function(e,t,r,n,o){var i=t.get("field"),a=t.get("valueSrc"),c=t.get("valueType"),d=(0,l.getFieldConfig)(e,i)||{},v=(0,l.getOperatorConfig)(e,n,i)||{},g=(0,u.defaultValue)(v.cardinality,1),h=t.get("value"),y=t.get("asyncListValues");if(null!=h){var m=[],O=[],E=r.usedFields,b=h.map((function(t,u){var g=a?a.get(u):null,h=c?c.get(u):null,E=(0,f.completeValue)(t,g,e),b=(0,s.getWidgetForFieldOp)(e,i,n,g),_=(0,p.default)((0,l.getFieldWidgetConfig)(e,i,n,b,g),["factory"]),S=T(r,e,E,g,h,_,d,n,v,o,y);return void 0!==S&&(m.push(g),O.push(h)),S})),_=b.filter((function(e){return void 0===e})).size>0;if(!(b.size<g||_))return g>1?b.toArray():1==g?b.first():null;r.usedFields=E}},T=function(e,t,r,n,o,i,a,u,l){var s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10?arguments[10]:void 0;if(void 0!==r){var f;if("field"==n)f=R(e,t,r,s);else if("func"==n)f=S(e,t,r,s);else if("function"==typeof i.jsonLogic){var d=i.jsonLogic,g=[r,h(h({},(0,v.default)(a,["fieldSettings","listValues"])),{},{asyncListValues:c}),(0,p.default)(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];u&&(g.push(u),g.push(l)),f=d.apply(void 0,g)}else f=r;return f}},S=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=r.get("func"),u=r.get("args"),s=(0,l.getFuncConfig)(t,o);if(s.jsonLogic){var c={};for(var f in s.args){var d=s.args[f],p=(0,l.getFieldConfig)(t,d),v=u?u.get(f):void 0,g=v?v.get("value"):void 0,h=v?v.get("valueSrc"):void 0,y=T(e,t,g,h,d.type,p,d,null,null,n);if(null!=g&&void 0===y)return void e.errors.push("Can't format value of arg ".concat(f," for func ").concat(o));void 0!==y&&(c[f]=y)}var m,O=Object.values(c);if("function"==typeof s.jsonLogic){var E=s.jsonLogic,b=[c];m=E.apply(void 0,b)}else{var _=s.jsonLogic||o,S=!!s.jsonLogicIsMethod;if(S){var R=(0,i.default)(O),C=R[0],P=R.slice(1);m=P.length?{method:[C,_,P]}:{method:[C,_]}}else m=(0,a.default)({},_,O)}return m}e.errors.push("Func ".concat(o," is not supported"))},R=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.settings,u=i.fieldSeparator,s=i.jsonLogic;if(r){Array.isArray(r)&&(r=r.join(u));var c=(0,l.getFieldConfig)(t,r)||{},f=r;if(c.fieldName&&(f=c.fieldName),o){var d=(0,l.getFieldConfig)(t,o)||{},p=o;d.fieldName&&(p=d.fieldName),0==f.indexOf(p+u)?f=f.slice((p+u).length):e.errors.push("Can't cut group ".concat(p," from field ").concat(f))}var v=c.jsonLogicVar||("!group"==c.type?s.groupVarKey:"var");n=(0,a.default)({},v,f),-1==e.usedFields.indexOf(r)&&e.usedFields.push(r)}return n},C=function(e,t,r,n){var i=e,l=(0,u.defaultValue)(t.cardinality,1),s=(0,u.defaultValue)(t._jsonLogicIsRevArgs,!1);"string"==typeof t.jsonLogic&&(i=t.jsonLogic);var c=["<","<=",">",">="],f=["==","!="];return function(e,t,u,d,p){return 0==l&&f.includes(i)?(0,a.default)({},i,[r,null]):0==l?(0,a.default)({},i,r):1==l&&s?(0,a.default)({},i,[n,r]):1==l?(0,a.default)({},i,[r,n]):2==l&&c.includes(i)?(0,a.default)({},i,[n[0],r,n[1]]):(0,a.default)({},i,[r].concat((0,o.default)(n)))}},P=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],s=t.get("field"),c=(0,l.getOperatorConfig)(e,o,s)||{},f="function"==typeof c.jsonLogic?c.jsonLogic:C(o,c,r,n),d=[r,o,n,(0,p.default)(c,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),i,a],v=f.apply(void 0,d);return u&&(v={"!":v}),v}},3810:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.mongodbFormat=t._mongodbFormat=void 0;var o=n(r(16459)),i=n(r(62764)),a=n(r(66604)),u=n(r(75624)),l=r(10173),s=r(87242),c=r(75362),f=r(32951),d=r(84145),p=n(r(50234)),v=n(r(7275)),g=r(40745),h=r(96130);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e){return"object"==(0,u.default)(e)&&null!==e&&!Array.isArray(e)};t.mongodbFormat=function(e,t){return E(e,t,!1)};var E=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=b([],e,t,n);return r?[o,n.errors]:(n.errors.length&&console.warn("Errors while exporting to MongoDb:",n.errors),o)};t._mongodbFormat=E;var b=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;if(t){var l=t.get("type");return"group"===l||"rule_group"===l?_(e,t,r,n,o,i,a,u):"rule"===l?T(e,t,r,n,o,i,a,u):void 0}},_=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=t.get("type"),l=t.get("properties")||new g.Map,c=t.get("children1"),d=r.settings.canShortMongoQuery;if(c){var p=e.filter((function(e){return"rule_group"==e.get("type")})).length>0,v=e.filter((function(e){return"rule_group"==e.get("type")})).map((function(e){return e.get("properties").get("field")})).slice(-1).pop(),h=p&&v,y="rule_group"===u?l.get("field"):null,m=R(y,r,n,h),E=(0,s.getFieldConfig)(r,y)||{},_=E.mode,T=y&&"array"==_,S=o?!l.get("not"):l.get("not"),C=c.map((function(o){return b([].concat((0,a.default)(e),[t]),o,r,n,S,!0,"array"==_?function(e){return"$$el.".concat(e)}:void 0)})).filter((function(e){return void 0!==e}));if(T||C.size){var P=l.get("conjunction");P||(P=(0,f.defaultConjunction)(r));var N=r.conjunctions[P],L=N.reversedConj;S&&L&&(P=L,N=r.conjunctions[P]);var I,A=N.mongoConj;if(1==C.size)I=C.first();else if(C.size>1){var w=C.toList().toJS(),j=d&&"$and"==A;j&&(I=w.reduce((function(e,t){if(e){for(var r in t){if("$"==r[0]){e=void 0;break}if(null==e[r])e[r]=t[r];else{var n=e[r],o=t[r];if(O(n)||(n={$eq:n}),O(o)||(o={$eq:o}),Object.keys(n)[0]==Object.keys(o)[0]){e=void 0;break}e[r]=Object.assign({},n,o)}}return e}}),{})),I||(I=(0,i.default)({},A,w))}if(y)if("array"==_){var F={$size:m},k=I?{$size:{$filter:{input:"$"+m,as:"el",cond:I}}}:F;I={$expr:I=b(e,t.set("type","rule"),r,n,!1,!1,(function(e){return k}),F)}}else I=(0,i.default)({},m,{$elemMatch:I});return I}}},T=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,v=t.get("properties")||new g.Map,h=e.filter((function(e){return"rule_group"==e.get("type")})).length>0,y=e.filter((function(e){return"rule_group"==e.get("type")})).map((function(e){return e.get("properties").get("field")})).slice(-1).pop(),m=h&&y,O=v.get("operator"),E=v.get("operatorOptions"),b=v.get("field"),_=v.get("value"),T=v.get("valueSrc"),C=v.get("valueType"),P=v.get("asyncListValues");if(null!=b&&null!=O&&void 0!==_){var N=(0,s.getFieldConfig)(r,b)||{},L=(0,s.getOperatorConfig)(r,O,b)||{},I=L.reversedOp,A=(0,s.getOperatorConfig)(r,I,b)||{},w=(0,l.defaultValue)(L.cardinality,1),j=i;if(j&&I){var F=[I,O];O=F[0],I=F[1];var k=[A,L];L=k[0],A=k[1],j=!1}var x=R(b,r,n,m),M=[],D=[],V=!1,U=_.map((function(e,t){var i=T?T.get(t):null,a=C?C.get(t):null,u=(0,d.completeValue)(e,i,r),l=(0,c.getWidgetForFieldOp)(r,b,O,i),f=(0,p.default)((0,s.getFieldWidgetConfig)(r,b,O,l,i),["factory"]),v=S(n,r,u,i,a,f,N,m,O,L,P),g=(0,o.default)(v,2),h=g[0],y=g[1];return void 0!==h&&(V=V||y,M.push(i),D.push(a)),h}));u&&(V=!0);var q=V&&a,W=U.filter((function(e){return void 0===e})).size>0;if(!(U.size<w||W)){var G=w>1?U.toArray():1==w?U.first():null,B=L.mongoFormatOp;if(B){var K=[u?u(x):x,O,void 0!==f&&null==G?f:G,V,M.length>1?M:M[0],D.length>1?D:D[0],(0,p.default)(L,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),E,N],z=B.apply(void 0,K);return q&&(z={$expr:z}),j&&(z={$not:z}),z}n.errors.push("Operator ".concat(O," is not supported"))}}},S=function(e,t,r,n,i,a,u,l,s,c,f){if(void 0===r)return[void 0,!1];var d,g=!1;if("field"==n){var h=C(e,t,r,l),y=(0,o.default)(h,2);d=y[0],g=y[1]}else if("func"==n){var O=P(e,t,r,l),E=(0,o.default)(O,2);d=E[0],g=E[1]}else if("function"==typeof a.mongoFormatValue){var b=a.mongoFormatValue,_=[r,m(m({},(0,v.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:f}),(0,p.default)(a,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];s&&(_.push(s),_.push(c)),d=b.apply(void 0,_)}else d=r;return[d,g]},R=function(e,t,r,n){if(e){var o=(0,s.getFieldConfig)(t,e)||{},i=t.settings.fieldSeparator,a=(Array.isArray(e)||e.split(i),Array.isArray(e)?e.join(i):e);if(o.fieldName&&(a=o.fieldName),n){var u=(0,s.getFieldConfig)(t,n)||{},l=n;u.fieldName&&(l=u.fieldName),0==a.indexOf(l+".")?a=a.slice((l+".").length):r.errors.push("Can't cut group ".concat(l," from field ").concat(a))}return a}},C=function(e,t,r,n){var o,i=t.settings.fieldSeparator;if(r){var a=(0,s.getFieldConfig)(t,r)||{},u=Array.isArray(r)?r:r.split(i),l=((0,c.getFieldPath)(r,t),(0,c.getFieldPathLabels)(r,t)),f=l?l.join(i):null;o="$"+(t.settings.formatField||h.settings.formatField)(R(r,t,e,n),u,f,a,t,!1)}return[o,!0]},P=function(e,t,r,n){var a,u=r.get("func"),l=r.get("args"),f=(0,s.getFuncConfig)(t,u),d=f.mongoFunc||u,v=f.mongoArgsAsObject,g={},h=0,y=void 0;for(var m in f.args){var O=f.args[m],E=(0,s.getFieldConfig)(t,O),b=l?l.get(m):void 0,_=b?b.get("value"):void 0,T=b?b.get("valueSrc"):void 0,R=b?b.get("asyncListValues"):void 0,C=(0,c.getWidgetForFieldOp)(t,E,null,T),P=(0,p.default)((0,s.getFieldWidgetConfig)(t,E,null,C,T),["factory"]),N=S(e,t,_,T,O.type,P,E,n,null,null,R),L=(0,o.default)(N,2),I=L[0];L[1];if(null!=_&&void 0===I)return e.errors.push("Can't format value of arg ".concat(m," for func ").concat(u)),[void 0,!1];h++,void 0!==I&&(g[m]=I,y=I)}if("function"==typeof f.mongoFormatFunc){var A=[g];a=f.mongoFormatFunc.apply(void 0,A)}else{if(null===f.mongoFormatFunc)return e.errors.push("Functon ".concat(d," is not supported")),[void 0,!1];a=v?(0,i.default)({},d,g):1==h&&void 0!==y?(0,i.default)({},d,y):(0,i.default)({},d,Object.values(g))}return[a,!0]}},18628:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.queryBuilderFormat=void 0;var o=n(r(62764)),i=r(10173),a=r(87242),u=r(32951),l=r(75362),s=(r(84145),r(40745));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.queryBuilderFormat=function(e,t){var r={usedFields:[]},n=d(e,t,r);if(n)return f(f({},n),r)};var d=function(e,t,r){if(e){var n=e.get("type"),o=e.get("children1");return("group"===n||"rule_group"===n)&&o&&o.size?p(e,t,r):"rule"===n?v(e,t,r):void 0}},p=function(e,t,r){var n=e.get("properties")||new s.Map,o=e.get("children1"),i=e.get("id"),a=o.map((function(e){return d(e,t,r)})).filter((function(e){return void 0!==e}));if(a.size){var l=n.get("conjunction");l||(l=(0,u.defaultConjunction)(t));var c=n.get("not");return{id:i,rules:a.toList(),condition:l.toUpperCase(),not:c}}},v=function(e,t,r){var n=e.get("properties")||new s.Map,o=e.get("id"),u=n.get("operator"),c=n.get("operatorOptions"),f=n.get("field"),d=n.get("value"),p=n.get("valueSrc"),v=n.get("valueType"),g=d.filter((function(e){return void 0===e})).size>0;if(null!=f&&null!=u&&!g){var h=(0,a.getFieldConfig)(t,f)||{},y=(0,a.getOperatorConfig)(t,u,f)||{},m=h.type||"undefined",O=(0,i.defaultValue)(y.cardinality,1),E=t.types[h.type]||{},b=(0,l.formatFieldName)(f,t,r);if(!(d.size<O)){-1==r.usedFields.indexOf(f)&&r.usedFields.push(f),d=d.toArray(),p=p.toArray(),v=v.toArray();for(var _=[],T=0;T<d.length;T++){var S={type:v[T],value:d[T]};if(_.push(S),"field"==p[T]){var R=d[T];-1==r.usedFields.indexOf(R)&&r.usedFields.push(R)}}var C=c?c.toJS():null;C&&!Object.keys(C).length&&(C=null);var P={id:o,fieldName:b,type:m,input:E.mainWidget,operator:u};return C&&(P.operatorOptions=C),P.values=_,P}}}},17201:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.queryString=void 0;var o=n(r(62764)),i=n(r(16459)),a=n(r(66604)),u=r(87242),l=r(75362),s=n(r(50234)),c=n(r(7275)),f=r(10173),d=r(32951),p=r(96130),v=r(84145),g=r(40745);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.queryString=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={errors:[]},o=m(e,t,n,r,null);return n.errors.length&&console.warn("Errors while exporting to string:",n.errors),o};var m=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e){var i=e.get("type");e.get("children1");return"group"===i||"rule_group"===i?O(e,t,r,n,o):"rule"===i?_(e,t,r,n,o):void 0}},O=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=e.get("type"),u=e.get("properties")||new g.Map,l=u.get("mode"),s=e.get("children1");if(s){var c="rule_group"===i,f=c&&"array"==l?u.get("field"):null,p=c&&"array"==l,v=u.get("not"),h=s.map((function(e){return m(e,t,r,n,f)})).filter((function(e){return void 0!==e}));if(p||h.size){var y=u.get("conjunction");y||(y=(0,d.defaultConjunction)(t));var O,E=t.conjunctions[y],b=h.size?E.formatConj(h,y,v,n):null;if(f){var T=_(e,t,r,n,o,!0);if(T){var S,R=T.pop(),C=[b].concat((0,a.default)(T));O=(S=t.settings).formatAggr.apply(S,(0,a.default)(C)),R&&(O=t.settings.formatReverse(O,null,null,null,null,n))}}else O=b;return O}}},E=function(e,t,r,n,o,i){var a,c=t.get("field"),d=t.get("valueSrc"),p=t.get("valueType"),g=(0,u.getFieldConfig)(e,c)||{},h=n||t.get("operator"),y=(0,u.getOperatorConfig)(e,h,c)||{},m=(0,f.defaultValue)(y.cardinality,1),O=t.get("value"),E=t.get("asyncListValues"),b=[],_=[];if(null!=O){var S=O.map((function(t,n){var a=d?d.get(n):null,f=p?p.get(n):null,m=(0,v.completeValue)(t,a,e),O=(0,l.getWidgetForFieldOp)(e,c,h,a),S=(0,s.default)((0,u.getFieldWidgetConfig)(e,c,h,O,a),["factory"]),R=T(e,r,m,a,f,S,g,h,y,o,i,E);return void 0!==R&&(b.push(a),_.push(f)),R}));S.filter((function(e){return void 0===e})).size>0||S.size<m||(a=1==m?S.first():S)}return[a,b.length>1?b:b[0],_.length>1?_:_[0]]},b=function(e,t){var r,n=t.labelForFormat||e,o=(0,f.defaultValue)(t.cardinality,1);return 0==o?r=function(e,t,r,o,i,a,u,l){return"".concat(e," ").concat(n)}:1==o?r=function(e,t,r,o,i,a,u,l){return"".concat(e," ").concat(n," ").concat(r)}:2==o&&(r=function(e,t,r,o,i,a,u,l){var s=r.first(),c=r.get(1);return"".concat(e," ").concat(n," ").concat(s," AND ").concat(c)}),r},_=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=e.get("properties")||new g.Map,c=l.get("field"),f=l.get("operator"),d=l.get("operatorOptions");if(null!=c&&null!=f){var p=(0,u.getFieldConfig)(t,c)||{},v=(0,u.getOperatorConfig)(t,f,c)||{},h=v.reversedOp,y=(0,u.getOperatorConfig)(t,h,c)||{},m=!1,O=v.formatOp;if(!O&&h&&(O=y.formatOp)){m=!0;var _=[h,f];f=_[0],h=_[1];var T=[y,v];v=T[0],y=T[1]}if(O||(O=b(f,v)),O){var R=S(t,r,c,n,o),C=E(t,l,r,f,n,o),P=(0,i.default)(C,3),N=P[0],L=P[1],I=P[2];if(void 0!==N){var A=[R,f,N,L,I,(0,s.default)(v,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),d,n,p,m];if(a)return A;var w=O.apply(void 0,A);return m&&(w=t.settings.formatReverse(w,f,h,v,y,n)),w}}}},T=function(e,t,r,n,o,i,a,l,f,d){var p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,v=arguments.length>11?arguments[11]:void 0;if(void 0!==r){var g;if("field"==n)g=S(e,t,r,d,p);else if("func"==n)g=R(e,t,r,d,p);else if("function"==typeof i.formatValue){var h=i.formatValue,m=[r,y(y({},(0,c.default)(a,["fieldSettings","listValues"])),{},{asyncListValues:v}),(0,s.default)(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"]),d];if(l&&(m.push(l),m.push(f)),"field"==n){var O=(0,u.getFieldConfig)(e,r)||{};m.push(O)}g=h.apply(void 0,m)}else g=r;return g}},S=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=e.settings,s=a.fieldSeparator,c=a.fieldSeparatorDisplay,f=null;if(r){var d=(0,u.getFieldConfig)(e,r)||{},v=Array.isArray(r)?r:r.split(s),g=((0,l.getFieldPath)(r,e),(0,l.getFieldPathLabels)(r,e,i?o:null)),h=g?g.join(c):null,y=d.label2||h,m=e.settings.formatField||p.settings.formatField,O=(0,l.formatFieldName)(r,e,t,i?o:null);f=m(O,v,y,d,e,n)}return f},R=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=r.get("func"),l=r.get("args"),s=(0,u.getFuncConfig)(e,a),c=n&&s.label||a,f={},d={};for(var p in s.args){var v=s.args[p],g=(0,u.getFieldConfig)(e,v),h=l?l.get(p):void 0,y=h?h.get("value"):void 0,m=h?h.get("valueSrc"):void 0,O=h?h.get("asyncListValues"):void 0,E=T(e,t,y,m,v.type,g,v,null,null,n,o,O),b=n&&v.label||p;void 0!==E&&(f[p]=E,d[b]=E)}var _=null;if("function"==typeof s.formatFunc){var S=s.formatFunc,R=[f,n];_=S.apply(void 0,R)}else{var C=Object.entries(d).map((function(e){var t=(0,i.default)(e,2),r=t[0],o=t[1];return n?"".concat(r,": ").concat(o):"".concat(o)})).join(", ");_="".concat(c,"(").concat(C,")")}return _}},94462:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.spelFormat=t._spelFormat=void 0;var o=n(r(63448)),i=n(r(62764)),a=n(r(16459)),u=r(87242),l=r(75362),s=n(r(50234)),c=n(r(7275)),f=r(10173),d=r(32951),p=(r(96130),r(84145)),v=r(40745),g=r(91593);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.spelFormat=function(e,t){return m(e,t,!1)};var m=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=O(e,t,n,null);return r?[o,n.errors]:(n.errors.length&&console.warn("Errors while exporting to SpEL:",n.errors),o)};t._spelFormat=m;var O=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e){var o=e.get("type");return"group"===o||"rule_group"===o?_(e,t,r,n):"rule"===o?C(e,t,r,n):"switch_group"==o?b(e,t,r,n):"case_group"==o?E(e,t,r,n):void 0}},E=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("type");if("case_group"==o){var i=e.get("properties")||new v.Map,u=P(t,i,r,null,n,"!case_value"),l=(0,a.default)(u,3),s=l[0],c=(l[1],l[2],_(e,t,r,n));return[c,s]}r.errors.push("Unexpected child of type ".concat(o," inside switch"))},b=function(e,t,r){e.get("properties")||new v.Map;var n=e.get("children1");if(n){var o=n.map((function(e){return E(e,t,r,null)})).filter((function(e){return void 0!==e})).toArray();if(o.length){if(1==o.length&&!o[0][0])return o[0][1];for(var i=[],u=0;u<o.length;u++)u==o.length-1||o[u][0]?(i.push(o[u]),u==o.length-1&&o[u][0]&&i.push([void 0,null])):r.errors.push("No condition for case ".concat(u));for(var l="",s="",c=0;c<i.length;c++){var f=(0,a.default)(i[c],2),d=f[0],p=f[1];null==p&&(p="null"),null==d&&(d="true"),c!=i.length-1?(l+="(".concat(d," ? ").concat(p," : "),s+=")"):l+="".concat(p)}return l+s}}},_=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("type"),i=e.get("properties")||new v.Map,l=i.get("mode"),s=e.get("children1"),c=i.get("field");if(s){var f=i.get("conjunction");f||(f=(0,d.defaultConjunction)(t));var p=t.conjunctions[f],g=i.get("not"),h="rule_group"===o,y=h&&"struct"!=l,m=y?c:n,E=(0,u.getFieldConfig)(t,m)||{},b=E.isSpelArray,_=i.get("operator");_||l&&"some"!=l||(_="some");var T=R(t,_,c),C=T!=_,N=_&&(0,u.getOperatorConfig)(t,T,c)||null,I=h&&(!T||0==N.cardinality),A=P(t,i,r,T,n,null),w=(0,a.default)(A,3),j=w[0],F=w[1],k=w[2],x=s.map((function(e){return O(e,t,r,m)})).filter((function(e){return void 0!==e}));if(y&&!I){if(null==j)return}else if(!x.size)return;var M,D=h,V=x.size?p.spelFormatConj(x,f,g,D):null;if(y){var U=L(r,t,c,n),q=b?".length":".size()",W="".concat(U).concat(q),G=V?"".concat(U,".?[").concat(V,"]").concat(q):W,B=I?W:j;M=S(r,t,i,G,B,T,F,k,C)}else M=V;return M}},T=function(e,t){var r=t.spelOp;if(r){var n,o="$"==r[0],i="."==r[0]||o,a=i?r.slice(1):r,u=(0,f.defaultValue)(t.cardinality,1);return 0==u?n=function(e,t,r,n,o,u,l,s){return i?"".concat(e,".").concat(a,"()"):"".concat(e," ").concat(a)}:1==u&&(n=function(e,t,r,n,u,l,s,c){return o?"".concat(r,".").concat(a,"(").concat(e,")"):i?"".concat(e,".").concat(a,"(").concat(r,")"):"".concat(e," ").concat(a," ").concat(r)}),n}},S=function(e,t,r,n,o,i,a,l){var c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=r.get("field"),d=(0,u.getOperatorConfig)(t,i,f)||{},p=(0,u.getFieldConfig)(t,f)||{},v=r.get("operatorOptions"),g=d.spelFormatOp||T(0,d);if(g){var h,y=[n,i,o,a,l,(0,s.default)(d,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),v,p];return h=g.apply(void 0,y),c&&(h=t.settings.spelFormatReverse(h)),void 0===h&&e.errors.push("Operator ".concat(i," is not supported for value source ").concat(a)),h}e.errors.push("Operator ".concat(i," is not supported"))},R=function(e,t,r){if(t){var n=(0,u.getOperatorConfig)(e,t,r)||{},o=n.reversedOp,i=(0,u.getOperatorConfig)(e,o,r)||{},a=n.spelOp||n.spelFormatOp,l=i.spelOp||i.spelFormatOp;if(a||l){if(!a&&l){!0;var s=[o,t];t=s[0],o=s[1];var c=[i,n];n=c[0],i=c[1]}return t}}},C=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get("properties")||new v.Map,i=o.get("field"),u=o.get("operator");if(null!=i&&null!=u){var l=R(t,u,i);if(l){var s=l!=u,c=P(t,o,r,l,n,null),f=(0,a.default)(c,3),d=f[0],p=f[1],g=f[2];if(void 0!==d){var h=L(r,t,i,n),y=S(r,t,o,h,d,l,p,g,s);return y}}else r.errors.push("Operator ".concat(u," is not supported"))}},P=function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=t.get("field"),c=t.get("valueSrc"),d=t.get("valueType");("!case_value"==i||d&&"case_value"==d.get(0))&&(a="!case_value");var v,g=(0,u.getFieldConfig)(e,a)||{},h=(0,u.getOperatorConfig)(e,n,a)||{},y=(0,f.defaultValue)(h.cardinality,1),m=t.get("value"),O=t.get("asyncListValues"),E=[],b=[];if(null!=m){var _=m.map((function(t,i){var f=c?c.get(i):null,v=d?d.get(i):null,y=(0,p.completeValue)(t,f,e),m=(0,l.getWidgetForFieldOp)(e,a,n,f),_=(0,s.default)((0,u.getFieldWidgetConfig)(e,a,n,m,f),["factory"]),T=N(r,e,y,f,v,_,g,n,h,o,O);return void 0!==T&&(E.push(f),b.push(v)),T})),T=_.filter((function(e){return void 0===e})).size>0;_.size<y||T||(v=y>1?_.toArray():1==y?_.first():null)}return[v,E.length>1?E:E[0],b.length>1?b:b[0]]},N=function(e,t,r,n,o,i,a,l,f){var d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,p=arguments.length>10?arguments[10]:void 0;if(void 0!==r){var v;if("field"==n)v=L(e,t,r,d);else if("func"==n)v=I(e,t,r,d);else if("function"==typeof i.spelFormatValue){var h=i.spelFormatValue,m=[r,y(y({},(0,c.default)(a,["fieldSettings","listValues"])),{},{asyncListValues:p}),(0,s.default)(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(l&&(m.push(l),m.push(f)),"field"==n){var O=(0,u.getFieldConfig)(t,r)||{};m.push(O)}v=h.apply(void 0,m)}else v=(0,g.spelEscape)(r);return v}},L=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(r){var o=t.settings.fieldSeparator,i=(0,u.getFieldConfig)(t,r)||{},s=Array.isArray(r)?r:r.split(o),c=((0,l.getFieldPath)(r,t,n),(0,l.getFieldPartsConfigs)(r,t,n)),f=t.settings.formatSpelField,d=(0,l.formatFieldName)(r,t,e);if(n){var p=(0,u.getFieldConfig)(t,n)||{},v=n;p.fieldName&&(v=p.fieldName),0==d.indexOf(v+o)?d=d.slice((v+o).length):e.errors.push("Can't cut group ".concat(v," from field ").concat(d))}var g=c.map((function(e){var t,r=(0,a.default)(e,3),n=r[0],o=r[1],i=r[2];return i&&(t="!struct"==i.type||"!group"==i.type&&"struct"==i.mode?o.isSpelMap?"map":"class":"!group"==i.type?o.isSpelItemMap?"[map]":"[class]":"class"),{key:n,parent:t,isSpelVariable:null==o?void 0:o.isSpelVariable}})),h=f(d,n,s,g,i,t);return h}},I=function(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=r.get("func"),s=r.get("args"),c=(0,u.getFuncConfig)(t,l),f=c.spelFunc||l,d={};for(var p in c.args){var v=c.args[p],g=(0,u.getFieldConfig)(t,v),h=s?s.get(p):void 0,y=h?h.get("value"):void 0,m=h?h.get("valueSrc"):void 0,O=h?h.get("asyncListValues"):void 0,E=N(e,t,y,m,v.type,g,v,null,null,i,O);if(null!=y&&void 0===E)return void e.errors.push("Can't format value of arg ".concat(p," for func ").concat(l));void 0!==E&&(d[p]=E)}if("function"==typeof c.spelFormatFunc){var b=c.spelFormatFunc,_=[d];n=b.apply(void 0,_)}else{var T=Object.entries(d).map((function(e){var t=(0,a.default)(e,2);t[0];return t[1]}));if("."==f[0]&&T.length){var S=(0,o.default)(T),R=S[0],C=S.slice(1);n="".concat(R).concat(f,"(").concat(C.join(", "),")")}else n="".concat(f,"(").concat(T.join(", "),")")}return n}},63176:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.sqlFormat=t._sqlFormat=void 0;var o=n(r(16459)),i=n(r(62764)),a=r(87242),u=r(75362),l=n(r(50234)),s=n(r(7275)),c=r(10173),f=r(32951),d=r(96130),p=r(84145),v=r(40745),g=r(91593);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.sqlFormat=function(e,t){return m(e,t,!1)};var m=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=O(e,t,n);return r?[o,n.errors]:(n.errors.length&&console.warn("Errors while exporting to SQL:",n.errors),o)};t._sqlFormat=m;var O=function(e,t,r){if(e){var n=e.get("type"),o=e.get("children1");return("group"===n||"rule_group"===n)&&o&&o.size?E(e,t,r):"rule"===n?b(e,t,r):void 0}},E=function(e,t,r){var n=e.get("type"),o=e.get("properties")||new v.Map,i=e.get("children1"),u="rule_group"===n?o.get("field"):null;"array"==((0,a.getFieldConfig)(t,u)||{}).mode&&r.errors.push("Aggregation is not supported for ".concat(u));var l=o.get("not"),s=i.map((function(e){return O(e,t,r)})).filter((function(e){return void 0!==e}));if(s.size){var c=o.get("conjunction");return c||(c=(0,f.defaultConjunction)(t)),t.conjunctions[c].sqlFormatConj(s,c,l)}},b=function(e,t,r){var n=e.get("properties")||new v.Map,o=n.get("field"),i=n.get("operator"),s=n.get("operatorOptions"),f=n.get("valueSrc"),d=n.get("valueType"),g=n.get("value"),h=n.get("asyncListValues");if(null!=o&&null!=i){var y=(0,a.getFieldConfig)(t,o)||{},m=(0,a.getOperatorConfig)(t,i,o)||{},O=m.reversedOp,E=(0,a.getOperatorConfig)(t,O,o)||{},b=(0,c.defaultValue)(m.cardinality,1),S=!1,R=m.sqlOp||m.sqlFormatOp,C=E.sqlOp||E.sqlFormatOp;if(R||C){if(!C&&C){S=!0;var P=[O,i];i=P[0],O=P[1];var N=[E,m];m=N[0],E=N[1]}var L=[],I=[],A=g.map((function(e,n){var s=f?f.get(n):null,c=d?d.get(n):null,v=(0,p.completeValue)(e,s,t),g=(0,u.getWidgetForFieldOp)(t,o,i,s),O=(0,l.default)((0,a.getFieldWidgetConfig)(t,o,i,g,s),["factory"]),E=_(r,t,v,s,c,O,y,i,m,h);return void 0!==E&&(L.push(s),I.push(c)),E}));if(!(A.filter((function(e){return void 0===e})).size>0||A.size<b)){var w=1==b?A.first():A,j=m.sqlFormatOp||function(e,t){var r,n=t.sqlOp||e,o=(0,c.defaultValue)(t.cardinality,1);return 0==o?r=function(e,t,r,o,i,a,u,l){return"".concat(e," ").concat(n)}:1==o?r=function(e,t,r,o,i,a,u,l){return"".concat(e," ").concat(n," ").concat(r)}:2==o&&(r=function(e,t,r,o,i,a,u,l){var s=r.first(),c=r.get(1);return"".concat(e," ").concat(n," ").concat(s," AND ").concat(c)}),r}(i,m);if(j){var F,k=[T(r,t,o),i,w,L.length>1?L:L[0],I.length>1?I:I[0],(0,l.default)(m,["formatOp","mongoFormatOp","sqlFormatOp","jsonLogic","spelFormatOp"]),s,y];if(F=j.apply(void 0,k),S&&(F=t.settings.sqlFormatReverse(F)),void 0!==F)return F;r.errors.push("Operator ".concat(i," is not supported for value source ").concat(L.join(", ")))}else r.errors.push("Operator ".concat(i," is not supported"))}}else r.errors.push("Operator ".concat(i," is not supported"))}},_=function(e,t,r,n,o,i,u,c,f,d){if(void 0!==r){var p;if("field"==n)p=T(e,t,r);else if("func"==n)p=S(e,t,r);else if("function"==typeof i.sqlFormatValue){var v=i.sqlFormatValue,h=[r,y(y({},(0,s.default)(u,["fieldSettings","listValues"])),{},{asyncListValues:d}),(0,l.default)(i,["formatValue","mongoFormatValue","sqlFormatValue","jsonLogic","elasticSearchFormatValue","spelFormatValue"])];if(c&&(h.push(c),h.push(f)),"field"==n){var m=(0,a.getFieldConfig)(t,r)||{};h.push(m)}p=v.apply(void 0,h)}else p=g.SqlString.escape(r);return p}},T=function(e,t,r){if(r){var n=t.settings.fieldSeparator,o=(0,a.getFieldConfig)(t,r)||{},i=Array.isArray(r)?r:r.split(n),l=((0,u.getFieldPath)(r,t),(0,u.getFieldPathLabels)(r,t)),s=l?l.join(n):null;return(t.settings.formatField||d.settings.formatField)((0,u.formatFieldName)(r,t,e),i,s,o,t)}},S=function(e,t,r){var n,i=r.get("func"),u=r.get("args"),l=(0,a.getFuncConfig)(t,i),s=l.sqlFunc||i,c={};for(var f in l.args){var d=l.args[f],p=(0,a.getFieldConfig)(t,d),v=u?u.get(f):void 0,g=v?v.get("value"):void 0,h=v?v.get("valueSrc"):void 0,y=v?v.get("asyncListValues"):void 0,m=_(e,t,g,h,d.type,p,d,null,null,y);if(null!=g&&void 0===m)return void e.errors.push("Can't format value of arg ".concat(f," for func ").concat(i));void 0!==m&&(c[f]=m)}if("function"==typeof l.sqlFormatFunc){var O=[c];n=l.sqlFormatFunc.apply(void 0,O)}else{var E=Object.entries(c).map((function(e){var t=(0,o.default)(e,2);t[0];return t[1]})).join(", ");n="".concat(s,"(").concat(E,")")}return n}},93107:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(35783);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(86423);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var i=r(54957);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},86423:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.loadFromJsonLogic=t._loadFromJsonLogic=void 0;var o=n(r(66604)),i=n(r(63448)),a=n(r(62764)),u=n(r(16459)),l=n(r(73172)),s=r(10173),c=r(87242),f=r(75362),d=r(35783),p=r(32951),v=n(r(36365));function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){return Array.from(new Set(e))};t.loadFromJsonLogic=function(e,t){return m(e,t,!1)};var m=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n={errors:[]},o=(0,c.extendConfig)(t),i=O(o),a=e?E(e,i,o,"rule",n):void 0;a&&"group"!=a.type&&(a=P(a,o));var u=a?(0,d.loadTree)(a):void 0;return r?[u,n.errors]:(n.errors.length&&console.warn("Errors while importing from JsonLogic:",n.errors),u)};t._loadFromJsonLogic=m;var O=function(e){var t={};for(var r in e.operators){var n=e.operators[r];if("string"==typeof n.jsonLogic){var o=(n._jsonLogicIsRevArgs?"#":"")+n.jsonLogic+"/"+(0,s.defaultValue)(n.cardinality,1);t[o]||(t[o]=[]),t[o].push(r)}else if("string"==typeof n.jsonLogic2){var i=n.jsonLogic2+"/"+(0,s.defaultValue)(n.cardinality,1);t[i]||(t[i]=[]),t[i].push(r)}}var a={};for(var u in e.conjunctions){a[e.conjunctions[u].jsonLogicConj||u.toLowerCase()]=u}var l={};for(var c in e.funcs){var f=e.funcs[c],d=void 0;f.jsonLogicIsMethod?d="#"+f.jsonLogic:"string"==typeof f.jsonLogic&&(d=f.jsonLogic),d&&(l[d]||(l[d]=[]),l[d].push(c))}var p=e.settings.jsonLogic;return{operators:t,conjunctions:a,funcs:l,varKeys:["var",p.groupVarKey,p.altVarKey]}},E=function e(t,r,n,o,i){var a,u,l,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],f=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;(0,s.isJsonLogic)(t)&&(u=t[a=Object.keys(t)[0]],Array.isArray(u)||(u=[u]));var v=i.errors.length,g=n.settings.jsonLogic.lockedOp,h="!"==a&&1==u.length&&u[0]&&(0,s.isJsonLogic)(u[0])&&r.varKeys.includes(Object.keys(u[0])[0]),y="!"==a&&!h,m=g&&a==g;m?l=e(u[0],r,n,o,i,c,f,d,p,!0):y?l=e(u[0],r,n,o,i,!c,f,d,p):"val"==o?l=_(a,u,r,n,c,i,p)||T(a,u,r,n,c,f,i,p)||b(t,f,d,n,i):"rule"==o&&(l=S(a,u,r,n,c,i,p,!1)||I(a,u,r,n,c,i,p));var O=i.errors.length;return"!"!=a&&void 0===l&&O==v&&i.errors.push("Can't parse logic ".concat(JSON.stringify(t))),m&&(l.properties.isLocked=!0),l},b=function(e,t,r,n,o){if(void 0!==e){var i=n.widgets[r||t.mainWidget];if(i){if(!(0,s.isJsonLogic)(e)){if(t&&"time"==t.type&&"number"==typeof e){var a=Math.floor(e/60/60)%24,u=Math.floor(e/60)%60,l=e%60,c=i.valueFormat;if(c){var f=new Date(e);f.setMilliseconds(0),f.setHours(a),f.setMinutes(u),f.setSeconds(l),e=(0,v.default)(f).format(c)}else e="".concat(a,":").concat(u,":").concat(l)}if(t&&["date","datetime"].includes(t.type)&&e&&!(e instanceof Date))try{var d=new Date(e);d instanceof Date&&d.toISOString()===e&&(e=d)}catch(t){o.errors.push("Can't convert value ".concat(e," as Date")),e=void 0}if(e instanceof Date&&t){var p=i.valueFormat;p&&(e=(0,v.default)(e).format(p))}var g;if(e&&t.fieldSettings&&t.fieldSettings.asyncFetch)g=Array.isArray(e)?e:[e];return{valueSrc:"value",value:e,valueType:i.type,asyncListValues:g}}o.errors.push("Unexpected logic in value: ".concat(JSON.stringify(e)))}else o.errors.push("No widget for type ".concat(t.type))}},_=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=n.settings.fieldSeparator;if(r.varKeys.includes(e)&&"string"==typeof t[0]){var l=t[0];a&&(l=[a,l].join(u)),l=(0,c.normalizeField)(n,l);var s=(0,c.getFieldConfig)(n,l);return s?{valueSrc:"field",value:l,valueType:s.type}:void i.errors.push("No config for field ".concat(l))}},T=function(e,t,r,n,l,s,c){var f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(e){var d,p,v,g="method"==e;if(g){var y,m,O=(0,i.default)(t);y=O[0],d=O[1],m=O.slice(2),p=[y].concat((0,o.default)(m))}else d=e,p=t;var b=(g?"#":"")+d,_=(r.funcs[b]||[]).filter((function(e){return!s||n.funcs[e].returnType==s.type}));if(_.length)v=_[0];else for(var T=(0,a.default)({},e,t),S=0,R=Object.entries(n.funcs||{});S<R.length;S++){var C=(0,u.default)(R[S],2),P=C[0],N=C[1];if(N.jsonLogicImport&&N.returnType==s.type){var L=void 0;try{L=N.jsonLogicImport(T)}catch(e){}L&&(v=P,p=L)}}if(v&&v){var I=n.funcs[v],A=Object.keys(I.args||{}),w=p.reduce((function(e,t,o){var i=A[o],u=I.args[i],l=E(t,r,n,"val",c,!1,u,null,f);if(void 0!==l||void 0!==(l=u.defaultValue))return h(h({},e),{},(0,a.default)({},i,l));c.errors.push("No value for arg ".concat(i," of func ").concat(v))}),{});return{valueSrc:"func",value:{func:v,args:w},valueType:I.returnType}}}},S=function(e,t,r,n,i,f){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p=r.conjunctions[e],v=n.settings.fieldSeparator,g=d?(0,c.getFieldConfig)(n,d):null;null==g||g.type;if(p){var m="group",O=t.map((function(e){return E(e,r,n,"rule",f,!1,null,null,d)})).filter((function(e){return void 0!==e})).reduce((function(e,t){return h(h({},e),{},(0,a.default)({},t.id,t))}),{}),b=Object.values(O).map((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.field})).filter((function(e){return e&&e.includes(v)})),_=Object.fromEntries(y(b).map((function(e){var t=e.split(v),r=Object.fromEntries(t.slice(0,-1).map((function(e,t,r){return[].concat((0,o.default)(r.slice(0,t)),[e])})).map((function(e){return[e.join(v),(0,c.getFieldConfig)(n,e)]})).filter((function(e){var t=(0,u.default)(e,2);t[0];return"!group"==t[1].type})));return[e,Object.keys(r)]}))),T=(Object.values(O).map((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.field})).map((function(e){return _[e]})).filter((function(e){return e&&e.length})),y(Object.values(_).flat())),S=(R(T),{conjunction:p,not:i}),C=(0,l.default)(),P={},N={};return Object.entries(O).map((function(e){var t=(0,u.default)(e,2),r=t[0],i=t[1];if("group"==i.type||"rule_group"==i.type)P[r]=i;else{var a,f=null==i||null===(a=i.properties)||void 0===a?void 0:a.field,g=_[f],h=null==g?void 0:g.at(-1);if(h){var y=P,m=d?d.split(v):[];(0,s.shallowEqual)(m,h.split(v).slice(0,m.length))||(m=[]),h.split(v).slice(m.length).map((function(e,t,r){return[].concat((0,o.default)(m),(0,o.default)(r.slice(0,t)),[e]).join(v)})).map((function(e){return(0,c.normalizeField)(n,e)})).map((function(e){return{f:e,fc:(0,c.getFieldConfig)(n,e)||{}}})).filter((function(e){return"!struct"!=e.fc.type})).map((function(e,t){var r=e.f,n=e.fc,o=N[r];o||(o=(0,l.default)(),N[r]=o,y[o]={type:"rule_group",id:o,children1:{},properties:{conjunction:p,not:!1,field:r,mode:n.mode}}),y=y[o].children1})),y[r]=i}else P[r]=i}})),{type:m,id:C,children1:P,properties:S}}},R=function(e){for(var t=(0,o.default)(e).sort((function(e,t){return e.length-t.length})),r=0;r<t.length;r++)for(var n=r+1;n<t.length;n++)0==t[n].indexOf(t[r])&&(t.splice(n,1),n--);return t},C=function(e,t,r,n,o){if(e)return{type:"rule_group",id:(0,l.default)(),children1:(0,a.default)({},e.id,e),properties:{conjunction:o||(0,p.defaultGroupConjunction)(n,r),not:!1,field:t}}},P=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:(0,l.default)(),children1:(0,a.default)({},e.id,e),properties:{conjunction:(0,p.defaultConjunction)(t),not:r}}},N=function(e,t,r,n,o,i,a){var u=[],l=L(e,t,r,n,o,i,u,!1)||L(e,t,r,n,o,i,u,!0);if(l)return l;a.errors.push(u.join("; ")||"Unknown op ".concat(e,"/").concat(t))},L=function(e,t,r,n,o,a,l,f){var d=!("all"==e&&(0,s.isJsonLogic)(r[1])&&"in"==Object.keys(r[1])[0])&&a.settings.groupOperators.includes(e),p=d?0:t-1;(d||["==","!="].includes(e)&&1==p&&null===r[1])&&(p=0);var v=e+"/"+p,g=a.settings.fieldSeparator,h=o.operators[(f?"#":"")+v];if(h){var y,m=[];if(["<","<=",">",">="].includes(e)&&3==t)y=r[1],m=[r[0],r[2]];else if(f)y=r[1],m=[r[0]];else{var O=(0,i.default)(r);y=O[0],m=O.slice(1)}if((0,s.isJsonLogic)(y)){var E,b,_=Object.keys(y)[0],T=Object.values(y)[0];if(o.varKeys.includes(_)&&"string"==typeof T&&(E=T),d&&(!0,b=m[0],m=[]),"reduce"==_&&Array.isArray(T)&&3==T.length){var S=T,R=(0,u.default)(S,3),C=R[0],P=R[1],N=R[2];if((0,s.isJsonLogic)(C)&&0==N&&(0,s.isJsonLogic)(P)&&Array.isArray(P["+"])&&1==P["+"][0]&&(0,s.isJsonLogic)(P["+"][1])&&"accumulator"==P["+"][1].var)if(_=Object.keys(C)[0],T=Object.values(C)[0],"filter"==_){var L=T,I=(0,u.default)(L,2),A=I[0],w=I[1];(0,s.isJsonLogic)(A)&&(_=Object.keys(A)[0],T=Object.values(A)[0],o.varKeys.includes(_)&&"string"==typeof T&&(E=T,b=w,!0))}else o.varKeys.includes(_)&&"string"==typeof T&&(E=T,!0)}if(E){n&&(E=[n,E].join(g)),E=(0,c.normalizeField)(a,E);var j=(0,c.getFieldConfig)(a,E);if(j){var F=h[0];if(h.length>1&&j&&j.operators){if(h=h.filter((function(e){return j.operators.includes(e)})),0==h.length)return void l.push("No corresponding ops for field ".concat(E));F=h[0]}return{field:E,fieldConfig:j,opKey:F,args:m,having:b}}l.push("No config for field ".concat(E))}else l.push("Unknown field ".concat(JSON.stringify(y)))}else l.push("Incorrect operands for ".concat(e,": ").concat(JSON.stringify(r)))}},I=function e(t,r,n,o,i,a){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(t){var c=r.length;if("all"==t&&(0,s.isJsonLogic)(r[1])){var d=Object.keys(r[1])[0];"in"==d&&(r=[r[0],r[1][d][1]],t=t+"-"+d)}var v=N(t,c,r,u,n,o,a);if(v){var g,h,y=v.field,m=v.fieldConfig,O=v.opKey,b=v.args,_=v.having,T=o.operators[O],R=(void 0!==m.showNot?m.showNot:o.settings.showNot,!0);if("!group"==m.type&&_){h=_[g=Object.keys(_)[0]],Array.isArray(h)||(h=[h]);var L="!"==g&&1==h.length&&h[0]&&(0,s.isJsonLogic)(h[0])&&n.varKeys.includes(Object.keys(h[0])[0]);"!"!=g||L||(i=!i,h=(_=_["!"])[g=Object.keys(_)[0]],Array.isArray(h)||(h=[h]))}i&&R&&T.reversedOp&&(i=!1,O=T.reversedOp,T=o.operators[O]);var I=(0,f.getWidgetForFieldOp)(o,y,O),A=b.map((function(e){return E(e,n,o,"val",a,!1,m,I,u)}));if(!A.filter((function(e){return void 0===e})).length){var w;if("!group"==m.type&&_){if(void 0!==n.conjunctions[g])w=S(g,h,n,o,i,a,y,!0),i=!1;else{var j,F=e(g,h,n,o,i&&R,a,y);!i||!R||null!=F&&null!==(j=F.properties)&&void 0!==j&&j.not||(i=!1),w=C(F,y,m,o,n.conjunctions.and)}if(!w)return;w.type="rule_group",i&&Object.assign(w.properties,{not:i}),Object.assign(w.properties,{field:y,mode:m.mode,operator:O}),"array"==m.mode&&Object.assign(w.properties,{value:A.map((function(e){return e.value})),valueSrc:A.map((function(e){return e.valueSrc})),valueType:A.map((function(e){return e.valueType}))})}else if("!group"!=m.type||_){var k=A.map((function(e){return e.asyncListValues})).filter((function(e){return null!=e})),x=k.length?k[0]:void 0;w={type:"rule",id:(0,l.default)(),properties:{field:y,operator:O,value:A.map((function(e){return e.value})),valueSrc:A.map((function(e){return e.valueSrc})),valueType:A.map((function(e){return e.valueType})),asyncListValues:x}},i&&(w=P(w,o,i))}else w={type:"rule_group",id:(0,l.default)(),children1:{},properties:{conjunction:(0,p.defaultGroupConjunction)(o,m),not:i,mode:m.mode,field:y,operator:O}},"array"==m.mode&&Object.assign(w.properties,{value:A.map((function(e){return e.value})),valueSrc:A.map((function(e){return e.valueSrc})),valueType:A.map((function(e){return e.valueType}))});return w}}}}},54957:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.loadFromSpel=t._loadFromSpel=void 0;var o=n(r(16459)),i=n(r(75624)),a=n(r(62764)),u=n(r(66604)),l=r(58750),s=n(r(73172)),c=r(87242),f=r(75362),d=r(35783),p=r(32951),v=r(10173),g=n(r(36365));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.loadFromSpel=function(e,t){return m(e,t,!0)};var m=function(e,t){var r,n,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={errors:[]},a=(0,c.extendConfig)(t),u=b(a),s=void 0;try{var f=l.SpelExpressionEvaluator.compile(e);r=f._compiledExpression}catch(e){i.errors.push(e)}r&&(v.logger.debug("compiledExpression:",r),n=O(r,i),v.logger.debug("convertedObj:",n,i),(s=P(n,u,a,i))&&"group"!=s.type&&"switch_group"!=s.type&&(s=w(s,a)),v.logger.debug("jsTree:",s));var p=s?(0,d.loadTree)(s):void 0;return o?[p,i.errors]:(i.errors.length&&console.warn("Errors while importing from SpEL:",i.errors),p)};t._loadFromSpel=m;var O=function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.getType(),l=t.getChildren().map((function(n){return e(n,r,t)}));if("op-or"!=a&&"op-and"!=a||(l=l.reduce((function(e,t){var r=t.type==a&&!t.not?t.children:[t];return[].concat((0,u.default)(e),(0,u.default)(r))}),[])),"op-not"==a)return 1!=l.length&&r.errors.push("Operator NOT should have 1 child, but got ".concat(l.length,"}")),y(y({},l[0]),{},{not:!l[0].not});if("compound"==a){var s=(l=l.filter((function(e){return!("selection"==e.type&&1==e.children.length&&"boolean"==e.children[0].type&&1==e.children[0].val)}))).find((function(e){return"selection"==e.type}));s&&1!=s.children.length&&r.errors.push("Selection should have 1 child, but got ".concat(s.children.length));var c=s?s.children[0]:null,f=l[l.length-1],d="method"==f.type&&"size"==f.val.methodName||"!func"==f.type&&"size"==f.methodName,p="property"==f.type&&"length"==f.val,g=l.filter((function(e){return e!==s&&e!==f})),h={type:"compound",children:g};if(d||p)return{type:"!aggr",filter:c,source:h};if(l=(l=l.filter((function(e){var t="variable"==e.type&&"this"==e.val,r="variable"==e.type&&"root"==e.val;return!(t||r)}))).map((function(e){return"indexer"==e.type&&1==e.children.length?{type:"indexer",val:e.children[0].val,itype:e.children[0].type}:e})),"method"==f.type){var m=l.filter((function(e){return e!==f}));return{type:"!func",obj:m,methodName:f.val.methodName,args:f.val.args}}if("!func"==f.type){var O=l.filter((function(e){return e!==f}));return y(y({},f),{},{obj:O})}}try{t.getRaw?n=t.getRaw():0==t.getValue.length&&(n=t.getValue())}catch(e){v.logger.error("[spel2js] Error in getValue()",e)}if("ternary"==a&&(n=E(l)),"object"===(0,i.default)(n)&&null!==n&&(n.methodName||n.functionName)&&(n.args=n.args.map((function(n){return e(n,r,t)}))),"list"==a&&(n=n.map((function(n){return e(n,r,t)})),!o&&1==n.length))return n[0];if("constructorref"==a){var b=l.find((function(e){return"qualifiedidentifier"==e.type})),_=null==b?void 0:b.val;if(!_)return void r.errors.push("Can't find qualifiedidentifier in constructorref children: ".concat(JSON.stringify(l)));var T=l.filter((function(e){return"qualifiedidentifier"!=e.type}));return{type:"!new",cls:_,args:T}}if("typeref"==a){var S=l.find((function(e){return"qualifiedidentifier"==e.type})),R=null==S?void 0:S.val;if(!R)return void r.errors.push("Can't find qualifiedidentifier in typeref children: ".concat(JSON.stringify(l)));l.filter((function(e){return"qualifiedidentifier"!=e.type}));return{type:"!type",cls:R}}if("function"==a||"method"==a){var C=n,P=C.functionName,N=C.methodName,L=C.args;return{type:"!func",methodName:P||N,isVar:"function"==a,args:L}}return{type:a,children:l,val:n}},E=function(e){var t=[];return function e(r){var n=(0,o.default)(r,3),i=n[0],a=n[1],u=n[2];t.push([i,a]),"ternary"==(null==u?void 0:u.type)?e(u.children):t.push([void 0,u])}(e),t},b=function(e){var t={},r=function(r){var n=e.operators[r];if(n.spelOps)n.spelOps.forEach((function(e){var n=e;t[n]||(t[n]=[]),t[n].push(r)}));else if(n.spelOp){var o=n.spelOp;t[o]||(t[o]=[]),t[o].push(r)}else v.logger.log("[spel] No spelOp for operator ".concat(r))};for(var n in e.operators)r(n);var o={};for(var i in e.conjunctions){o[e.conjunctions[i].spelConj||i.toLowerCase()]=i}var a={};for(var u in e.funcs){var l=e.funcs[u],s=void 0;"string"==typeof l.spelFunc&&(s=l.spelFunc),s&&(a[s]||(a[s]=[]),a[s].push(u))}return{operators:t,conjunctions:o,funcs:a}},_=function(e,t){var r=!1,n=e.map((function(e){if("variable"==e.type||"property"==e.type||"indexer"==e.type&&"string"==e.itype)return e.val;r=!0,t.errors.push("Unexpected item in compound: ".concat(JSON.stringify(e)))}));return r?void 0:n},T=function e(t,r,n,o,i){if(null!=t){var l=n.settings.fieldSeparator,s={number:"number",string:"text",boolean:"boolean",null:"null"},f=null!=i&&i._groupField?[null==i?void 0:i._groupField]:[];if("compound"==t.type){var d,p,v=_(t.children,o);if(!v)return;var h=[].concat(f,(0,u.default)(v));return{valueSrc:"field",isVariable:"variable"==(null===(d=t.children)||void 0===d||null===(p=d[0])||void 0===p?void 0:p.type),value:h.join(l)}}if("variable"==t.type||"property"==t.type){var m=[].concat(f,[t.val]);return{valueSrc:"field",isVariable:"variable"==t.type,value:m.join(l)}}if(s[t.type]){var O=t.val,E=s[t.type];return null!=i&&i.isUnary&&(O=-O),{valueSrc:"value",valueType:E,value:O}}if("list"==t.type){var b,T=t.val.map((function(i){return e(i,r,n,o,t)}));T.length&&(null===(b=T[0])||void 0===b||b.valueType);return{valueSrc:"value",valueType:"multiselect",value:T.map((function(e){return null==e?void 0:e.value}))}}if("!func"==t.type){var R,C=t.obj,P=t.methodName,N=t.args,L=(t.isVar,R={},(0,a.default)(R,".contains","like"),(0,a.default)(R,".startsWith","starts_with"),(0,a.default)(R,".endsWith","ends_with"),(0,a.default)(R,"$contains","select_any_in"),R),A=N.map((function(a){return e(a,r,n,o,y(y({},t),{},{_groupField:null==i?void 0:i._groupField}))}));if("contains"==P&&C&&"list"==C[0].type){var w=C.map((function(i){return e(i,r,n,o,t)}));if(1!=A.length||"field"!=A[0].valueSrc)return void o.errors.push("Expected arg to method ".concat(P," to be field but got: ").concat(JSON.stringify(A)));var j=A[0].value;if(1!=w.length||"multiselect"!=w[0].valueType)return void o.errors.push("Expected object of method ".concat(P," to be inline list but got: ").concat(JSON.stringify(w)));var F=L["$"+P],k=w[0];return S(n,o,j,F,[k])}if(L["."+P]){var x=L["."+P],M=_(C,o);if(M&&1==A.length){var D=[].concat(f,(0,u.default)(M)).join(l);return S(n,o,D,x,A)}}else{if("parse"==P&&C&&"!new"==C[0].type&&"SimpleDateFormat"==C[0].cls.at(-1)){var V=C[0].args.map((function(a){return e(a,r,n,o,y(y({},t),{},{_groupField:null==i?void 0:i._groupField}))}));if(1!=V.length||"text"!=V[0].valueType)return void o.errors.push("Expected args of ".concat(C[0].cls.join("."),".").concat(P," to be 1 string but got: ").concat(JSON.stringify(V)));if(1!=A.length||"text"!=A[0].valueType)return void o.errors.push("Expected args of ".concat(C[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(A)));var U=V[0].value,q=A[0].value,W=U.includes(" ")?"datetime":"date",G=W,B=(0,c.getFieldConfig)(n,null),K=n.widgets[G||(null==B?void 0:B.mainWidget)].valueFormat,z=(0,g.default)(q,g.default.ISO_8601);return{valueSrc:"value",valueType:W,value:z.isValid()?z.format(K):void 0}}if("parse"==P&&C&&"!type"==C[0].type&&"LocalTime"==C[0].cls.at(-1)){if(1!=A.length||"text"!=A[0].valueType)return void o.errors.push("Expected args of ".concat(C[0].cls.join(".")," to be 1 string but got: ").concat(JSON.stringify(A)));var H=A[0].value,Y="time",J=((0,c.getFieldConfig)(n,null),n.widgets.time.valueFormat),$=(0,g.default)(H,"HH:mm:ss");return{valueSrc:"value",valueType:Y,value:$.isValid()?$.format(J):void 0}}o.errors.push("Unsupported method ".concat(P))}}else{if("op-plus"==t.type&&"ternary"==(null==i?void 0:i.type))return I(t,r,n,o);o.errors.push("Can't convert arg of type ".concat(t.type))}}},S=function(e,t,r,n,o){if(!o.filter((function(e){return void 0===e})).length){var i=(0,c.getFieldConfig)(e,r);if(i){var a=(0,f.getWidgetForFieldOp)(e,r,n),u=e.widgets[a||i.mainWidget],l=o.map((function(e){return e.asyncListValues})).filter((function(e){return null!=e})),d=l.length?l[0]:void 0;return{type:"rule",id:(0,s.default)(),properties:{field:r,operator:n,value:o.map((function(e){return e.value})),valueSrc:o.map((function(e){return e.valueSrc})),valueType:o.map((function(e){return"value"==e.valueSrc&&((null==u?void 0:u.type)||(null==i?void 0:i.type))||e.valueType})),asyncListValues:d}}}t.errors.push("No config for field ".concat(r))}},R=function(e,t,r,n,o){var i=e.groupFilter,a=e.groupFieldValue;if("field"!=a.valueSrc)throw"Bad groupFieldValue: ".concat(JSON.stringify(a));var u=a.value,l=S(n,o,u,t,r);if(l){var f=(0,c.getFieldConfig)(n,u),d=null==f?void 0:f.mode,p=y(y({},i||{}),{},{type:"rule_group",properties:y(y(y({},l.properties),(null==i?void 0:i.properties)||{}),{},{mode:d})});return p.id||(p.id=(0,s.default)()),p}},C=function(e,t,r,n,i,a){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(e.type==t.type){if("!aggr"==e.type){var l=[e.source,t.source].map((function(e){return T(e,n,i,a,y(y({},r),{},{_groupField:null==u?void 0:u._groupField}))})),s=(0,o.default)(l,2),c=s[0],f=s[1];return c.value==f.value}var d=[e,t].map((function(e){return T(e,n,i,a,y(y({},r),{},{_groupField:null==u?void 0:u._groupField}))})),p=(0,o.default)(d,2),v=p[0],g=p[1];return v.value==g.value}return!1},P=function e(t,r,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(t){var u;if(0==t.type.indexOf("op-")){var l=t.type.slice("op-".length),c=("minus"==l||"plus"==l)&&1==t.children.length;if(c)return t.isUnary=!0,e(t.children[0],r,n,i,t);var d="and"==l&&2==t.children.length&&"op-ge"==t.children[0].type&&"op-le"==t.children[1].type,p="or"==l&&2==t.children.length&&"op-lt"==t.children[0].type&&"op-gt"==t.children[1].type,g=d||p;if(g){var h=(0,o.default)(t.children[0].children,2),m=h[0],O=h[1],E=(0,o.default)(t.children[1].children,2),b=E[0],_=E[1],P="number"==O.type&&"number"==_.type,I=C(m,b,t,r,n,i,a);if(P&&I){O.val,_.val;var A={type:"op-between",children:[m,O,_]};return e(A,r,n,i,a)}}var j,F=r.operators[l];"eq"==l&&"null"==t.children[1].type?j="is_null":"ne"==l&&"null"==t.children[1].type?j="is_not_null":"le"==l&&"string"==t.children[1].type&&""==t.children[1].val?j="is_empty":"gt"==l&&"string"==t.children[1].type&&""==t.children[1].val?j="is_not_empty":"between"==l&&(j="between",F=["between"]);var k=function(){return t.children.map((function(o){return e(o,r,n,i,y(y({},t),{},{_groupField:null==a?void 0:a._groupField}))}))};if("and"==l||"or"==l){var x={},M=k();M.forEach((function(e){if(e){var t=(0,s.default)();e.id=t,null!=e.type?x[t]=e:i.errors.push("Bad item in AND/OR: ".concat(JSON.stringify(e)))}})),u={type:"group",id:(0,s.default)(),children1:x,properties:{conjunction:r.conjunctions[l],not:t.not}}}else if(F){var D=k(),V=D[0],U=D.slice(1);if(j=F[0],V)if(V.groupFieldValue){"field"!=V.groupFieldValue.valueSrc&&i.errors.push("Expected group field ".concat(JSON.stringify(V)));var q=V.groupFieldValue.value,W=U[0];W&&W.groupFieldValue&&"field"==W.groupFieldValue.valueSrc&&W.groupFieldValue.value==q?(j="all",U=[]):"equal"==j&&"value"==W.valueSrc&&"number"==W.valueType&&0==W.value?(j="none",U=[]):"greater"==j&&"value"==W.valueSrc&&"number"==W.valueType&&0==W.value&&(j="some",U=[]),u=R(V,j,U,n,i)}else{"field"!=V.valueSrc&&i.errors.push("Expected field ".concat(JSON.stringify(V)));var G=V.value;if(F.length>1){v.logger.warn("[spel] Spel operator ".concat(l," can be mapped to ").concat(F));var B=F.map((function(e){return{op:e,widget:(0,f.getWidgetForFieldOp)(n,G,e)}}));if("eq"==l){var K=B.find((function(e){e.op;return"field"!=e.widget}));j=K.op}}u=S(n,i,G,j,U)}else;}else a||(u=N(t,r,n,i)),u||i.errors.push("Can't convert op ".concat(l))}else if("!aggr"==t.type){var z,H=e(t.source,r,n,i,y(y({},t),{},{_groupField:null==a?void 0:a._groupField})),Y=e(t.filter,r,n,i,y(y({},t),{},{_groupField:null==H?void 0:H.value}));"rule"==(null===(z=Y)||void 0===z?void 0:z.type)&&(Y=w(Y,n)),u={groupFilter:Y,groupFieldValue:H},a||(u=void 0,i.errors.push("Unexpected !aggr in root"))}else if("ternary"==t.type){var J={};t.val.forEach((function(e){var a=(0,o.default)(e,2),u=a[0],l=a[1],s=L(u,l,r,n,i,t);s&&(J[s.id]=s)})),u={type:"switch_group",id:(0,s.default)(),children1:J,properties:{}}}else if((u=T(t,r,n,i,a))&&!u.type&&!a){var $=N(t,r,n,i);$?u=$:(u=void 0,i.errors.push("Can't convert rule of type ".concat(t.type,", it looks like var/literal")))}return u}},N=function(e,t,r,n){var o={},i=L(null,e,t,r,n);return i&&(o[i.id]=i),{type:"switch_group",id:(0,s.default)(),children1:o,properties:{}}},L=function(e,t,r,n,o){var i,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=A(n,o,r,t,a);return e?(i=P(e,r,n,o,a))&&i.type?("group"!=i.type&&(i=w(i,n)),i.type="case_group"):(o.errors.push("Unexpected case: ".concat(JSON.stringify(i))),i=void 0):i={id:(0,s.default)(),type:"case_group",properties:{}},i&&(i.properties=y(y({},i.properties),u)),i},I=function(e,t,r,n){var o=[];return function i(a){a.map((function(a){if("op-plus"==a.type)i(a.children);else{var u=T(a,t,r,n,e);u?o.push(u):n.errors.push("Can't convert ".concat(a.type," in concatenation"))}}))}(e.children),{valueSrc:"value",valueType:"case_value",value:o}},A=function(e,t,r,n){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u={};i="op-plus"==(null==n?void 0:n.type)?I(n,r,e,t):T(n,r,e,t,a);var l=e.widgets.case_value,s=null==l?void 0:l.spelImportValue;if(s){var c=s(i),f=(0,o.default)(c,2),d=f[0],p=f[1];p.map((function(e){return t.errors.push(e)})),d&&(u={value:[d],valueSrc:["value"],valueType:["case_value"]})}else t.errors.push("No fucntion to import case value");return u},w=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:"group",id:(0,s.default)(),children1:(0,a.default)({},e.id,e),properties:{conjunction:(0,p.defaultConjunction)(t),not:r}}}},35783:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.isImmutableTree=t.getTree=t.checkTree=void 0,Object.defineProperty(t,"isJsonLogic",{enumerable:!0,get:function(){return c.isJsonLogic}}),t.loadTree=t.isValidTree=t.isTree=void 0;var i=n(r(75624)),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(40745)),u=r(59175),l=r(87242),s=r(92969),c=r(10173);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}t.getTree=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var r=e;return r=r.toJS(),t&&(r=(0,s.getLightTree)(r)),r}};t.loadTree=function(e){if(d(e))return e;if(p(e))return v(e);if("string"==typeof e&&e.startsWith('["~#iM"'))throw"You are trying to load query in obsolete serialization format (Immutable string) which is not supported in versions starting from 2.1.17";if("string"==typeof e)return v(JSON.parse(e));throw"Can't load tree!"};t.checkTree=function(e,t){if(e){var r=(0,l.extendConfig)(t);return(0,u.validateTree)(e,null,r,r)}};t.isValidTree=function(e){return 0==(0,s.getTreeBadFields)(e).length};var d=function(e){return a.Map.isMap(e)};t.isImmutableTree=d;var p=function(e){return"object"==(0,i.default)(e)&&("group"==e.type||"switch_group"==e.type)};function v(e){return(0,a.fromJS)(e,(function(e,t){var r;if("properties"==e){r=t.toOrderedMap();for(var n=0;n<2;n++){var o;null===(null===(o=r.get("value"))||void 0===o?void 0:o.get(n))&&(r=r.setIn(["value",n],void 0))}}else if("value"==e&&t.get(0)&&void 0!==t.get(0).toJS){var i=t.get(0).toJS();r=i.func?t.toOrderedMap():a.default.List.of(i)}else r="asyncListValues"==e?t.toJS():a.default.Iterable.isIndexed(t)?t.toList():t.toOrderedMap();return r}))}t.isTree=p},76824:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"I4",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Ib",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"AE",{enumerable:!0,get:function(){return a.default}}),t.cQ=void 0;var i=n(r(62764)),a=n(r(64694)),u=n(r(24092)),l=p(r(52810));var s=p(r(93107));p(r(27682)),p(r(68549));var c=p(r(13527));p(r(95428));var f=n(r(90505));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=g(g(g({},c),l),s);t.cQ=h},49277:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(68404)).default.createContext();t.default=o},78512:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(16459)),a=n(r(62764)),u=n(r(40745)),l=r(92969),s=r(32951),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(75931)),f=n(r(73172)),d=r(87242),p=r(75362),v=r(10173),g=r(59175),h=n(r(50234)),y=n(r(74937));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},d=i.settings.shouldCreateEmptyGroup,p=t.push(n),v=!d,g=!(null==c||!c.isDefaultCase),h=e;return(e=I(e,t,r,n,(0,s.defaultGroupProperties)(i).merge(o||{}),i,a))!==h&&(a||g||(e=e.setIn((0,l.expandTreePath)(p,"children1"),new u.default.OrderedMap),v&&(e=I(e,p,"rule",(0,f.default)(),(0,s.defaultRuleProperties)(i),i))),e=(0,l.fixPathsInTree)(e)),e},S=function(e,t,r){e=A(e,t);var n=r.settings.canLeaveEmptyGroup,o=t.slice(0,-1);return!(0,l.hasChildren)(e,o)&&!n&&(e=(0,l.fixEmptyGroupsInTree)(e),(0,l.isEmptyTree)(e)&&!n&&(e=I(e,new u.default.List,"rule",(0,f.default)(),(0,s.defaultRuleProperties)(r),r))),e=(0,l.fixPathsInTree)(e)},R=function(e,t,r){e=A(e,t);var n=r.settings.canLeaveEmptyGroup,o=t.pop(),i=e.getIn((0,l.expandTreePath)(o)),a=i.getIn(["properties","field"]),c=i.getIn(["properties","operator"]),p=(i.getIn(["properties","value",0]),a?(0,d.getFieldConfig)(r,a):null),v=c?(0,d.getOperatorConfig)(r,c,a):null,g=a&&c&&0!=v.cardinality,h="rule_group"==i.get("type"),y=!(0,l.hasChildren)(e,o),m=h?g&&p.initialEmptyWhere:n;return y&&!m&&(h&&(e=e.deleteIn((0,l.expandTreePath)(o))),e=(0,l.fixEmptyGroupsInTree)(e),(0,l.isEmptyTree)(e)&&!n&&(e=I(e,new u.default.List,"rule",(0,f.default)(),(0,s.defaultRuleProperties)(r),r))),e=(0,l.fixPathsInTree)(e)},C=function(e,t,r){return e.setIn((0,l.expandTreePath)(t,"properties","not"),r)},P=function(e,t,r){return(0,l.removeIsLockedInTree)(e.setIn((0,l.expandTreePath)(t,"properties","isLocked"),r))},N=function(e,t,r){return e.setIn((0,l.expandTreePath)(t,"properties","conjunction"),r)},L=function e(t,r,n){n&&Array.isArray(n)&&(r.children1=new u.default.OrderedMap(n.reduce((function(r,n){var o=(0,f.default)(),i=_(_({},n),{},{properties:(0,s.defaultItemProperties)(t,n).merge(n.properties||{}),id:o});return e(t,i,i.children1),_(_({},r),{},(0,a.default)({},o,new u.default.Map(i)))}),{})))},I=function(e,t,r,n,o,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if("switch_group"==r)throw new Error("Can't add switch_group programmatically");var c,f,d=i.settings,p=d.maxNumberOfCases,v=d.maxNumberOfRules,g=d.maxNesting,h=e.get("type"),y="switch_group"==h,m=e.getIn((0,l.expandTreePath)(t)),O=y?e.getIn((0,l.expandTreePath)(t.take(2))):null,E=(0,l.expandTreePath)(t,"children1"),b=e.getIn(E),_=!!b&&b.size,T=_?b.size:null;"case_group"==r?(c=T,f=p):"group"==r?(c=t.size,f=g):"rule_group"==(null==m?void 0:m.get("type"))||(c=y?(0,l.getTotalRulesCountInTree)(O):(0,l.getTotalRulesCountInTree)(e),f=v);var S=!f||!c||c<f,R={type:r,id:n,properties:o};L(i,R,s);var C="case_group"==r&&_&&null==b.last().get("children1");if(S){var P=new u.default.OrderedMap((0,a.default)({},n,new u.default.Map(R)));if(_)if(C){var N,I=b.last(),A=new u.default.OrderedMap((N={},(0,a.default)(N,n,new u.default.Map(R)),(0,a.default)(N,I.get("id"),I),N));e=(e=e.deleteIn((0,l.expandTreePath)(E,"children1",I.get("id")))).mergeIn(E,A)}else e=e.mergeIn(E,P);else e=e.setIn(E,P);e=(0,l.fixPathsInTree)(e)}return e},A=function(e,t){return e=e.deleteIn((0,l.expandTreePath)(t)),e=(0,l.fixPathsInTree)(e)},w=function(e,t,r,n,o){var s=(0,l.getItemByPath)(e,t),f=t.pop(),d=t.size>1?(0,l.getItemByPath)(e,f):null,p=d?d.get("children1"):null,g=(0,l.getItemByPath)(e,r),h=n==c.PLACEMENT_APPEND||n==c.PLACEMENT_PREPEND?r:r.pop(),y=n==c.PLACEMENT_APPEND||n==c.PLACEMENT_PREPEND?g:r.size>1?(0,l.getItemByPath)(e,h):null,m=y?y.get("children1"):null;if(!d||!y)return e;var E=d.get("id")==y.get("id"),b=h.size<f.size&&(0,v.deepEqual)(h.toArray(),f.toArray().slice(0,h.size)),_=h.size>f.size&&(0,v.deepEqual)(f.toArray(),h.toArray().slice(0,f.size)),T=null,S=null;b?T=u.default.List(f.toArray().slice(h.size)):_&&(S=u.default.List(h.toArray().slice(f.size)));var R=m,C=p;return _||(C=C.delete(s.get("id"))),E?R=C:b&&(R=R.updateIn((0,l.expandTreeSubpath)(T,"children1"),(function(e){return C}))),n==c.PLACEMENT_BEFORE||n==c.PLACEMENT_AFTER?R=u.default.OrderedMap().withMutations((function(e){var t,r=O(R.entries());try{for(r.s();!(t=r.n()).done;){var o=(0,i.default)(t.value,2),a=o[0],u=o[1];a==g.get("id")&&n==c.PLACEMENT_BEFORE&&e.set(s.get("id"),s),e.set(a,u),a==g.get("id")&&n==c.PLACEMENT_AFTER&&e.set(s.get("id"),s)}}catch(e){r.e(e)}finally{r.f()}})):n==c.PLACEMENT_APPEND?R=R.merge((0,a.default)({},s.get("id"),s)):n==c.PLACEMENT_PREPEND&&(R=u.default.OrderedMap((0,a.default)({},s.get("id"),s)).merge(R)),_&&(C=(C=C.updateIn((0,l.expandTreeSubpath)(S,"children1"),(function(e){return R}))).delete(s.get("id"))),E||b||(e=e.updateIn((0,l.expandTreePath)(f,"children1"),(function(e){return C}))),_||(e=e.updateIn((0,l.expandTreePath)(h,"children1"),(function(e){return R}))),e=(0,l.fixPathsInTree)(e)},j=function(e,t,r,n){if(!r)return A(e,t);var o=n.settings,i=o.fieldSeparator,a=o.setOpOnChangeField,c=o.showErrorMessage;Array.isArray(r)&&(r=r.join(i));var v=e.getIn((0,l.expandTreePath)(t,"type")),g=e.getIn((0,l.expandTreePath)(t,"properties")),h="rule_group"==v,y=(0,d.getFieldConfig)(n,r),m="!group"==y.type,E=m&&"array"==y.mode,b=h!=m,_=g.get("operator"),T=g.get("operatorOptions"),S=(g.get("field"),g.get("value"),g.get("valueSrc",new u.default.List),g.get("valueType",new u.default.List),y&&-1!==y.operators.indexOf(_)?_:null),R=null,C=(0,p.getOperatorsForField)(n,r);if(C&&1==C.length)R=C[0];else if(C&&C.length>1){var P,N=O(a||[]);try{for(N.s();!(P=N.n()).done;){var L=P.value;if("keep"!=L||b?"default"==L?R=(0,s.defaultOperator)(n,r,!1):"first"==L&&(R=(0,p.getFirstOperator)(n,r)):R=S,R)break}}catch(e){N.e(e)}finally{N.f()}}if(!m&&!y.operators)return console.warn("Type ".concat(y.type," is not supported")),e;if(h&&!m&&(e=(e=(e=e.setIn((0,l.expandTreePath)(t,"type"),"rule")).deleteIn((0,l.expandTreePath)(t,"children1"))).setIn((0,l.expandTreePath)(t,"properties"),new u.default.OrderedMap)),m){e=e.setIn((0,l.expandTreePath)(t,"type"),"rule_group");var w=(0,p.getNewValueForFieldOp)(n,n,g,r,R,"field",!0),j=(w.canReuseValue,w.newValue),F=w.newValueSrc,k=w.newValueType,x=w.operatorCardinality,M=(0,s.defaultGroupProperties)(n,y).merge({field:r,mode:y.mode});return E&&(M=M.merge({operator:R,value:j,valueSrc:F,valueType:k})),e=(e=e.setIn((0,l.expandTreePath)(t,"children1"),new u.default.OrderedMap)).setIn((0,l.expandTreePath)(t,"properties"),M),y.initialEmptyWhere&&1==x||(e=I(e,t,"rule",(0,f.default)(),(0,s.defaultRuleProperties)(n,r),n)),e=(0,l.fixPathsInTree)(e)}return e.updateIn((0,l.expandTreePath)(t,"properties"),(function(e){return e.withMutations((function(e){var t=(0,p.getNewValueForFieldOp)(n,n,e,r,R,"field",!0),o=t.canReuseValue,i=t.newValue,a=t.newValueSrc,u=t.newValueType,l=t.newValueError;c&&(e=e.set("valueError",l));var f=o?T:(0,s.defaultOperatorOptions)(n,R,r);return e.set("field",r).set("operator",R).set("operatorOptions",f).set("value",i).set("valueSrc",a).set("valueType",u).delete("asyncListValues")}))}))},F=function(e,t,r,n){var o=n.settings.showErrorMessage,i=e.getIn((0,l.expandTreePath)(t,"properties")),a=e.getIn((0,l.expandTreePath)(t,"children1")),c=i.get("field"),g="!group"==(0,d.getFieldConfig)(n,c).type,h=(0,d.getOperatorConfig)(n,r,c),y=h?(0,v.defaultValue)(h.cardinality,1):null;return e=e.updateIn((0,l.expandTreePath)(t,"properties"),(function(e){return e.withMutations((function(e){var t=e.get("field"),i=e.get("operatorOptions"),a=(e.get("value",new u.default.List),e.get("valueSrc",new u.default.List),e.get("operator"),(0,p.getNewValueForFieldOp)(n,n,e,t,r,"operator",!0)),l=a.canReuseValue,c=a.newValue,f=a.newValueSrc,d=a.newValueType,v=a.newValueError;o&&(e=e.set("valueError",v));var g=l?i:(0,s.defaultOperatorOptions)(n,r,t);return l||(e=e.delete("asyncListValues")),e.set("operator",r).set("operatorOptions",g).set("value",c).set("valueSrc",f).set("valueType",d)}))})),g&&0==y&&0==a.size&&(e=I(e,t,"rule",(0,f.default)(),(0,s.defaultRuleProperties)(n,c),n)),e},k=function(e,t,r,n,o,a,s,c){var f,h=a.settings,y=h.fieldSeparator,m=h.showErrorMessage,O=e.getIn((0,l.expandTreePath)(t,"properties","valueSrc",r+""))||null;"field"===O&&Array.isArray(n)&&(n=n.join(y));var E=e.getIn((0,l.expandTreePath)(t,"properties","field"))||null,b=e.getIn((0,l.expandTreePath)(t,"properties","operator"))||null,_=(0,d.getOperatorConfig)(a,b,E),T=b?(0,v.defaultValue)(_.cardinality,1):null,S=o||V(n,O,a),R=(0,g.validateValue)(a,E,E,b,n,S,O,s,!1,!1),C=(0,i.default)(R,2),P=C[0],N=C[1],L=!P;if(L&&N!==n&&(n=N),m){var I=(0,p.getWidgetForFieldOp)(a,E,b,O),A=(0,d.getFieldWidgetConfig)(a,E,b,I,O),w=Array.from({length:T},(function(r,n){return e.getIn((0,l.expandTreePath)(t,"properties","valueSrc",n+""))||null}));if(_&&_.validateValues&&w.filter((function(e){return"value"==e||null==e})).length==T){var j=Array.from({length:T},(function(o,i){return i==r?n:e.getIn((0,l.expandTreePath)(t,"properties","value",i+""))||null})),F=A&&A.toJS?j.map((function(e){return A.toJS(e,A)})):j,k=_.validateValues(F);e=e.setIn((0,l.expandTreePath)(t,"properties","valueError",T),k)}}e.getIn((0,l.expandTreePath)(t,"properties","value"))||(e=e.setIn((0,l.expandTreePath)(t,"properties","value"),new u.default.List(new Array(T))).setIn((0,l.expandTreePath)(t,"properties","valueType"),new u.default.List(new Array(T))).setIn((0,l.expandTreePath)(t,"properties","valueError"),new u.default.List(new Array(T))));var x=null==e.getIn((0,l.expandTreePath)(t,"properties","value",r+"")),M=!!e.getIn((0,l.expandTreePath)(t,"properties","valueError",r));return(L||m)&&(e=e.deleteIn((0,l.expandTreePath)(t,"properties","asyncListValues")),void 0===n?e=(e=e.setIn((0,l.expandTreePath)(t,"properties","value",r+""),void 0)).setIn((0,l.expandTreePath)(t,"properties","valueType",r+""),null):(s&&(e=e.setIn((0,l.expandTreePath)(t,"properties","asyncListValues"),s)),e=(e=e.setIn((0,l.expandTreePath)(t,"properties","value",r+""),n)).setIn((0,l.expandTreePath)(t,"properties","valueType",r+""),S),f=c&&!x&&!M)),m&&(e=e.setIn((0,l.expandTreePath)(t,"properties","valueError",r),P)),c&&(L&&M||!L&&!M)&&(e=e.setIn((0,l.expandTreePath)(t,"properties","valueError",r),P),f=!1),{tree:e,isInternalValueChange:f}},x=function(e,t,r,n,o){var i=o.settings.showErrorMessage,a=e.getIn((0,l.expandTreePath)(t,"properties","field"))||null,u=e.getIn((0,l.expandTreePath)(t,"properties","operator"))||null;if(e=(e=(e=e.setIn((0,l.expandTreePath)(t,"properties","value",r+""),void 0)).setIn((0,l.expandTreePath)(t,"properties","valueType",r+""),null)).deleteIn((0,l.expandTreePath)(t,"properties","asyncListValues")),i){e=e.setIn((0,l.expandTreePath)(t,"properties","valueError",r),null);var s=(0,d.getOperatorConfig)(o,u,a),c=u?(0,v.defaultValue)(s.cardinality,1):null;s.validateValues&&(e=e.setIn((0,l.expandTreePath)(t,"properties","valueError",c),null))}if(e=void 0===n?e.setIn((0,l.expandTreePath)(t,"properties","valueSrc",r+""),null):e.setIn((0,l.expandTreePath)(t,"properties","valueSrc",r+""),n),n){var f=e.getIn((0,l.expandTreePath)(t,"properties")),g=(0,p.getNewValueForFieldOp)(o,o,f,a,u,"valueSrc",!0),h=g.canReuseValue,y=g.newValue,m=g.newValueSrc,O=g.newValueType;g.newValueError;h||m.get(r)!=n||(e=(e=e.setIn((0,l.expandTreePath)(t,"properties","value",r+""),y.get(r))).setIn((0,l.expandTreePath)(t,"properties","valueType",r+""),O.get(r)))}return e},M=function(e,t,r,n){return e.setIn((0,l.expandTreePath)(t,"properties","operatorOptions",r),n)},D=function(e,t){return t.settings.canLeaveEmptyGroup||(e=(0,l.fixEmptyGroupsInTree)(e)),e},V=function(e,t,r){var n=null;if(e)if("field"===t){var o=(0,d.getFieldConfig)(r,e);o&&(n=o.type)}else if("func"===t){var i=e.get("func");if(i){var a=(0,d.getFuncConfig)(r,i);a&&(n=a.returnType)}}return n},U={dragging:{id:null,x:null,y:null,w:null,h:null},mousePos:{},dragStart:{id:null}},q=function(e,t){var r=[c.SET_TREE,c.SET_DRAG_START,c.SET_DRAG_PROGRESS,c.SET_DRAG_END],n=(0,y.default)((0,h.default)(e,["config","asyncListValues","__isInternal"]),v.applyToJS),o=e.path&&function(e,t){return e.getIn((0,l.expandTreePath)(t,"properties","field"))||null}(t.tree,e.path)||e.field;return o&&(n.affectedField=o),(r.includes(e.type)||0==e.type.indexOf("@@redux"))&&(n=null),n};t.default=function(e){var t=(0,s.defaultRoot)(e),r=Object.assign({},{tree:t},U);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,n=arguments.length>1?arguments[1]:void 0,o={__isInternalValueChange:void 0,__lastAction:void 0},i={},a=q(n,t);switch(n.type){case c.SET_TREE:i.tree=n.tree;break;case c.ADD_CASE_GROUP:i.tree=T(t.tree,n.path,"case_group",n.id,n.properties,n.config,n.children,n.meta);break;case c.ADD_GROUP:i.tree=T(t.tree,n.path,"group",n.id,n.properties,n.config,n.children,n.meta);break;case c.REMOVE_GROUP:i.tree=S(t.tree,n.path,n.config);break;case c.ADD_RULE:i.tree=I(t.tree,n.path,n.ruleType,n.id,n.properties,n.config,n.children);break;case c.REMOVE_RULE:i.tree=R(t.tree,n.path,n.config);break;case c.SET_CONJUNCTION:i.tree=N(t.tree,n.path,n.conjunction);break;case c.SET_NOT:i.tree=C(t.tree,n.path,n.not);break;case c.SET_FIELD:i.tree=j(t.tree,n.path,n.field,n.config);break;case c.SET_LOCK:i.tree=P(t.tree,n.path,n.lock);break;case c.SET_OPERATOR:i.tree=F(t.tree,n.path,n.operator,n.config);break;case c.SET_VALUE:var u=k(t.tree,n.path,n.delta,n.value,n.valueType,n.config,n.asyncListValues,n.__isInternal),l=u.tree,s=u.isInternalValueChange;i.__isInternalValueChange=s,i.tree=l;break;case c.SET_VALUE_SRC:i.tree=x(t.tree,n.path,n.delta,n.srcKey,n.config);break;case c.SET_OPERATOR_OPTION:i.tree=M(t.tree,n.path,n.name,n.value);break;case c.MOVE_ITEM:i.tree=w(t.tree,n.fromPath,n.toPath,n.placement,n.config);break;case c.SET_DRAG_START:i.dragStart=n.dragStart,i.dragging=n.dragging,i.mousePos=n.mousePos;break;case c.SET_DRAG_PROGRESS:i.mousePos=n.mousePos,i.dragging=n.dragging;break;case c.SET_DRAG_END:i.tree=D(t.tree,e),i=_(_({},i),U)}return a&&(i.__lastAction=a),_(_(_({},t),o),i)}}},6212:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.simulateAsyncFetch=t.mergeListValues=t.listValueToOption=t.getListValue=void 0;var o=n(r(22916)),i=n(r(66604)),a=n(r(15350)),u=r(10173);t.simulateAsyncFetch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return function(){var n=(0,a.default)(o.default.mark((function n(i,a,l){var s,c,f,d,p,v;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=null!=l.pageSize?l.pageSize:t,c=(0,u.listValuesToArray)(e).filter((function(e){var t=e.title;return null==i||-1!=t.toUpperCase().indexOf(i.toUpperCase())})),s?Math.ceil(c.length/s):0,f=a||0,s?Math.ceil(f/s):null,d=s?c.slice(f,f+s):c,p=s?f+d.length:null,v=!!s&&p<c.length,console.debug("simulateAsyncFetch",{search:i,offset:a,values:d,hasMore:v,filtered:c}),n.next=11,(0,u.sleep)(r);case 11:return n.abrupt("return",{values:d,hasMore:v});case 12:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}()};t.mergeListValues=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return e;var n=e||[],o=t.filter((function(e){return null==n.find((function(t){return t.value==e.value}))})),a=r?[].concat((0,i.default)(o),(0,i.default)(n)):[].concat((0,i.default)(n),(0,i.default)(o));return a};t.listValueToOption=function(e){if(null==e)return null;var t=e.title,r=e.value,n=e.disabled,o=e.groupTitle,i=e.renderTitle,a={title:t,value:r};return n&&(a.disabled=n),o&&(a.groupTitle=o),i&&(a.renderTitle=i),a};t.getListValue=function(e,t){return(0,u.mapListValues)(t,(function(t){return t.value===e?t:null})).filter((function(e){return null!==e})).shift()}},87242:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeField=t.getOperatorConfig=t.getFuncConfig=t.getFuncArgConfig=t.getFieldWidgetConfig=t.getFieldRawConfig=t.getFieldConfig=t.extendConfig=void 0;var o=n(r(75624)),i=n(r(66604)),a=n(r(63955)),u=n(r(9094)),l=r(96130),s=n(r(36365)),c=r(10173),f=r(75362),d=n(r(29521));function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t,r){var n=null,o=null;for(var i in t.mainWidget=t.mainWidget||Object.keys(t.widgets).filter((function(e){return"field"!=e&&"func"!=e}))[0],t.widgets){var u=t.widgets[i];if(u.operators){var l=u.operators;t.excludeOperators&&(l=l.filter((function(e){return!t.excludeOperators.includes(e)}))),n=(0,c.mergeArraysSmart)(n,l)}u.defaultOperator&&(o=u.defaultOperator),i==t.mainWidget&&(u=(0,a.default)({},{widgetProps:t.mainWidgetProps||{}},u)),t.widgets[i]=u}t.valueSources||(t.valueSources=Object.keys(r.settings.valueSourcesInfo));var s,f=p(t.valueSources);try{for(f.s();!(s=f.n()).done;){var d=s.value;"value"==d||t.widgets[d]||(t.widgets[d]={})}}catch(e){f.e(e)}finally{f.f()}!t.operators&&n&&(t.operators=Array.from(new Set(n))),!t.defaultOperator&&o&&(t.defaultOperator=o)}function h(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(var n in e)m(e[n],t,[].concat((0,i.default)(r),[n])),e[n].subfields&&h(e[n].subfields,t,[].concat((0,i.default)(r),[n]))}function y(e,t){if(e)for(var r in e){var n=e[r];for(var o in n.returnType&&(t._funcsCntByType[n.returnType]||(t._funcsCntByType[n.returnType]=0),t._funcsCntByType[n.returnType]++),n.args)m(n.args[o],t,null,!0);if(n.args){var i,a=!0,u=p(Object.keys(n.args).reverse());try{for(u.s();!(i=u.n()).done;){var l=i.value,s=n.args[l];!a&&s.isOptional&&delete s.isOptional,s.isOptional||(a=!1)}}catch(e){u.e(e)}finally{u.f()}}n.subfields&&y(n.subfields,t)}}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=null,u=null,l=t.types[e.type],s=e.excludeOperators||[];if("!struct"!=e.type&&"!group"!=e.type){if(!l)return void(e.disabled=!0);n||(t._fieldsCntByType[e.type]||(t._fieldsCntByType[e.type]=0),t._fieldsCntByType[e.type]++),e.widgets||(e.widgets={}),n&&(e._isFuncArg=!0),e.mainWidget=e.mainWidget||l.mainWidget,e.valueSources=e.valueSources||l.valueSources;var f=l.excludeOperators||[];for(var d in l.widgets){var p=e.widgets[d]||{},v=l.widgets[d]||{};n||function(){var t=[].concat((0,i.default)(s),(0,i.default)(f)),r=e.preferWidgets&&("field"==d||e.preferWidgets.includes(d))||t.length>0;if(p.operators){var n=p.operators.filter((function(e){return!t.includes(e)}));o=[].concat((0,i.default)(o||[]),(0,i.default)(n))}else if(r&&v.operators){var a=v.operators.filter((function(e){return!t.includes(e)}));o=[].concat((0,i.default)(o||[]),(0,i.default)(a))}p.defaultOperator&&(u=p.defaultOperator)}(),d==e.mainWidget&&(p=(0,a.default)({},{widgetProps:e.mainWidgetProps||{}},p)),e.widgets[d]=p}n||(!e.operators&&o&&(e.operators=Array.from(new Set(o))),!e.defaultOperator&&u&&(e.defaultOperator=u));var g=["listValues","allowCustomValues","validateValue"];e.fieldSettings||(e.fieldSettings={});for(var h=0,y=g;h<y.length;h++){var m=y[h];e[m]&&(e.fieldSettings[m]=e[m],delete e[m])}e.fieldSettings.listValues&&(e.fieldSettings.listValues=(0,c.normalizeListValues)(e.fieldSettings.listValues,e.type,e.fieldSettings))}var O=E(t,r);O&&(e.fieldName=O),r&&e.fieldName&&(t.__fieldNames[e.fieldName]=r)}t.extendConfig=function(e){return e.__extended||(e.settings=(0,a.default)({},l.settings,e.settings),e._fieldsCntByType={},e._funcsCntByType={},e.types=(0,d.default)(e.types),function(e,t){for(var r in e){g(r,e[r],t)}}(e.types,e),e.fields=(0,d.default)(e.fields),e.__fieldNames={},h(e.fields,e),e.funcs=(0,d.default)(e.funcs),y(e.funcs,e),s.default.locale(e.settings.locale.moment),Object.defineProperty(e,"__extended",{enumerable:!1,writable:!1,value:!0})),e};var O=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fields",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"subfields";if(!t)return null;if("!case_value"==t)return{type:"case_value",mainWidget:"case_value",widgets:{case_value:e.widgets.case_value}};var o=e.settings.fieldSeparator,i=Array.isArray(t)?t:t.split(o),a=e[r];if(!a)return null;for(var u=a,l=null,s=[],c=0;c<i.length;c++){var f=i[c];s.push(f);var d=s.join(o);l=u[d],c<i.length-1&&(l&&l[n]?(u=l[n],s=[]):l=null)}return l};t.getFieldRawConfig=O;var E=function(e,t){if(!t)return null;for(var r,n,o=e.settings.fieldSeparator,a=(0,i.default)(t),u=[];void 0!==(r=a.pop())&&a.length>0;)if(u.unshift(r),(n=O(e,a)).fieldName)return[n.fieldName].concat(u).join(o);return null};t.normalizeField=function(e,t){var r=e.settings.fieldSeparator,n=Array.isArray(t)?t.join(r):t;return e.__fieldNames[n]?e.__fieldNames[n].join(r):n};var b=function(e,t){if(!t)return null;var r=O(e,t,"funcs","subfields");return r||null};t.getFuncConfig=b;var _=function(e,t,r){var n=b(e,t);if(!n)return null;var o=n.args&&n.args[r]||null;if(!o)return null;var i=e.types[o.type]||{};return(0,u.default)({},i,o||{},(function(e,t,r,n,o,i){if(Array.isArray(e))return t}))};t.getFuncArgConfig=_;var T=function(e,t){if(!t)return null;if("object"==(0,o.default)(t)&&!t.func&&t.type)return t;if("object"==(0,o.default)(t)&&t.func&&t.arg)return _(e,t.func,t.arg);var r=O(e,t);if(!r)return null;var n=e.types[r.type]||{};return(0,u.default)({},n,r||{},(function(e,t,r,n,o,i){if(Array.isArray(e))return t}))};t.getFieldConfig=T;t.getOperatorConfig=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;var n=e.operators[t];if(r){var o=T(e,r),i=(0,f.getWidgetForFieldOp)(e,r,t),u=e.widgets[i]||{},l=(o&&o.widgets?o.widgets[i]:{})||{},s=(u.opProps||{})[t],c=(l.opProps||{})[t],d=(0,a.default)({},n,s,c);return d}return n};t.getFieldWidgetConfig=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!t)return null;if(!r&&!n&&"const"!=o&&"!case_value"!=t)return null;var i=T(e,t);n||(n=(0,f.getWidgetForFieldOp)(e,t,r,o));var u=e.widgets[n]||{},l=(i&&i.widgets?i.widgets[n]:{})||{},s=l.widgetProps||{},c=("value"==o||!o)&&i&&i.fieldSettings||{},d=(0,a.default)({},u,s,c);return d}},32951:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.defaultRuleProperties=t.defaultRule=t.defaultRoot=t.defaultOperatorOptions=t.defaultOperator=t.defaultItemProperties=t.defaultGroupProperties=t.defaultGroupConjunction=t.defaultField=t.defaultConjunction=void 0;var o=n(r(62764)),i=n(r(40745)),a=n(r(73172)),u=r(87242),l=r(75362);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"function"==typeof e.settings.defaultField?e.settings.defaultField(r):e.settings.defaultField||(t?(0,l.getFirstField)(e,r):null)};t.defaultField=f;var d=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=(0,u.getFieldConfig)(e,t),o=n&&n.operators||[],i=n&&n.defaultOperator;o.includes(i)||(i=null),!i&&r&&(i=(0,l.getFirstOperator)(e,t));var a="function"==typeof e.settings.defaultOperator?e.settings.defaultOperator(t,n):i;return a};t.defaultOperator=d;var p=function(e,t,r){var n=t?(0,u.getOperatorConfig)(e,t,r):null;return n&&n.options?new i.default.Map(n.options&&n.options.defaults||{}):null};t.defaultOperatorOptions=p;var v=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=null,u=null,s=e.settings,c=s.setDefaultFieldAndOp,v=s.showErrorMessage;o?(a=null==o||null===(t=o.properties)||void 0===t?void 0:t.field,u=null==o||null===(r=o.properties)||void 0===r?void 0:r.operator):c&&(a=f(e,!0,n),u=d(e,a));var g=new i.default.Map({field:a,operator:u,value:new i.default.List,valueSrc:new i.default.List,operatorOptions:p(e,u,a)});if(v&&(g=g.set("valueError",new i.default.List)),a&&u){var h=(0,l.getNewValueForFieldOp)(e,e,g,a,u,"operator",!1),y=h.newValue,m=h.newValueSrc,O=h.newValueType,E=h.newValueError;g=g.set("value",y).set("valueSrc",m).set("valueType",O),v&&(g=g.set("valueError",E))}return g};t.defaultRuleProperties=v;var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(t=(0,u.getFieldConfig)(e,t))&&t.conjunctions||Object.keys(e.conjunctions);return 1==r.length?r[0]:e.settings.defaultGroupConjunction||e.settings.defaultConjunction||r[0]};t.defaultGroupConjunction=g;t.defaultConjunction=function(e){return e.settings.defaultConjunction||Object.keys(e.conjunctions)[0]};var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new i.default.Map({conjunction:g(e,t),not:!1})};t.defaultGroupProperties=h;t.defaultItemProperties=function(e,t){var r;return t&&"group"==t.type?h(e,null==t||null===(r=t.properties)||void 0===r?void 0:r.field):v(e,null,t)};var y=function(e,t){return(0,o.default)({},e,new i.default.Map({type:"rule",id:e,properties:v(t)}))};t.defaultRule=y;t.defaultRoot=function(e){return e.tree?new i.default.Map(e.tree):new i.default.Map({type:"group",id:(0,a.default)(),children1:new i.default.OrderedMap(c({},y((0,a.default)(),e))),properties:h(e)})}},91593:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.sqlEmptyValue=t.spelImportConcat=t.spelFormatConcat=t.spelFixList=t.spelEscape=t.mongoEmptyValue=t.SqlString=void 0;var o=n(r(75624)),i=r(62211);t.SqlString=i,i.trim=function(e){return"'"==e.charAt(0)?e.substring(1,e.length-1):e},i.escapeLike=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=i.escape(e);return n="'"+(n=(t?"%":"")+(n=(n=i.trim(n)).replace(/[%_]/g,"\\$&"))+(r?"%":""))+"'"};t.sqlEmptyValue=function(e){var t="''",r=null==e?void 0:e.type;return"date"==r?t="'0000-00-00'":"datetime"==r?t="'0000-00-00 00:00'":"time"==r?t="'00:00'":"number"==r&&(t="0"),t};t.mongoEmptyValue=function(e){var t="";return"number"==(null==e?void 0:e.type)&&(t=0),t};var a=function(e){return"'"+e.replace(/'/g,"''")+"'"},u=function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=["int","float"];return e.map((function(e){if(null!=e){if("string"==typeof e)r="String";else{if("number"!=typeof e)throw new Error("spelEscape: Can't use value ".concat(e," in array"));r=Number.isInteger(e)?"int":"float"}if(t){if(t!=r){if(!i.includes(t)||!i.includes(r))throw new Error("spelEscape: Can't use different types in array: found ".concat(t," and ").concat(r));t="float"}}else t=r}})),t||(t="String"),n="float"==t?e.map((function(e){return l(e,!0)})):e.map((function(e){return l(e)})),o?"new ".concat(t,"[]{").concat(n.join(", "),"}"):"{".concat(n.join(", "),"}")};t.spelFixList=function(e){return"".concat(e,".?[true]")};var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e)return"null";switch((0,o.default)(e)){case"boolean":return e?"true":"false";case"number":if(!Number.isFinite(e)||isNaN(e))return;return e+(!Number.isInteger(e)||t?"f":"");case"object":if(Array.isArray(e))return u(e,r);throw new Error("spelEscape: Object is not supported");default:return a(e)}};t.spelEscape=l;t.spelFormatConcat=function(e){return e&&Array.isArray(e)&&e.length?e.map((function(e){return"const"==e.type?l(e.value):"property"==e.type?""+e.value:"variable"==e.type?"#"+e.value:void 0})).filter((function(e){return null!=e})).join(" + "):"null"};t.spelImportConcat=function(e){if(null==e)return[void 0,[]];var t=[];return[("case_value"==e.valueType?e.value:[e]).map((function(e){return"value"==e.valueSrc?null===e.value?void 0:{type:"const",value:e.value}:"field"==e.valueSrc?{type:e.isVariable?"variable":"property",value:e.value}:void t.push("Unsupported valueSrc ".concat(e.valueSrc," in concatenation"))})).filter((function(e){return null!=e})),t]}},84145:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.setFunc=t.setArgValueSrc=t.setArgValue=t.completeValue=t.completeFuncValue=void 0;var o=n(r(75624)),i=r(87242),a=r(75362),u=n(r(40745));var l=function(e){return"object"==(0,o.default)(e)&&null!==e&&!Array.isArray(e)},s=function(e,t,r){return"func"==t?c(e,r):e};t.completeValue=s;var c=function(e,t){return function(e){if(e){var r=e.get("func"),n=r&&(0,i.getFuncConfig)(t,r);if(n){var o=e,u=!1;for(var c in n.args){var d=n.args[c],p=d.valueSources,v=d.isOptional,g=d.defaultValue,h=(0,a.filterValueSourcesForField)(t,p,d),y=o.get("args"),m=1==h.length?h[0]:void 0,O=y?y.get(c):void 0,E=O?O.get("value"):void 0,b=(O?O.get("valueSrc"):void 0)||m;if(void 0!==E){var _=s(E,b,t);if(void 0===_)return;if(_!==E&&(o=o.setIn(["args",c,"value"],_)),u)return}else if(void 0===g||l(g)){if(!v)return;u=!0}else o=(o=o.setIn(["args",c,"value"],f(d))).setIn(["args",c,"valueSrc"],"value")}return o}}}(e)};t.completeFuncValue=c;t.setFunc=function(e,t,r){var n=r.settings.fieldSeparator;e=e||new u.default.Map,Array.isArray(t)&&(t=t.join(n)),e=(e=e.set("func",t)).set("args",new u.default.Map);var o=t&&(0,i.getFuncConfig)(r,t);if(o)for(var s in o.args){var c=o.args[s],d=c.valueSources,p=c.defaultValue,v=(0,a.filterValueSourcesForField)(r,d,c),g=v.length?v[0]:void 0,h=(p?l(p)&&p.func?"func":"value":void 0)||g;void 0!==p&&(e=e.setIn(["args",s,"value"],f(c))),h&&(e=e.setIn(["args",s,"valueSrc"],h))}return e};var f=function(e){var t=e.defaultValue;return l(t)&&!u.default.Map.isMap(t)&&t.func?u.default.fromJS(t,(function(e,t){return u.default.Iterable.isIndexed(t)?t.toList():t.toOrderedMap()})):t};t.setArgValue=function(e,t,r,n,o){if(e&&e.get("func")){e=e.setIn(["args",t,"value"],r);var i=n.valueSources,u=(0,a.filterValueSourcesForField)(o,i,n),l=1==u.length?u[0]:void 0;l&&(e=e.setIn(["args",t,"valueSrc"],l))}return e};t.setArgValueSrc=function(e,t,r,n,o){return e&&e.get("func")&&(e=e.setIn(["args",t],new u.default.Map({valueSrc:r}))),e}},13527:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.TreeUtils=t.ExportUtils=t.DefaultUtils=t.ConfigUtils=void 0,Object.defineProperty(t,"getSwitchValues",{enumerable:!0,get:function(){return c.getSwitchValues}}),Object.defineProperty(t,"simulateAsyncFetch",{enumerable:!0,get:function(){return a.simulateAsyncFetch}}),Object.defineProperty(t,"uuid",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"validateTree",{enumerable:!0,get:function(){return i.validateTree}});var i=r(59175),a=r(6212),u=n(r(73172)),l=p(r(87242));t.ConfigUtils=l;var s=p(r(32951));t.DefaultUtils=s;var c=p(r(92969));t.TreeUtils=c;var f=p(r(91593));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}t.ExportUtils=f},82363:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.useOnPropsChanged=t.pureShouldComponentUpdate=t.liteShouldComponentUpdate=t.bindActionCreators=void 0;var o=n(r(68404)),i=n(r(74937)),a=r(10173);t.liteShouldComponentUpdate=function(e,t){return function(r,n){var o=e.props,i=e.state,u=r!=o||n!=i;if(u&&i==n&&o!=r){var l=[];for(var s in r){var c=r[s]!=o[s];c&&("ignore"==t[s]?c=!1:"shallow_deep"==t[s]?c=!(0,a.shallowEqual)(r[s],o[s],!0):"shallow"==t[s]?c=!(0,a.shallowEqual)(r[s],o[s]):"function"==typeof t[s]&&(c=t[s](r[s],o[s],n))),c&&l.push(s)}l.length||(u=!1)}return u}};t.pureShouldComponentUpdate=function(e){return function(t,r){return!(0,a.shallowEqual)(e.props,t)||!(0,a.shallowEqual)(e.state,r)}};var u=function(){var e=o.default.version.split(".").map(parseInt.bind(null,10));return 16==e[0]&&e[1]>=3||e[0]>16};t.useOnPropsChanged=function(e){u?e.UNSAFE_componentWillReceiveProps=function(t){e.onPropsChanged(t)}:e.componentWillReceiveProps=function(t){e.onPropsChanged(t)}};t.bindActionCreators=function(e,t,r){return(0,i.default)(e,(function(e){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r(e.apply(void 0,[t].concat(o)))}}))}},75362:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.getWidgetsForFieldOp=t.getWidgetForFieldOp=t.getValueSourcesForFieldOp=t.getValueLabel=t.getOperatorsForField=t.getNewValueForFieldOp=t.getFuncPathLabels=t.getFirstOperator=t.getFirstField=t.getFieldPathLabels=t.getFieldPath=t.getFieldPartsConfigs=t.formatFieldName=t.filterValueSourcesForField=void 0;var o=n(r(75624)),i=n(r(66604)),a=n(r(16459)),u=r(87242),l=r(10173),s=n(r(40745)),c=r(59175),f=n(r(4161)),d=["select","multiselect","treeselect","treemultiselect"];t.getNewValueForFieldOp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,f=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];t||(t=e);var p=r.get("field"),v=r.get("operator"),g=r.get("value"),h=r.get("valueSrc",new s.default.List),O=r.get("valueType",new s.default.List),E=r.get("asyncListValues"),b=e.settings,_=b.convertableWidgets,T=b.clearValueOnChangeField,S=b.clearValueOnChangeOp,R=b.showErrorMessage,C=(0,u.getOperatorConfig)(e,o,n),P=o?(0,l.defaultValue)(C.cardinality,1):null,N=(0,u.getFieldConfig)(t,p),L=(0,u.getFieldConfig)(e,n),I=p&&v&&o&&null!=g&&(!i||"field"==i&&!T||"operator"==i&&!S)&&N&&L&&N.type==L.type;I&&d.includes(N.type)&&"field"==i&&(I=!1);for(var A=0;A<P;A++){var w=h.get(A)||null,j=m(t,p,v,w),F=m(e,n,o,w),k="value"==w?j:m(t,p,v,"value"),x="value"==w?F:m(e,n,o,"value"),M=x==k||(_[k]||[]).includes(x);M||(I=!1)}v!=o&&[v,o].includes("proximity")&&(I=!1);var D=(0,u.getFieldWidgetConfig)(e,n,o,null,h.first()),V=y(e,n,o),U={},q=Array.from({length:P},(function(){return null}));if(I)for(var W=function(t){var r=g.get(t),u=O.get(t)||null,l=h.get(t)||null,s=null!=V.find((function(e){return e==l}));!s&&t>0&&null==l&&(s=!0);var d=!f,p=E,v=(0,c.validateValue)(e,n,n,o,r,u,l,p,f,d),y=(0,a.default)(v,2),m=y[0],b=y[1],_=!m;if(!_&&R&&"field"!=i)q[t]=m;else{if(!s||!_)return I=!1,"break";f&&b!==r&&(U[t]=b)}},G=0;G<P;G++){var B=W(G);if("break"===B)break}var K=null,z=null,H=null,Y=null;if(K=new s.default.List(Array.from({length:P},(function(e,t){var r=void 0;if(I)t<g.size&&(r=g.get(t),void 0!==U[t]&&(r=U[t]));else if(1==P){var n;r=(0,l.getFirstDefined)([null==L?void 0:L.defaultValue,null==L||null===(n=L.fieldSettings)||void 0===n?void 0:n.defaultValue,null==D?void 0:D.defaultValue])}return r}))),z=new s.default.List(Array.from({length:P},(function(e,t){var r=null;return I?t<h.size&&(r=h.get(t)):(1==V.length||V.length>1)&&(r=V[0]),r}))),R){if(C&&C.validateValues&&z.toJS().filter((function(e){return"value"==e||null==e})).length==P){var J=D&&D.toJS?K.toJS().map((function(e){return D.toJS(e,D)})):K.toJS(),$=C.validateValues(J);R&&q.push($)}Y=new s.default.List(q)}return H=new s.default.List(Array.from({length:P},(function(e,t){var r=null;return I?t<O.size&&(r=O.get(t)):1==P&&D&&void 0!==D.type?r=D.type:1==P&&L&&void 0!==L.type&&(r="!group"==L.type?"number":L.type),r}))),{canReuseValue:I,newValue:K,newValueSrc:z,newValueType:H,newValueError:Y,operatorCardinality:P}};t.getFirstField=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.settings.fieldSeparator,n="string"==typeof t?t.split(r):t,o=t?(0,u.getFieldRawConfig)(e,t):e,i=o,a=null,l=[];do{var s=i===e?e.fields:i.subfields;if(!s||!Object.keys(s).length){i=a=null;break}a=Object.keys(s)[0],l.push(a),i=s[a]}while("!struct"==i.type||"!group"==i.type);return(n||[]).concat(l).join(r)};var p=function(e,t){var r=(0,u.getFieldConfig)(e,t);return r?r.operators:[]};t.getOperatorsForField=p;t.getFirstOperator=function(e,t){var r=p(e,t);return r?r[0]:null};t.getFieldPath=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;var n=t.settings.fieldSeparator,o=Array.isArray(e)?e:e.split(n);return r?o:o.map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return e.join(n)}))};t.getFuncPathLabels=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return v(e,t,r,"funcs","subfields")};var v=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fields",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"subfields";if(!e)return null;var a=t.settings.fieldSeparator,l=Array.isArray(e)?e:e.split(a),s=r?Array.isArray(r)?r:r.split(a):[];return l.slice(s.length).map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return[].concat((0,i.default)(s),(0,i.default)(e)).join(a)})).map((function(e){var r=(0,u.getFieldRawConfig)(t,e,n,o);return r&&r.label||r&&(0,f.default)(e.split(a))})).filter((function(e){return null!=e}))};t.getFieldPathLabels=v;t.getFieldPartsConfigs=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;var n=r&&(0,u.getFieldRawConfig)(t,r)||null,o=t.settings.fieldSeparator,a=Array.isArray(e)?e:e.split(o),l=r?Array.isArray(r)?r:r.split(o):[];return a.slice(l.length).map((function(e,t,r){return r.slice(0,t+1)})).map((function(e){return{part:[].concat((0,i.default)(l),(0,i.default)(e)).join(o),key:e[e.length-1]}})).map((function(e){var r=e.part;return{key:e.key,cnf:(0,u.getFieldRawConfig)(t,r)}})).map((function(e,t,r){return[e.key,e.cnf,t>0?r[t-1].cnf:n]}))};function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=[],a=[];if(!t)return{widgets:i,valueSrcs:a};var l="object"==(0,o.default)(t)&&(!!t.func&&!!t.arg||t._isFuncArg),s=(0,u.getFieldConfig)(e,t),c=r?e.operators[r]:null;if(s&&s.widgets){var f=function(o){var u=s.widgets[o],f=e.widgets[o].valueSrc||"value",d=!0;if("field"==o&&(d=d&&h(e,["field"],s).length>0),"func"==o&&(d=d&&h(e,["func"],s).length>0),"value"!=n||u.operators||l||"!case_value"==t||(d=!1),u.operators&&r&&(d=d&&-1!=u.operators.indexOf(r)),n&&n!=f&&"const"!=n&&(d=!1),c&&0==c.cardinality&&"value"!=f&&(d=!1),d){i.push(o);var p=s.valueSources&&-1!=s.valueSources.indexOf(f);c&&c.valueSources&&-1==c.valueSources.indexOf(f)&&(p=!1),p&&!a.find((function(e){return e==f}))&&a.push(f)}};for(var d in s.widgets)f(d)}var p=function(e){var t=0;return s.preferWidgets?s.preferWidgets.includes(e)&&(t+=10-s.preferWidgets.indexOf(e)):e==s.mainWidget&&(t+=100),"field"==e&&(t-=1),"func"==e&&(t-=2),t};return i.sort((function(e,t){return p(t)-p(e)})),{widgets:i,valueSrcs:a}}t.getValueLabel=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=t&&"object"==(0,o.default)(t)&&!!t.func&&!!t.arg,s=e.settings.showLabels,c=(0,u.getFieldConfig)(e,t),f=(0,u.getFieldWidgetConfig)(e,t,r,null,i)||{},d=(0,u.getOperatorConfig)(e,r,t)||{},p=a?1:d.cardinality,v=null;if(p>1){var g=f.valueLabels||d.valueLabels;g&&(v=g[n]),v&&"object"!=(0,o.default)(v)&&(v={label:v,placeholder:v}),v||(v={label:e.settings.valueLabel+" "+(n+1),placeholder:e.settings.valuePlaceholder+" "+(n+1)})}else{var h=f.valueLabel,y=f.valuePlaceholder;l&&(h||(h=c.label||t.arg),y||s||(y=c.label||t.arg)),v={label:h||e.settings.valueLabel,placeholder:y||e.settings.valuePlaceholder}}return v};t.getWidgetsForFieldOp=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=g(e,t,r,n),i=o.widgets;return i};var h=function(e,t,r){return r?t.filter((function(t){var n=!0;if("field"==t&&e._fieldsCntByType){var o=r._isFuncArg?0:1;n=n&&e._fieldsCntByType[r.type]>o}return"func"==t&&(e._funcsCntByType&&(n=n&&!!e._funcsCntByType[r.type]),r.funcs&&(n=n&&r.funcs.length>0)),n})):t};t.filterValueSourcesForField=h;var y=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=g(e,t,r,null),i=o.valueSrcs,a=h(e,i,n);return a};t.getValueSourcesForFieldOp=y;var m=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=g(e,t,r,n),i=o.widgets,a=null;return i.length&&(a=i[0]),a};t.getWidgetForFieldOp=m;t.formatFieldName=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e){var o=(0,u.getFieldConfig)(t,e)||{},a=t.settings.fieldSeparator,l=Array.isArray(e)?e:e.split(a),s=Array.isArray(e)?e.join(a):e;if(o.tableName){var c=(0,i.default)(l);c[0]=o.tableName,s=c.join(a)}if(o.fieldName&&(s=o.fieldName),n){var f=(0,u.getFieldConfig)(t,n)||{},d=n;f.fieldName&&(d=f.fieldName),0==s.indexOf(d+a)?s=s.slice((d+a).length):r.errors.push("Can't cut group ".concat(d," from field ").concat(s))}return s}}},10173:(e,t,r)=>{"use strict";var n=r(35493),o=r(75624);Object.defineProperty(t,"__esModule",{value:!0}),t.applyToJS=function(e){return S(e)?e.toJS():e},t.mapListValues=t.logger=t.listValuesToArray=t.isJsonLogic=t.isImmutable=t.immutableEqual=t.getValueInListValues=t.getTitleInListValues=t.getLogger=t.getItemInListValues=t.getFirstDefined=t.flatizeTreeData=t.escapeRegExp=t.eqSet=t.eqArrSet=t.defaultValue=t.defaultTreeDataMap=t.deepEqual=void 0,t.mergeArraysSmart=function(e,t){e||(e=[]);t||(t=[]);return t.map((function(t){return[t,e.indexOf(t)]})).map((function(e,t,r){var n=(0,i.default)(e,2),o=n[0];if(-1==n[1]){var a=r.slice(t+1),u=r.slice(0,t).reverse().find((function(e){var t=(0,i.default)(e,2);t[0];return-1!=t[1]})),l=a.find((function(e){var t=(0,i.default)(e,2);t[0];return-1!=t[1]}));return l?[o,"before",l[0]]:u?[o,"after",u[0]]:[o,"append",null]}return null})).filter((function(e){return null!==e})).reduce((function(e,t){var r=(0,i.default)(t,3),n=r[0],o=r[1],a=r[2],u=e.indexOf(a);return-1==e.indexOf(n)&&(u>-1?e.splice(u+("after"==o?1:0),0,n):e.splice("append"==o?1/0:0,0,n)),e}),e.slice())},t.shallowEqual=t.removePrefixPath=t.normalizeListValues=void 0,t.sleep=function(e){return new Promise((function(t){setTimeout(t,e)}))},t.toImmutableList=function(e){return S(e)?e:new l.default.List(e)},t.truncateString=void 0;var i=n(r(16459)),a=n(r(66604)),u=n(r(75624)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(40745));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.defaultValue=function(e,t){return void 0===e?t:e};t.truncateString=function(e,t,r){if(!t||e.length<=t)return e;var n=e.substr(0,t-1);return(r?n.substr(0,n.lastIndexOf(" ")):n)+"..."};t.immutableEqual=function(e,t){return e===t||e.equals(t)};t.deepEqual=function(e,t){return e===t||(l.Map.isMap(e)?e.equals(t):JSON.stringify(e)==JSON.stringify(t))};var d=function(e,t){if(e.size!==t.size)return!1;var r,n=c(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(!t.has(o))return!1}}catch(e){n.e(e)}finally{n.f()}return!0};t.eqSet=d;t.eqArrSet=function(e,t){return d(new Set(e),new Set(t))};var p=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||(Array.isArray(e)?v(e,t,r):l.Map.isMap(e)?e.equals(t):"object"==(0,u.default)(e)?g(e,t,r):e===t)};function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var o=0;o<n;o++){var i=r?p(e[o],t[o],r):e[o]===t[o];if(!i)return!1}return!0}function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),o=Object.keys(t),i=n.length;if(o.length!==i)return!1;for(var a=0;a<i;a++){var u=n[a],l=r?p(e[u],t[u],r):e[u]===t[u];if(!l)return!1}return!0}t.shallowEqual=p;t.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\/]/g,"\\$&")};var h=function(e){return"object"==(0,u.default)(e)&&null!==e},y=function(e,t){return h(e)?e:{value:e,title:void 0!==t?t:e}},m=function(e){if(!h(e))return e;if(Array.isArray(e))return e.map((function(e){return y(e)}));var t=[];for(var r in e){var n=e[r];t.push(y(r,n))}return t};t.listValuesToArray=m;var O=function(e,t){if(Array.isArray(e)){var r=e.map((function(e){return y(e)}));return r.find((function(e){return e.value===t}))||r.find((function(e){return"".concat(e.value)===t}))}return void 0!==e[t]?y(t,e[t]):void 0};t.getItemInListValues=O;t.getTitleInListValues=function(e,t){if(null==e)return t;var r=O(e,t);return void 0!==r?r.title:t};t.getValueInListValues=function(e,t){if(null==e)return t;var r=O(e,t);return void 0!==r?r.value:t};t.mapListValues=function(e,t){var r=[];if(Array.isArray(e)){var n,o=c(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=t(y(i));null!=a&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}}else for(var u in e){var l=t(y(u,e[u]));null!=l&&r.push(l)}return r};var E={id:"value",pId:"parent",rootPId:void 0};t.defaultTreeDataMap=E;var b=function(e){var t,r,n=E,o=function e(o,i,a){if(o.children){1==a&&(o[n.pId]=n.rootPId);var u,l=o.children.length,s=c(o.children);try{for(s.s();!(u=s.n()).done;){var f=u.value;f[n.pId]=o[n.id],t++,i.splice(t,0,f),r++,e(f,i,a+1)}}catch(e){s.e(e)}finally{s.f()}delete o.children,0==l&&(i.splice(t,1),t--,r--)}};if(Array.isArray(e))for(r=e.length,t=0;t<r;t++){var i=e[t];h(i)&&(void 0!==i[n.pId]&&i[n.pId]!=n.rootPId||o(i,e,1))}return e};t.flatizeTreeData=b;var _=function e(t,r){var n=E,o=O(t,r),i=o?o[n.pId]:void 0,u=i?t.find((function(e){return e[n.id]===i})):void 0;return u?[u.value].concat((0,a.default)(e(t,u.value))):[]},T=function(e,t){var r=E,n=O(e,t);return n?e.filter((function(e){return e[r.pId]===n[r.id]})).map((function(e){return e.value})):[]};t.normalizeListValues=function(e,t,r){var n=["treeselect","treemultiselect"].includes(t),o=["multiselect","treemultiselect"].includes(t);return n&&(e=m(e),e=function(e,t,r){var n,o=c(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.path=_(e,i.value),0!=t.treeSelectOnlyLeafs){var a=T(e,i.value);r||(i.selectable=0==a.length)}}}catch(e){o.e(e)}finally{o.f()}return e}(e=b(e),r,o)),e};t.removePrefixPath=function(e,t){if(!e)return e;for(var r=!0,n=0;n<t.length;n++){var o=t[n];if(void 0===e[n]||o!=e[n]){r=!1;break}}return r?e.slice(t.length):e};t.isJsonLogic=function(e){return"object"===(0,u.default)(e)&&null!==e&&!Array.isArray(e)&&1===Object.keys(e).length};var S=function(e){return"object"===(0,u.default)(e)&&null!==e&&"function"==typeof e.toJS};t.isImmutable=S;var R=function(){return process&&process.env&&!1},C=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null!=e?e:R();return t?console:{error:function(){},log:function(){},warn:function(){},debug:function(){},info:function(){}}};t.getLogger=C;t.getFirstDefined=function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0;r<t.length;r++){var n=t[r];if(void 0!==n){e=n;break}}return e};var P=C();t.logger=P},92969:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.removePathsInTree=t.removeIsLockedInTree=t.isEmptyTree=t.hasChildren=t.getTreeBadFields=t.getTotalRulesCountInTree=t.getTotalReordableNodesCountInTree=t.getSwitchValues=t.getLightTree=t.getItemByPath=t.getFlatTree=t.fixPathsInTree=t.fixEmptyGroupsInTree=t.expandTreeSubpath=t.expandTreePath=void 0;var o=n(r(66604)),i=n(r(62764)),a=n(r(40745)),u=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.interpose("children1").withMutations((function(e){return e.skip(1),e.push.apply(e,r),e}))};t.expandTreePath=u;t.expandTreeSubpath=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.interpose("children1").withMutations((function(e){return e.push.apply(e,r),e}))};t.getItemByPath=function(e,t){var r=new a.default.OrderedMap((0,i.default)({},e.get("id"),e)),n=e;return t.forEach((function(e){n=r.get(e),r=n.get("children1")})),n};t.removePathsInTree=function(e){var t=e;return function e(r,n){var o=n.push(r.get("id"));r.get("path")&&(t=t.removeIn(u(o,"path")));var i=r.get("children1");i&&i.map((function(t,r){e(t,o)}))}(e,new a.default.List),t};t.removeIsLockedInTree=function(e){var t=e;return function e(r,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=n.push(r.get("id")),a=r.getIn(["properties","isLocked"]);o&&a&&(t=t.deleteIn(u(i,"properties","isLocked")));var l=r.get("children1");l&&l.map((function(t,r){e(t,i,a||o)}))}(e,new a.default.List),t};t.fixPathsInTree=function(e){var t=e;return function e(r,n,o,i){if(r){var l=r.get("path"),s=r.get("id"),c=s||i,f=n.push(c);l&&l.equals(f)||(t=t.setIn(u(f,"path"),f)),s||(t=t.setIn(u(f,"id"),c));var d=r.get("children1");d&&("Map"==d.constructor.name&&(t=t.setIn(u(f,"children1"),new a.default.OrderedMap(d))),d.map((function(t,r){e(t,f,o+1,r)})))}}(e,new a.default.List,0),t};t.fixEmptyGroupsInTree=function(e){var t=e;return function e(r,n,o,i){if(!r)return!1;var a=r.get("id")||i,l=n.push(a),s=r.get("children1");if(s){var c=s.map((function(t,r){return e(t,l,o+1,r)})).reduce((function(e,t){return e&&t}),!0);if((0==s.size||c)&&o>0)return t=t.deleteIn(u(l)),!0}return!1}(e,new a.default.List,0),t};t.getFlatTree=function(e){var t=[],r={},n=0;!function e(o,i,a,u,l,s,c,f,d){var p=o.get("type"),v=o.get("collapsed"),g=o.get("id"),h=o.get("children1"),y=o.getIn(["properties","isLocked"]),m=h?h.map((function(e,t){return t})):null,O="rule_group"==p,E=!l&&(!h||O),b=t.length,_=n;if(t.push(g),a||(n+=1),c.height=(c.height||0)+1,r[g]={type:p,parent:i.length?i[i.length-1]:null,parentType:f,caseId:"case_group"==p?g:d,isDefaultCase:"case_group"==p&&!h,path:i.concat(g),lev:s,leaf:!h,index:b,id:g,children:m,leafsCount:0,_top:b,_height:S-b,top:a?null:_,height:R,bottom:(a?null:_)+R,collapsed:v,node:o,isLocked:y||u},h){var T={};h.map((function(t,r){e(t,i.concat(g),a||v,u||y,l||O,s+1,T,p,"case_group"==p?g:d)})),v||(c.height=(c.height||0)+(T.height||0))}d&&E&&r[d].leafsCount++;var S=t.length,R=c.height;Object.assign(r[g],{_height:S-b,height:R,bottom:(a?null:_)+R})}(e,[],!1,!1,!1,0,{},null,null);for(var o=0;o<t.length;o++){var i=o>0?t[o-1]:null,a=o<t.length-1?t[o+1]:null,u=r[t[o]];u.prev=i,u.next=a}return{flat:t,items:r}};t.getTotalReordableNodesCountInTree=function(e){if(!e)return-1;var t=0;return function e(r,n,o){var i,a,u;"function"==typeof r.get?(i=r.get("id"),a=r.get("children1"),u=r.get("type")):(i=r.id,a=r.children1,u=r.type),t++,a&&!("rule_group"==u)&&a.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),t-1};t.getTotalRulesCountInTree=function(e){if(!e)return-1;var t=0;return function e(r,n,o){var i,a,u;"function"==typeof r.get?(i=r.get("id"),a=r.get("children1"),u=r.get("type")):(i=r.id,a=r.children1,u=r.type),a&&!("rule_group"==u)?a.map((function(t,r){e(t,n.concat(i),o+1)})):t++}(e,[],0),t};t.getTreeBadFields=function(e){var t=[];return e&&function e(r,n,o){var i=r.get("id"),a=r.get("children1"),u=r.getIn(["properties","valueError"]),l=r.getIn(["properties","field"]);u&&u.size>0&&u.filter((function(e){return null!=e})).size>0&&t.push(l),a&&a.map((function(t,r){e(t,n.concat(i),o+1)}))}(e,[],0),Array.from(new Set(t))};t.getLightTree=function(e){var t=e;return function e(t,r){t.path&&delete t.path,r&&delete t.id;var n=t.properties;n&&null==n.operatorOptions&&delete n.operatorOptions;var o=t.children1;if(o)for(var i in o)e(o[i],i)}(e,null),t};t.getSwitchValues=function(e){var t=[],r=e.get("children1");return r&&r.map((function(e){var r,n=e.getIn(["properties","value"]);n&&1==n.size?(r=n.get(0),Array.isArray(r)&&0==r.length&&(r=null)):r=null,t=[].concat((0,o.default)(t),[r])})),t};t.isEmptyTree=function(e){return!e.get("children1")||0==e.get("children1").size};t.hasChildren=function(e,t){return e.getIn(u(t,"children1")).size>0}},73172:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=0;t.default=function(){var e=((new Date).getTime().toString(16)+"FF").substr(0,11);return"ssssssss-xxxx-4xxx-yxxx-x".replace(/[xys]/g,(function(e){var t="s"===e?Math.floor(16*Math.random()):15&r++;return("x"===e?t:3&t|8).toString(16)}))+e}},59175:(e,t,r)=>{"use strict";var n=r(35493);Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateTree=void 0;var o=n(r(66604)),i=n(r(16459)),a=n(r(75624)),u=r(87242),l=r(75362),s=r(10173),c=r(32951),f=n(r(50234)),d=r(40745),p=function(e,t){return function(e){return"object"==(0,a.default)(e)&&null!==e&&Array.isArray(e)?"array":(0,a.default)(e)}(e)==t||"number"==t&&!isNaN(e)};function v(e,t,r,n,o){var i=e.get("type"),a=e.get("children1");return("group"===i||"rule_group"===i||"case_group"==i||"switch_group"==i)&&a&&a.size?function(e,t,r,n,o){var i=o.removeEmptyGroups,a=e.get("id"),u=e.get("children1"),l=u;!a&&r&&(a=r,e=e.set("id",a),n.sanitized=!0);var s={};u=u.map((function(e,r){return v(e,t.concat(a),r,s,o)})),i&&(u=u.filter((function(e){return null!=e})));var c=s.sanitized||l.size!=u.size;!u.size&&i&&t.length&&(c=!0,e=void 0);c&&(n.sanitized=!0);c&&e&&(e=e.set("children1",u));return e}(e,t,r,n,o):"rule"===i?function(e,t,r,n,o){var i=o.removeIncompleteRules,a=o.config,f=o.oldConfig,d=a.settings.showErrorMessage,p=e.get("id"),v=e.get("properties"),g=v.get("field")||null,h=v.get("operator")||null,y=v.get("operatorOptions"),m=v.get("valueSrc"),O=v.get("value"),E=v.get("valueError"),b={field:g,operator:h,operatorOptions:y?y.toJS():{},valueSrc:m?m.toJS():null,value:O?O.toJS():null,valueError:E?E.toJS():null};g&&h&&O&&O.includes(void 0);!p&&r&&(p=r,e=e.set("id",p),n.sanitized=!0);var _=g?(0,u.getFieldConfig)(a,g):null;g&&!_&&(s.logger.warn("No config for field ".concat(g)),g=null);null==g&&(v=["operator","operatorOptions","valueSrc","value"].reduce((function(e,t){return e.delete(t)}),v),h=null);"range_between"!=h&&"range_not_between"!=h||(h="range_between"==h?"between":"not_between",console.info("Fixed operator ".concat(v.get("operator")," to ").concat(h)),v=v.set("operator",h));var T=h?(0,u.getOperatorConfig)(a,h,g):null;h&&!T&&(console.warn("No config for operator ".concat(h)),h=null);var S=g?(0,l.getOperatorsForField)(a,g):[];S?h&&-1==S.indexOf(h)&&("is_empty"==h||"is_not_empty"==h?(h="is_empty"==h?"is_null":"is_not_null",console.info("Fixed operator ".concat(v.get("operator")," to ").concat(h," for ").concat(g)),v=v.set("operator",h)):(console.warn("Operator ".concat(h," is not supported for field ").concat(g)),h=null)):(console.warn("Type of field ".concat(g," is not supported")),h=null);null==h&&(v=(v=(v=v.delete("operatorOptions")).delete("valueSrc")).delete("value"));y=v.get("operatorOptions");h&&(0,s.defaultValue)(T.cardinality,1);!h||y&&!T.options?(y=null,v=v.delete("operatorOptions")):h&&!y&&T.options&&(y=(0,c.defaultOperatorOptions)(a,h,g),v=v.set("operatorOptions",y));m=v.get("valueSrc"),O=v.get("value");var R=(0,l.getNewValueForFieldOp)(a,f,v,g,h,null,!0),C=R.newValue,P=R.newValueSrc,N=R.newValueError;O=C,m=P,E=N,v=(v=v.set("value",O)).set("valueSrc",m),d&&(v=v.set("valueError",E));var L={field:g,operator:h,operatorOptions:y?y.toJS():{},valueSrc:m?m.toJS():null,value:O?O.toJS():null,valueError:E?E.toJS():null},I=!(0,s.deepEqual)(b,L),A=g&&h&&O&&!O.includes(void 0);I&&(n.sanitized=!0);!A&&i?e=void 0:I&&(e=e.set("properties",v));return e}(e,0,r,n,o):e}t.validateTree=function(e,t,r,n,o,i){return void 0===o&&(o=r.settings.removeEmptyGroupsOnLoad),void 0===i&&(i=r.settings.removeIncompleteRulesOnLoad),v(e,[],null,{},{config:r,oldConfig:n,removeEmptyGroups:o,removeIncompleteRules:i})};var g=function(e,t,r,n,o,a,s,c){var d=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=arguments.length>9&&void 0!==arguments[9]&&arguments[9],v=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],g=null,h=o;if(null!=o){if("field"==s){var E=m(t,r,o,s,a,c,e,n,p,d),b=(0,i.default)(E,2);g=b[0],h=b[1]}else if("func"==s){var _=O(t,r,o,s,a,c,e,n,p,d),T=(0,i.default)(_,2);g=T[0],h=T[1]}else if("value"==s||!s){var S=y(t,r,o,s,a,c,e,n,p,d),R=(0,i.default)(S,2);g=R[0],h=R[1]}if(!g){(0,u.getFieldConfig)(e,r);var C=(0,l.getWidgetForFieldOp)(e,r,n,s),P=n?(0,u.getOperatorConfig)(e,n,r):null,N=(0,f.default)((0,u.getFieldWidgetConfig)(e,r,n,C,s),["factory"]),L="field"==s?(0,u.getFieldConfig)(e,o):null,I=N,A=N.validateValue;if("function"==typeof A){var w=[h,I,n,P];"field"==s&&w.push(L);var j=A.apply(void 0,w);"boolean"==typeof j?0==j&&(g="Invalid value"):g=j}}}return v&&g&&console.warn("[RAQB validate]","Field ".concat(r,": ").concat(g)),[g,g?o:h]};t.validateValue=g;var h=function(e,t){var r=d.List.isList(e)?e.toJS():e instanceof Array?(0,o.default)(e):void 0;if(r){for(var n=0;n<r.length;n++){var i=(0,s.getItemInListValues)(t,r[n]);if(null==i)return["Value ".concat(e[n]," is not in list of values"),r];r[n]=i.value}return[null,r]}var a=(0,s.getItemInListValues)(t,e);return null==a?["Value ".concat(e," is not in list of values"),e]:[null,e=a.value]},y=function(e,t,r,n,o,i,s){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(t){var f=(0,u.getFieldConfig)(s,t),d=(0,l.getWidgetForFieldOp)(s,t,c,n),v=s.widgets[d],g=v.type,y=v.jsType,m=f.fieldSettings;if(o!=g)return["Value should have type ".concat(g,", but got value of type ").concat(o),r];if(y&&!p(r,y)&&!m.listValues)return["Value should have JS type ".concat(y,", but got value of type ").concat((0,a.default)(r)),r];if(m){var O=i||m.listValues;if(O&&!m.allowCustomValues)return h(r,O);if(null!=m.min&&r<m.min)return["Value ".concat(r," < min ").concat(m.min),r];if(null!=m.max&&r>m.max)return["Value ".concat(r," > max ").concat(m.max),r]}}return[null,r]},m=function(e,t,r,n,o,i,l){var s=l.settings.fieldSeparator,c="object"==(0,a.default)(t)&&(null==t?void 0:t._isFuncArg),f=Array.isArray(e)?e.join(s):e,d=Array.isArray(r)?r.join(s):r,p=(0,u.getFieldConfig)(l,r);return p?d!=f||c?o&&o!=p.type?["Field ".concat(r," is of type ").concat(p.type,", but expected ").concat(o),r]:[null,r]:["Can't compare field ".concat(e," with itself"),r]:["Unknown field ".concat(r),r]},O=function(e,t,r,n,o,a,l){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=r;if(r){var p=r.get("func");if(p){var v=(0,u.getFuncConfig)(l,p);if(!v)return["Unknown function ".concat(p),r];if(o&&v.returnType!=o)return["Function ".concat(p," should return value of type ").concat(v.returnType,", but got ").concat(o),r];for(var h in v.args){var y=v.args[h],m=d.get("args"),O=m?m.get(h):void 0,E=(0,u.getFieldConfig)(l,y),b=O?O.get("value"):void 0,_=O?O.get("valueSrc"):void 0;if(void 0!==b){var T=g(l,e,E,s,b,y.type,_,a,f,c,!1),S=(0,i.default)(T,2),R=S[0],C=S[1];if(null!==R){if(!f)return["Invalid value of arg ".concat(h," for func ").concat(p,": ").concat(R),r];d=d.deleteIn(["args",h]),void 0!==y.defaultValue&&(d=(d=d.setIn(["args",h,"value"],y.defaultValue)).setIn(["args",h,"valueSrc"],"value"))}else C!==b&&(d=d.setIn(["args",h,"value"],C))}else if(c&&void 0===y.defaultValue&&!f)return["Value of arg ".concat(h," for func ").concat(p," is required"),r]}}}return[null,d]}},39574:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Provider:()=>c,ReactReduxContext:()=>o,batch:()=>Z.unstable_batchedUpdates,connect:()=>G,connectAdvanced:()=>R,createDispatchHook:()=>H,createSelectorHook:()=>$,createStoreHook:()=>K,shallowEqual:()=>P,useDispatch:()=>Y,useSelector:()=>X,useStore:()=>z});var n=r(68404),o=(r(59160),n.createContext(null));var i=function(e){e()},a=function(){return i};var u={notify:function(){},get:function(){return[]}};function l(e,t){var r,n=u;function o(){l.onStateChange&&l.onStateChange()}function i(){r||(r=t?t.addNestedSub(o):e.subscribe(o),n=function(){var e=a(),t=null,r=null;return{clear:function(){t=null,r=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],r=t;r;)e.push(r),r=r.next;return e},subscribe:function(e){var n=!0,o=r={callback:e,next:null,prev:r};return o.prev?o.prev.next=o:t=o,function(){n&&null!==t&&(n=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var l={addNestedSub:function(e){return i(),n.subscribe(e)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(r)},trySubscribe:i,tryUnsubscribe:function(){r&&(r(),r=void 0,n.clear(),n=u)},getListeners:function(){return n}};return l}var s="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect;const c=function(e){var t=e.store,r=e.context,i=e.children,a=(0,n.useMemo)((function(){var e=l(t);return{store:t,subscription:e}}),[t]),u=(0,n.useMemo)((function(){return t.getState()}),[t]);s((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,u]);var c=r||o;return n.createElement(c.Provider,{value:a},i)};var f=r(39803),d=r(36558),p=r(24420),v=r.n(p),g=r(2459),h=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],y=["reactReduxForwardedRef"],m=[],O=[null,null];function E(e,t){var r=e[1];return[t.payload,r+1]}function b(e,t,r){s((function(){return e.apply(void 0,t)}),r)}function _(e,t,r,n,o,i,a){e.current=n,t.current=o,r.current=!1,i.current&&(i.current=null,a())}function T(e,t,r,n,o,i,a,u,l,s){if(e){var c=!1,f=null,d=function(){if(!c){var e,r,d=t.getState();try{e=n(d,o.current)}catch(e){r=e,f=e}r||(f=null),e===i.current?a.current||l():(i.current=e,u.current=e,a.current=!0,s({type:"STORE_UPDATED",payload:{error:r}}))}};r.onStateChange=d,r.trySubscribe(),d();return function(){if(c=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f}}}var S=function(){return[null,0]};function R(e,t){void 0===t&&(t={});var r=t,i=r.getDisplayName,a=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,u=r.methodName,s=void 0===u?"connectAdvanced":u,c=r.renderCountProp,p=void 0===c?void 0:c,R=r.shouldHandleStateChanges,C=void 0===R||R,P=r.storeKey,N=void 0===P?"store":P,L=(r.withRef,r.forwardRef),I=void 0!==L&&L,A=r.context,w=void 0===A?o:A,j=(0,d.Z)(r,h),F=w;return function(t){var r=t.displayName||t.name||"Component",o=a(r),i=(0,f.Z)({},j,{getDisplayName:a,methodName:s,renderCountProp:p,shouldHandleStateChanges:C,storeKey:N,displayName:o,wrappedComponentName:r,WrappedComponent:t}),u=j.pure;var c=u?n.useMemo:function(e){return e()};function h(r){var o=(0,n.useMemo)((function(){var e=r.reactReduxForwardedRef,t=(0,d.Z)(r,y);return[r.context,e,t]}),[r]),a=o[0],u=o[1],s=o[2],p=(0,n.useMemo)((function(){return a&&a.Consumer&&(0,g.isContextConsumer)(n.createElement(a.Consumer,null))?a:F}),[a,F]),v=(0,n.useContext)(p),h=Boolean(r.store)&&Boolean(r.store.getState)&&Boolean(r.store.dispatch);Boolean(v)&&Boolean(v.store);var R=h?r.store:v.store,P=(0,n.useMemo)((function(){return function(t){return e(t.dispatch,i)}(R)}),[R]),N=(0,n.useMemo)((function(){if(!C)return O;var e=l(R,h?null:v.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[R,h,v]),L=N[0],I=N[1],A=(0,n.useMemo)((function(){return h?v:(0,f.Z)({},v,{subscription:L})}),[h,v,L]),w=(0,n.useReducer)(E,m,S),j=w[0][0],k=w[1];if(j&&j.error)throw j.error;var x=(0,n.useRef)(),M=(0,n.useRef)(s),D=(0,n.useRef)(),V=(0,n.useRef)(!1),U=c((function(){return D.current&&s===M.current?D.current:P(R.getState(),s)}),[R,j,s]);b(_,[M,x,V,s,U,D,I]),b(T,[C,R,L,P,M,x,V,D,I,k],[R,L,P]);var q=(0,n.useMemo)((function(){return n.createElement(t,(0,f.Z)({},U,{ref:u}))}),[u,t,U]);return(0,n.useMemo)((function(){return C?n.createElement(p.Provider,{value:A},q):q}),[p,q,A])}var R=u?n.memo(h):h;if(R.WrappedComponent=t,R.displayName=h.displayName=o,I){var P=n.forwardRef((function(e,t){return n.createElement(R,(0,f.Z)({},e,{reactReduxForwardedRef:t}))}));return P.displayName=o,P.WrappedComponent=t,v()(P,t)}return v()(R,t)}}function C(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function P(e,t){if(C(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(t,r[o])||!C(e[r[o]],t[r[o]]))return!1;return!0}function N(e){return function(t,r){var n=e(t,r);function o(){return n}return o.dependsOnOwnProps=!1,o}}function L(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function I(e,t){return function(t,r){r.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=L(e);var o=n(t,r);return"function"==typeof o&&(n.mapToProps=o,n.dependsOnOwnProps=L(o),o=n(t,r)),o},n}}const A=[function(e){return"function"==typeof e?I(e):void 0},function(e){return e?void 0:N((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?N((function(t){return function(e,t){var r={},n=function(n){var o=e[n];"function"==typeof o&&(r[n]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)n(o);return r}(e,t)})):void 0}];const w=[function(e){return"function"==typeof e?I(e):void 0},function(e){return e?void 0:N((function(){return{}}))}];function j(e,t,r){return(0,f.Z)({},r,e,t)}const F=[function(e){return"function"==typeof e?function(e){return function(t,r){r.displayName;var n,o=r.pure,i=r.areMergedPropsEqual,a=!1;return function(t,r,u){var l=e(t,r,u);return a?o&&i(l,n)||(n=l):(a=!0,n=l),n}}}(e):void 0},function(e){return e?void 0:function(){return j}}];var k=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function x(e,t,r,n){return function(o,i){return r(e(o,i),t(n,i),i)}}function M(e,t,r,n,o){var i,a,u,l,s,c=o.areStatesEqual,f=o.areOwnPropsEqual,d=o.areStatePropsEqual,p=!1;function v(o,p){var v,g,h=!f(p,a),y=!c(o,i);return i=o,a=p,h&&y?(u=e(i,a),t.dependsOnOwnProps&&(l=t(n,a)),s=r(u,l,a)):h?(e.dependsOnOwnProps&&(u=e(i,a)),t.dependsOnOwnProps&&(l=t(n,a)),s=r(u,l,a)):y?(v=e(i,a),g=!d(v,u),u=v,g&&(s=r(u,l,a)),s):s}return function(o,c){return p?v(o,c):(u=e(i=o,a=c),l=t(n,a),s=r(u,l,a),p=!0,s)}}function D(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,o=t.initMergeProps,i=(0,d.Z)(t,k),a=r(e,i),u=n(e,i),l=o(e,i);return(i.pure?M:x)(a,u,l,e,i)}var V=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function U(e,t,r){for(var n=t.length-1;n>=0;n--){var o=t[n](e);if(o)return o}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+n.wrappedComponentName+".")}}function q(e,t){return e===t}function W(e){var t=void 0===e?{}:e,r=t.connectHOC,n=void 0===r?R:r,o=t.mapStateToPropsFactories,i=void 0===o?w:o,a=t.mapDispatchToPropsFactories,u=void 0===a?A:a,l=t.mergePropsFactories,s=void 0===l?F:l,c=t.selectorFactory,p=void 0===c?D:c;return function(e,t,r,o){void 0===o&&(o={});var a=o,l=a.pure,c=void 0===l||l,v=a.areStatesEqual,g=void 0===v?q:v,h=a.areOwnPropsEqual,y=void 0===h?P:h,m=a.areStatePropsEqual,O=void 0===m?P:m,E=a.areMergedPropsEqual,b=void 0===E?P:E,_=(0,d.Z)(a,V),T=U(e,i,"mapStateToProps"),S=U(t,u,"mapDispatchToProps"),R=U(r,s,"mergeProps");return n(p,(0,f.Z)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:T,initMapDispatchToProps:S,initMergeProps:R,pure:c,areStatesEqual:g,areOwnPropsEqual:y,areStatePropsEqual:O,areMergedPropsEqual:b},_))}}const G=W();function B(){return(0,n.useContext)(o)}function K(e){void 0===e&&(e=o);var t=e===o?B:function(){return(0,n.useContext)(e)};return function(){return t().store}}var z=K();function H(e){void 0===e&&(e=o);var t=e===o?z:K(e);return function(){return t().dispatch}}var Y=H(),J=function(e,t){return e===t};function $(e){void 0===e&&(e=o);var t=e===o?B:function(){return(0,n.useContext)(e)};return function(e,r){void 0===r&&(r=J);var o=t(),i=function(e,t,r,o){var i,a=(0,n.useReducer)((function(e){return e+1}),0)[1],u=(0,n.useMemo)((function(){return l(r,o)}),[r,o]),c=(0,n.useRef)(),f=(0,n.useRef)(),d=(0,n.useRef)(),p=(0,n.useRef)(),v=r.getState();try{if(e!==f.current||v!==d.current||c.current){var g=e(v);i=void 0!==p.current&&t(g,p.current)?p.current:g}else i=p.current}catch(e){throw c.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+c.current.stack+"\n\n"),e}return s((function(){f.current=e,d.current=v,p.current=i,c.current=void 0})),s((function(){function e(){try{var e=r.getState();if(e===d.current)return;var n=f.current(e);if(t(n,p.current))return;p.current=n,d.current=e}catch(e){c.current=e}a()}return u.onStateChange=e,u.trySubscribe(),e(),function(){return u.tryUnsubscribe()}}),[r,u]),i}(e,r,o.store,o.subscription);return(0,n.useDebugValue)(i),i}}var Q,X=$(),Z=r(97394);Q=Z.unstable_batchedUpdates,i=Q},68669:(e,t,r)=>{"use strict";var n=r(9683),o=r(68404),i=n.__importDefault(r(17415));t.Z=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=[]);var n=i.default(e,t),a=n[0],u=n[1],l=n[2];return o.useEffect(l,r),[a,u]}},17415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(68404);t.default=function(e,t){void 0===t&&(t=0);var r=n.useRef(!1),o=n.useRef(),i=n.useRef(e),a=n.useCallback((function(){return r.current}),[]),u=n.useCallback((function(){r.current=!1,o.current&&clearTimeout(o.current),o.current=setTimeout((function(){r.current=!0,i.current()}),t)}),[t]),l=n.useCallback((function(){r.current=null,o.current&&clearTimeout(o.current)}),[]);return n.useEffect((function(){i.current=e}),[e]),n.useEffect((function(){return u(),l}),[t]),[a,l,u]}},29521:(e,t,r)=>{var n=r(76345).Buffer,o=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,r,o;try{t=Map}catch(e){t=function(){}}try{r=Set}catch(e){r=function(){}}try{o=Promise}catch(e){o=function(){}}function i(a,l,s,c,f){"object"==typeof l&&(s=l.depth,c=l.prototype,f=l.includeNonEnumerable,l=l.circular);var d=[],p=[],v=void 0!==n;return void 0===l&&(l=!0),void 0===s&&(s=1/0),function a(s,g){if(null===s)return null;if(0===g)return s;var h,y;if("object"!=typeof s)return s;if(e(s,t))h=new t;else if(e(s,r))h=new r;else if(e(s,o))h=new o((function(e,t){s.then((function(t){e(a(t,g-1))}),(function(e){t(a(e,g-1))}))}));else if(i.__isArray(s))h=[];else if(i.__isRegExp(s))h=new RegExp(s.source,u(s)),s.lastIndex&&(h.lastIndex=s.lastIndex);else if(i.__isDate(s))h=new Date(s.getTime());else{if(v&&n.isBuffer(s))return h=n.allocUnsafe?n.allocUnsafe(s.length):new n(s.length),s.copy(h),h;e(s,Error)?h=Object.create(s):void 0===c?(y=Object.getPrototypeOf(s),h=Object.create(y)):(h=Object.create(c),y=c)}if(l){var m=d.indexOf(s);if(-1!=m)return p[m];d.push(s),p.push(h)}for(var O in e(s,t)&&s.forEach((function(e,t){var r=a(t,g-1),n=a(e,g-1);h.set(r,n)})),e(s,r)&&s.forEach((function(e){var t=a(e,g-1);h.add(t)})),s){var E;y&&(E=Object.getOwnPropertyDescriptor(y,O)),E&&null==E.set||(h[O]=a(s[O],g-1))}if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(s);for(O=0;O<b.length;O++){var _=b[O];(!(S=Object.getOwnPropertyDescriptor(s,_))||S.enumerable||f)&&(h[_]=a(s[_],g-1),S.enumerable||Object.defineProperty(h,_,{enumerable:!1}))}}if(f){var T=Object.getOwnPropertyNames(s);for(O=0;O<T.length;O++){var S,R=T[O];(S=Object.getOwnPropertyDescriptor(s,R))&&S.enumerable||(h[R]=a(s[R],g-1),Object.defineProperty(h,R,{enumerable:!1}))}}return h}(a,s)}function a(e){return Object.prototype.toString.call(e)}function u(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=a,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===a(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===a(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===a(e)},i.__getRegExpFlags=u,i}();e.exports&&(e.exports=o)},40745:function(e){e.exports=function(){"use strict";var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function r(e){return a(e)?e:H(e)}function n(e){return u(e)?e:Y(e)}function o(e){return l(e)?e:J(e)}function i(e){return a(e)&&!s(e)?e:$(e)}function a(e){return!(!e||!e[f])}function u(e){return!(!e||!e[d])}function l(e){return!(!e||!e[p])}function s(e){return u(e)||l(e)}function c(e){return!(!e||!e[v])}t(n,r),t(o,r),t(i,r),r.isIterable=a,r.isKeyed=u,r.isIndexed=l,r.isAssociative=s,r.isOrdered=c,r.Keyed=n,r.Indexed=o,r.Set=i;var f="@@__IMMUTABLE_ITERABLE__@@",d="@@__IMMUTABLE_KEYED__@@",p="@@__IMMUTABLE_INDEXED__@@",v="@@__IMMUTABLE_ORDERED__@@",g="delete",h=5,y=1<<h,m=y-1,O={},E={value:!1},b={value:!1};function _(e){return e.value=!1,e}function T(e){e&&(e.value=!0)}function S(){}function R(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),o=0;o<r;o++)n[o]=e[o+t];return n}function C(e){return void 0===e.size&&(e.size=e.__iterate(N)),e.size}function P(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?C(e)+t:t}function N(){return!0}function L(e,t,r){return(0===e||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function I(e,t){return w(e,t,0)}function A(e,t){return w(e,t,t)}function w(e,t,r){return void 0===e?r:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var j=0,F=1,k=2,x="function"==typeof Symbol&&Symbol.iterator,M="@@iterator",D=x||M;function V(e){this.next=e}function U(e,t,r,n){var o=0===e?t:1===e?r:[t,r];return n?n.value=o:n={value:o,done:!1},n}function q(){return{value:void 0,done:!0}}function W(e){return!!K(e)}function G(e){return e&&"function"==typeof e.next}function B(e){var t=K(e);return t&&t.call(e)}function K(e){var t=e&&(x&&e[x]||e[M]);if("function"==typeof t)return t}function z(e){return e&&"number"==typeof e.length}function H(e){return null==e?ae():a(e)?e.toSeq():se(e)}function Y(e){return null==e?ae().toKeyedSeq():a(e)?u(e)?e.toSeq():e.fromEntrySeq():ue(e)}function J(e){return null==e?ae():a(e)?u(e)?e.entrySeq():e.toIndexedSeq():le(e)}function $(e){return(null==e?ae():a(e)?u(e)?e.entrySeq():e:le(e)).toSetSeq()}V.prototype.toString=function(){return"[Iterator]"},V.KEYS=j,V.VALUES=F,V.ENTRIES=k,V.prototype.inspect=V.prototype.toSource=function(){return this.toString()},V.prototype[D]=function(){return this},t(H,r),H.of=function(){return H(arguments)},H.prototype.toSeq=function(){return this},H.prototype.toString=function(){return this.__toString("Seq {","}")},H.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},H.prototype.__iterate=function(e,t){return fe(this,e,t,!0)},H.prototype.__iterator=function(e,t){return de(this,e,t,!0)},t(Y,H),Y.prototype.toKeyedSeq=function(){return this},t(J,H),J.of=function(){return J(arguments)},J.prototype.toIndexedSeq=function(){return this},J.prototype.toString=function(){return this.__toString("Seq [","]")},J.prototype.__iterate=function(e,t){return fe(this,e,t,!1)},J.prototype.__iterator=function(e,t){return de(this,e,t,!1)},t($,H),$.of=function(){return $(arguments)},$.prototype.toSetSeq=function(){return this},H.isSeq=ie,H.Keyed=Y,H.Set=$,H.Indexed=J;var Q,X,Z,ee="@@__IMMUTABLE_SEQ__@@";function te(e){this._array=e,this.size=e.length}function re(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function ne(e){this._iterable=e,this.size=e.length||e.size}function oe(e){this._iterator=e,this._iteratorCache=[]}function ie(e){return!(!e||!e[ee])}function ae(){return Q||(Q=new te([]))}function ue(e){var t=Array.isArray(e)?new te(e).fromEntrySeq():G(e)?new oe(e).fromEntrySeq():W(e)?new ne(e).fromEntrySeq():"object"==typeof e?new re(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function le(e){var t=ce(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function se(e){var t=ce(e)||"object"==typeof e&&new re(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function ce(e){return z(e)?new te(e):G(e)?new oe(e):W(e)?new ne(e):void 0}function fe(e,t,r,n){var o=e._cache;if(o){for(var i=o.length-1,a=0;a<=i;a++){var u=o[r?i-a:a];if(!1===t(u[1],n?u[0]:a,e))return a+1}return a}return e.__iterateUncached(t,r)}function de(e,t,r,n){var o=e._cache;if(o){var i=o.length-1,a=0;return new V((function(){var e=o[r?i-a:a];return a++>i?q():U(t,n?e[0]:a-1,e[1])}))}return e.__iteratorUncached(t,r)}function pe(e,t){return t?ve(t,e,"",{"":e}):ge(e)}function ve(e,t,r,n){return Array.isArray(t)?e.call(n,r,J(t).map((function(r,n){return ve(e,r,n,t)}))):he(t)?e.call(n,r,Y(t).map((function(r,n){return ve(e,r,n,t)}))):t}function ge(e){return Array.isArray(e)?J(e).map(ge).toList():he(e)?Y(e).map(ge).toMap():e}function he(e){return e&&(e.constructor===Object||void 0===e.constructor)}function ye(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if((e=e.valueOf())===(t=t.valueOf())||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function me(e,t){if(e===t)return!0;if(!a(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||u(e)!==u(t)||l(e)!==l(t)||c(e)!==c(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!s(e);if(c(e)){var n=e.entries();return t.every((function(e,t){var o=n.next().value;return o&&ye(o[1],e)&&(r||ye(o[0],t))}))&&n.next().done}var o=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{o=!0;var i=e;e=t,t=i}var f=!0,d=t.__iterate((function(t,n){if(r?!e.has(t):o?!ye(t,e.get(n,O)):!ye(e.get(n,O),t))return f=!1,!1}));return f&&e.size===d}function Oe(e,t){if(!(this instanceof Oe))return new Oe(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(X)return X;X=this}}function Ee(e,t){if(!e)throw new Error(t)}function be(e,t,r){if(!(this instanceof be))return new be(e,t,r);if(Ee(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1),0===this.size){if(Z)return Z;Z=this}}function _e(){throw TypeError("Abstract")}function Te(){}function Se(){}function Re(){}H.prototype[ee]=!0,t(te,J),te.prototype.get=function(e,t){return this.has(e)?this._array[P(this,e)]:t},te.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length-1,o=0;o<=n;o++)if(!1===e(r[t?n-o:o],o,this))return o+1;return o},te.prototype.__iterator=function(e,t){var r=this._array,n=r.length-1,o=0;return new V((function(){return o>n?q():U(e,o,r[t?n-o++:o++])}))},t(re,Y),re.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},re.prototype.has=function(e){return this._object.hasOwnProperty(e)},re.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,o=n.length-1,i=0;i<=o;i++){var a=n[t?o-i:i];if(!1===e(r[a],a,this))return i+1}return i},re.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,o=n.length-1,i=0;return new V((function(){var a=n[t?o-i:i];return i++>o?q():U(e,a,r[a])}))},re.prototype[v]=!0,t(ne,J),ne.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=B(this._iterable),n=0;if(G(r))for(var o;!(o=r.next()).done&&!1!==e(o.value,n++,this););return n},ne.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=B(this._iterable);if(!G(r))return new V(q);var n=0;return new V((function(){var t=r.next();return t.done?t:U(e,n++,t.value)}))},t(oe,J),oe.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var r,n=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(!1===e(o[i],i++,this))return i;for(;!(r=n.next()).done;){var a=r.value;if(o[i]=a,!1===e(a,i++,this))break}return i},oe.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,o=0;return new V((function(){if(o>=n.length){var t=r.next();if(t.done)return t;n[o]=t.value}return U(e,o,n[o++])}))},t(Oe,J),Oe.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Oe.prototype.get=function(e,t){return this.has(e)?this._value:t},Oe.prototype.includes=function(e){return ye(this._value,e)},Oe.prototype.slice=function(e,t){var r=this.size;return L(e,t,r)?this:new Oe(this._value,A(t,r)-I(e,r))},Oe.prototype.reverse=function(){return this},Oe.prototype.indexOf=function(e){return ye(this._value,e)?0:-1},Oe.prototype.lastIndexOf=function(e){return ye(this._value,e)?this.size:-1},Oe.prototype.__iterate=function(e,t){for(var r=0;r<this.size;r++)if(!1===e(this._value,r,this))return r+1;return r},Oe.prototype.__iterator=function(e,t){var r=this,n=0;return new V((function(){return n<r.size?U(e,n++,r._value):q()}))},Oe.prototype.equals=function(e){return e instanceof Oe?ye(this._value,e._value):me(e)},t(be,J),be.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},be.prototype.get=function(e,t){return this.has(e)?this._start+P(this,e)*this._step:t},be.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},be.prototype.slice=function(e,t){return L(e,t,this.size)?this:(e=I(e,this.size),(t=A(t,this.size))<=e?new be(0,0):new be(this.get(e,this._end),this.get(t,this._end),this._step))},be.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},be.prototype.lastIndexOf=function(e){return this.indexOf(e)},be.prototype.__iterate=function(e,t){for(var r=this.size-1,n=this._step,o=t?this._start+r*n:this._start,i=0;i<=r;i++){if(!1===e(o,i,this))return i+1;o+=t?-n:n}return i},be.prototype.__iterator=function(e,t){var r=this.size-1,n=this._step,o=t?this._start+r*n:this._start,i=0;return new V((function(){var a=o;return o+=t?-n:n,i>r?q():U(e,i++,a)}))},be.prototype.equals=function(e){return e instanceof be?this._start===e._start&&this._end===e._end&&this._step===e._step:me(this,e)},t(_e,r),t(Te,_e),t(Se,_e),t(Re,_e),_e.Keyed=Te,_e.Indexed=Se,_e.Set=Re;var Ce="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var r=65535&(e|=0),n=65535&(t|=0);return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0};function Pe(e){return e>>>1&1073741824|3221225471&e}function Ne(e){if(!1===e||null==e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null==e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if(e!=e||e===1/0)return 0;var r=0|e;for(r!==e&&(r^=4294967295*e);e>4294967295;)r^=e/=4294967295;return Pe(r)}if("string"===t)return e.length>Ve?Le(e):Ie(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return Ae(e);if("function"==typeof e.toString)return Ie(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function Le(e){var t=We[e];return void 0===t&&(t=Ie(e),qe===Ue&&(qe=0,We={}),qe++,We[e]=t),t}function Ie(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return Pe(t)}function Ae(e){var t;if(xe&&void 0!==(t=ke.get(e)))return t;if(void 0!==(t=e[De]))return t;if(!je){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[De]))return t;if(void 0!==(t=Fe(e)))return t}if(t=++Me,1073741824&Me&&(Me=0),xe)ke.set(e,t);else{if(void 0!==we&&!1===we(e))throw new Error("Non-extensible objects are not allowed as keys.");if(je)Object.defineProperty(e,De,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[De]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[De]=t}}return t}var we=Object.isExtensible,je=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}();function Fe(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}var ke,xe="function"==typeof WeakMap;xe&&(ke=new WeakMap);var Me=0,De="__immutablehash__";"function"==typeof Symbol&&(De=Symbol(De));var Ve=16,Ue=255,qe=0,We={};function Ge(e){Ee(e!==1/0,"Cannot perform this action with an infinite size.")}function Be(e){return null==e?ot():Ke(e)&&!c(e)?e:ot().withMutations((function(t){var r=n(e);Ge(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}function Ke(e){return!(!e||!e[He])}t(Be,Te),Be.of=function(){var t=e.call(arguments,0);return ot().withMutations((function(e){for(var r=0;r<t.length;r+=2){if(r+1>=t.length)throw new Error("Missing value for key: "+t[r]);e.set(t[r],t[r+1])}}))},Be.prototype.toString=function(){return this.__toString("Map {","}")},Be.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},Be.prototype.set=function(e,t){return it(this,e,t)},Be.prototype.setIn=function(e,t){return this.updateIn(e,O,(function(){return t}))},Be.prototype.remove=function(e){return it(this,e,O)},Be.prototype.deleteIn=function(e){return this.updateIn(e,(function(){return O}))},Be.prototype.update=function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r)},Be.prototype.updateIn=function(e,t,r){r||(r=t,t=void 0);var n=ht(this,br(e),t,r);return n===O?void 0:n},Be.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):ot()},Be.prototype.merge=function(){return dt(this,void 0,arguments)},Be.prototype.mergeWith=function(t){return dt(this,t,e.call(arguments,1))},Be.prototype.mergeIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,ot(),(function(e){return"function"==typeof e.merge?e.merge.apply(e,r):r[r.length-1]}))},Be.prototype.mergeDeep=function(){return dt(this,pt,arguments)},Be.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return dt(this,vt(t),r)},Be.prototype.mergeDeepIn=function(t){var r=e.call(arguments,1);return this.updateIn(t,ot(),(function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,r):r[r.length-1]}))},Be.prototype.sort=function(e){return Wt(cr(this,e))},Be.prototype.sortBy=function(e,t){return Wt(cr(this,t,e))},Be.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},Be.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new S)},Be.prototype.asImmutable=function(){return this.__ensureOwner()},Be.prototype.wasAltered=function(){return this.__altered},Be.prototype.__iterator=function(e,t){return new et(this,e,t)},Be.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate((function(t){return n++,e(t[1],t[0],r)}),t),n},Be.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?nt(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Be.isMap=Ke;var ze,He="@@__IMMUTABLE_MAP__@@",Ye=Be.prototype;function Je(e,t){this.ownerID=e,this.entries=t}function $e(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r}function Qe(e,t,r){this.ownerID=e,this.count=t,this.nodes=r}function Xe(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r}function Ze(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r}function et(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&rt(e._root)}function tt(e,t){return U(e,t[0],t[1])}function rt(e,t){return{node:e,index:0,__prev:t}}function nt(e,t,r,n){var o=Object.create(Ye);return o.size=e,o._root=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function ot(){return ze||(ze=nt(0))}function it(e,t,r){var n,o;if(e._root){var i=_(E),a=_(b);if(n=at(e._root,e.__ownerID,0,void 0,t,r,i,a),!a.value)return e;o=e.size+(i.value?r===O?-1:1:0)}else{if(r===O)return e;o=1,n=new Je(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=o,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?nt(o,n):ot()}function at(e,t,r,n,o,i,a,u){return e?e.update(t,r,n,o,i,a,u):i===O?e:(T(u),T(a),new Ze(t,n,[o,i]))}function ut(e){return e.constructor===Ze||e.constructor===Xe}function lt(e,t,r,n,o){if(e.keyHash===n)return new Xe(t,n,[e.entry,o]);var i,a=(0===r?e.keyHash:e.keyHash>>>r)&m,u=(0===r?n:n>>>r)&m;return new $e(t,1<<a|1<<u,a===u?[lt(e,t,r+h,n,o)]:(i=new Ze(t,n,o),a<u?[e,i]:[i,e]))}function st(e,t,r,n){e||(e=new S);for(var o=new Ze(e,Ne(r),[r,n]),i=0;i<t.length;i++){var a=t[i];o=o.update(e,0,void 0,a[0],a[1])}return o}function ct(e,t,r,n){for(var o=0,i=0,a=new Array(r),u=0,l=1,s=t.length;u<s;u++,l<<=1){var c=t[u];void 0!==c&&u!==n&&(o|=l,a[i++]=c)}return new $e(e,o,a)}function ft(e,t,r,n,o){for(var i=0,a=new Array(y),u=0;0!==r;u++,r>>>=1)a[u]=1&r?t[i++]:void 0;return a[n]=o,new Qe(e,i+1,a)}function dt(e,t,r){for(var o=[],i=0;i<r.length;i++){var u=r[i],l=n(u);a(u)||(l=l.map((function(e){return pe(e)}))),o.push(l)}return gt(e,t,o)}function pt(e,t,r){return e&&e.mergeDeep&&a(t)?e.mergeDeep(t):ye(e,t)?e:t}function vt(e){return function(t,r,n){if(t&&t.mergeDeepWith&&a(r))return t.mergeDeepWith(e,r);var o=e(t,r,n);return ye(t,o)?t:o}}function gt(e,t,r){return 0===(r=r.filter((function(e){return 0!==e.size}))).length?e:0!==e.size||e.__ownerID||1!==r.length?e.withMutations((function(e){for(var n=t?function(r,n){e.update(n,O,(function(e){return e===O?r:t(e,r,n)}))}:function(t,r){e.set(r,t)},o=0;o<r.length;o++)r[o].forEach(n)})):e.constructor(r[0])}function ht(e,t,r,n){var o=e===O,i=t.next();if(i.done){var a=o?r:e,u=n(a);return u===a?e:u}Ee(o||e&&e.set,"invalid keyPath");var l=i.value,s=o?O:e.get(l,O),c=ht(s,t,r,n);return c===s?e:c===O?e.remove(l):(o?ot():e).set(l,c)}function yt(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function mt(e,t,r,n){var o=n?e:R(e);return o[t]=r,o}function Ot(e,t,r,n){var o=e.length+1;if(n&&t+1===o)return e[t]=r,e;for(var i=new Array(o),a=0,u=0;u<o;u++)u===t?(i[u]=r,a=-1):i[u]=e[u+a];return i}function Et(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var o=new Array(n),i=0,a=0;a<n;a++)a===t&&(i=1),o[a]=e[a+i];return o}Ye[He]=!0,Ye[g]=Ye.remove,Ye.removeIn=Ye.deleteIn,Je.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(ye(r,o[i][0]))return o[i][1];return n},Je.prototype.update=function(e,t,r,n,o,i,a){for(var u=o===O,l=this.entries,s=0,c=l.length;s<c&&!ye(n,l[s][0]);s++);var f=s<c;if(f?l[s][1]===o:u)return this;if(T(a),(u||!f)&&T(i),!u||1!==l.length){if(!f&&!u&&l.length>=bt)return st(e,l,n,o);var d=e&&e===this.ownerID,p=d?l:R(l);return f?u?s===c-1?p.pop():p[s]=p.pop():p[s]=[n,o]:p.push([n,o]),d?(this.entries=p,this):new Je(e,p)}},$e.prototype.get=function(e,t,r,n){void 0===t&&(t=Ne(r));var o=1<<((0===e?t:t>>>e)&m),i=this.bitmap;return 0==(i&o)?n:this.nodes[yt(i&o-1)].get(e+h,t,r,n)},$e.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Ne(n));var u=(0===t?r:r>>>t)&m,l=1<<u,s=this.bitmap,c=0!=(s&l);if(!c&&o===O)return this;var f=yt(s&l-1),d=this.nodes,p=c?d[f]:void 0,v=at(p,e,t+h,r,n,o,i,a);if(v===p)return this;if(!c&&v&&d.length>=_t)return ft(e,d,s,u,v);if(c&&!v&&2===d.length&&ut(d[1^f]))return d[1^f];if(c&&v&&1===d.length&&ut(v))return v;var g=e&&e===this.ownerID,y=c?v?s:s^l:s|l,E=c?v?mt(d,f,v,g):Et(d,f,g):Ot(d,f,v,g);return g?(this.bitmap=y,this.nodes=E,this):new $e(e,y,E)},Qe.prototype.get=function(e,t,r,n){void 0===t&&(t=Ne(r));var o=(0===e?t:t>>>e)&m,i=this.nodes[o];return i?i.get(e+h,t,r,n):n},Qe.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Ne(n));var u=(0===t?r:r>>>t)&m,l=o===O,s=this.nodes,c=s[u];if(l&&!c)return this;var f=at(c,e,t+h,r,n,o,i,a);if(f===c)return this;var d=this.count;if(c){if(!f&&--d<Tt)return ct(e,s,d,u)}else d++;var p=e&&e===this.ownerID,v=mt(s,u,f,p);return p?(this.count=d,this.nodes=v,this):new Qe(e,d,v)},Xe.prototype.get=function(e,t,r,n){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(ye(r,o[i][0]))return o[i][1];return n},Xe.prototype.update=function(e,t,r,n,o,i,a){void 0===r&&(r=Ne(n));var u=o===O;if(r!==this.keyHash)return u?this:(T(a),T(i),lt(this,e,t,r,[n,o]));for(var l=this.entries,s=0,c=l.length;s<c&&!ye(n,l[s][0]);s++);var f=s<c;if(f?l[s][1]===o:u)return this;if(T(a),(u||!f)&&T(i),u&&2===c)return new Ze(e,this.keyHash,l[1^s]);var d=e&&e===this.ownerID,p=d?l:R(l);return f?u?s===c-1?p.pop():p[s]=p.pop():p[s]=[n,o]:p.push([n,o]),d?(this.entries=p,this):new Xe(e,this.keyHash,p)},Ze.prototype.get=function(e,t,r,n){return ye(r,this.entry[0])?this.entry[1]:n},Ze.prototype.update=function(e,t,r,n,o,i,a){var u=o===O,l=ye(n,this.entry[0]);return(l?o===this.entry[1]:u)?this:(T(a),u?void T(i):l?e&&e===this.ownerID?(this.entry[1]=o,this):new Ze(e,this.keyHash,[n,o]):(T(i),lt(this,e,t,Ne(n),[n,o])))},Je.prototype.iterate=Xe.prototype.iterate=function(e,t){for(var r=this.entries,n=0,o=r.length-1;n<=o;n++)if(!1===e(r[t?o-n:n]))return!1},$e.prototype.iterate=Qe.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,o=r.length-1;n<=o;n++){var i=r[t?o-n:n];if(i&&!1===i.iterate(e,t))return!1}},Ze.prototype.iterate=function(e,t){return e(this.entry)},t(et,V),et.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r,n=t.node,o=t.index++;if(n.entry){if(0===o)return tt(e,n.entry)}else if(n.entries){if(o<=(r=n.entries.length-1))return tt(e,n.entries[this._reverse?r-o:o])}else if(o<=(r=n.nodes.length-1)){var i=n.nodes[this._reverse?r-o:o];if(i){if(i.entry)return tt(e,i.entry);t=this._stack=rt(i,t)}continue}t=this._stack=this._stack.__prev}return q()};var bt=y/4,_t=y/2,Tt=y/4;function St(e){var t=Ft();if(null==e)return t;if(Rt(e))return e;var r=o(e),n=r.size;return 0===n?t:(Ge(n),n>0&&n<y?jt(0,n,h,null,new Nt(r.toArray())):t.withMutations((function(e){e.setSize(n),r.forEach((function(t,r){return e.set(r,t)}))})))}function Rt(e){return!(!e||!e[Ct])}t(St,Se),St.of=function(){return this(arguments)},St.prototype.toString=function(){return this.__toString("List [","]")},St.prototype.get=function(e,t){if((e=P(this,e))>=0&&e<this.size){var r=Dt(this,e+=this._origin);return r&&r.array[e&m]}return t},St.prototype.set=function(e,t){return kt(this,e,t)},St.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},St.prototype.insert=function(e,t){return this.splice(e,0,t)},St.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=h,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ft()},St.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations((function(r){Vt(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])}))},St.prototype.pop=function(){return Vt(this,0,-1)},St.prototype.unshift=function(){var e=arguments;return this.withMutations((function(t){Vt(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])}))},St.prototype.shift=function(){return Vt(this,1)},St.prototype.merge=function(){return Ut(this,void 0,arguments)},St.prototype.mergeWith=function(t){return Ut(this,t,e.call(arguments,1))},St.prototype.mergeDeep=function(){return Ut(this,pt,arguments)},St.prototype.mergeDeepWith=function(t){var r=e.call(arguments,1);return Ut(this,vt(t),r)},St.prototype.setSize=function(e){return Vt(this,0,e)},St.prototype.slice=function(e,t){var r=this.size;return L(e,t,r)?this:Vt(this,I(e,r),A(t,r))},St.prototype.__iterator=function(e,t){var r=0,n=wt(this,t);return new V((function(){var t=n();return t===At?q():U(e,r++,t)}))},St.prototype.__iterate=function(e,t){for(var r,n=0,o=wt(this,t);(r=o())!==At&&!1!==e(r,n++,this););return n},St.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?jt(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},St.isList=Rt;var Ct="@@__IMMUTABLE_LIST__@@",Pt=St.prototype;function Nt(e,t){this.array=e,this.ownerID=t}Pt[Ct]=!0,Pt[g]=Pt.remove,Pt.setIn=Ye.setIn,Pt.deleteIn=Pt.removeIn=Ye.removeIn,Pt.update=Ye.update,Pt.updateIn=Ye.updateIn,Pt.mergeIn=Ye.mergeIn,Pt.mergeDeepIn=Ye.mergeDeepIn,Pt.withMutations=Ye.withMutations,Pt.asMutable=Ye.asMutable,Pt.asImmutable=Ye.asImmutable,Pt.wasAltered=Ye.wasAltered,Nt.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&m;if(n>=this.array.length)return new Nt([],e);var o,i=0===n;if(t>0){var a=this.array[n];if((o=a&&a.removeBefore(e,t-h,r))===a&&i)return this}if(i&&!o)return this;var u=Mt(this,e);if(!i)for(var l=0;l<n;l++)u.array[l]=void 0;return o&&(u.array[n]=o),u},Nt.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n,o=r-1>>>t&m;if(o>=this.array.length)return this;if(t>0){var i=this.array[o];if((n=i&&i.removeAfter(e,t-h,r))===i&&o===this.array.length-1)return this}var a=Mt(this,e);return a.array.splice(o+1),n&&(a.array[o]=n),a};var Lt,It,At={};function wt(e,t){var r=e._origin,n=e._capacity,o=qt(n),i=e._tail;return a(e._root,e._level,0);function a(e,t,r){return 0===t?u(e,r):l(e,t,r)}function u(e,a){var u=a===o?i&&i.array:e&&e.array,l=a>r?0:r-a,s=n-a;return s>y&&(s=y),function(){if(l===s)return At;var e=t?--s:l++;return u&&u[e]}}function l(e,o,i){var u,l=e&&e.array,s=i>r?0:r-i>>o,c=1+(n-i>>o);return c>y&&(c=y),function(){for(;;){if(u){var e=u();if(e!==At)return e;u=null}if(s===c)return At;var r=t?--c:s++;u=a(l&&l[r],o-h,i+(r<<o))}}}}function jt(e,t,r,n,o,i,a){var u=Object.create(Pt);return u.size=t-e,u._origin=e,u._capacity=t,u._level=r,u._root=n,u._tail=o,u.__ownerID=i,u.__hash=a,u.__altered=!1,u}function Ft(){return Lt||(Lt=jt(0,0,h))}function kt(e,t,r){if((t=P(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations((function(e){t<0?Vt(e,t).set(0,r):Vt(e,0,t+1).set(t,r)}));t+=e._origin;var n=e._tail,o=e._root,i=_(b);return t>=qt(e._capacity)?n=xt(n,e.__ownerID,0,t,r,i):o=xt(o,e.__ownerID,e._level,t,r,i),i.value?e.__ownerID?(e._root=o,e._tail=n,e.__hash=void 0,e.__altered=!0,e):jt(e._origin,e._capacity,e._level,o,n):e}function xt(e,t,r,n,o,i){var a,u=n>>>r&m,l=e&&u<e.array.length;if(!l&&void 0===o)return e;if(r>0){var s=e&&e.array[u],c=xt(s,t,r-h,n,o,i);return c===s?e:((a=Mt(e,t)).array[u]=c,a)}return l&&e.array[u]===o?e:(T(i),a=Mt(e,t),void 0===o&&u===a.array.length-1?a.array.pop():a.array[u]=o,a)}function Mt(e,t){return t&&e&&t===e.ownerID?e:new Nt(e?e.array.slice():[],t)}function Dt(e,t){if(t>=qt(e._capacity))return e._tail;if(t<1<<e._level+h){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&m],n-=h;return r}}function Vt(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new S,o=e._origin,i=e._capacity,a=o+t,u=void 0===r?i:r<0?i+r:o+r;if(a===o&&u===i)return e;if(a>=u)return e.clear();for(var l=e._level,s=e._root,c=0;a+c<0;)s=new Nt(s&&s.array.length?[void 0,s]:[],n),c+=1<<(l+=h);c&&(a+=c,o+=c,u+=c,i+=c);for(var f=qt(i),d=qt(u);d>=1<<l+h;)s=new Nt(s&&s.array.length?[s]:[],n),l+=h;var p=e._tail,v=d<f?Dt(e,u-1):d>f?new Nt([],n):p;if(p&&d>f&&a<i&&p.array.length){for(var g=s=Mt(s,n),y=l;y>h;y-=h){var O=f>>>y&m;g=g.array[O]=Mt(g.array[O],n)}g.array[f>>>h&m]=p}if(u<i&&(v=v&&v.removeAfter(n,0,u)),a>=d)a-=d,u-=d,l=h,s=null,v=v&&v.removeBefore(n,0,a);else if(a>o||d<f){for(c=0;s;){var E=a>>>l&m;if(E!==d>>>l&m)break;E&&(c+=(1<<l)*E),l-=h,s=s.array[E]}s&&a>o&&(s=s.removeBefore(n,l,a-c)),s&&d<f&&(s=s.removeAfter(n,l,d-c)),c&&(a-=c,u-=c)}return e.__ownerID?(e.size=u-a,e._origin=a,e._capacity=u,e._level=l,e._root=s,e._tail=v,e.__hash=void 0,e.__altered=!0,e):jt(a,u,l,s,v)}function Ut(e,t,r){for(var n=[],i=0,u=0;u<r.length;u++){var l=r[u],s=o(l);s.size>i&&(i=s.size),a(l)||(s=s.map((function(e){return pe(e)}))),n.push(s)}return i>e.size&&(e=e.setSize(i)),gt(e,t,n)}function qt(e){return e<y?0:e-1>>>h<<h}function Wt(e){return null==e?Kt():Gt(e)?e:Kt().withMutations((function(t){var r=n(e);Ge(r.size),r.forEach((function(e,r){return t.set(r,e)}))}))}function Gt(e){return Ke(e)&&c(e)}function Bt(e,t,r,n){var o=Object.create(Wt.prototype);return o.size=e?e.size:0,o._map=e,o._list=t,o.__ownerID=r,o.__hash=n,o}function Kt(){return It||(It=Bt(ot(),Ft()))}function zt(e,t,r){var n,o,i=e._map,a=e._list,u=i.get(t),l=void 0!==u;if(r===O){if(!l)return e;a.size>=y&&a.size>=2*i.size?(n=(o=a.filter((function(e,t){return void 0!==e&&u!==t}))).toKeyedSeq().map((function(e){return e[0]})).flip().toMap(),e.__ownerID&&(n.__ownerID=o.__ownerID=e.__ownerID)):(n=i.remove(t),o=u===a.size-1?a.pop():a.set(u,void 0))}else if(l){if(r===a.get(u)[1])return e;n=i,o=a.set(u,[t,r])}else n=i.set(t,a.size),o=a.set(a.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=o,e.__hash=void 0,e):Bt(n,o)}function Ht(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function Yt(e){this._iter=e,this.size=e.size}function Jt(e){this._iter=e,this.size=e.size}function $t(e){this._iter=e,this.size=e.size}function Qt(e){var t=mr(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Or,t.__iterateUncached=function(t,r){var n=this;return e.__iterate((function(e,r){return!1!==t(r,e,n)}),r)},t.__iteratorUncached=function(t,r){if(t===k){var n=e.__iterator(t,r);return new V((function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e}))}return e.__iterator(t===F?j:F,r)},t}function Xt(e,t,r){var n=mr(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,o){var i=e.get(n,O);return i===O?o:t.call(r,i,n,e)},n.__iterateUncached=function(n,o){var i=this;return e.__iterate((function(e,o,a){return!1!==n(t.call(r,e,o,a),o,i)}),o)},n.__iteratorUncached=function(n,o){var i=e.__iterator(k,o);return new V((function(){var o=i.next();if(o.done)return o;var a=o.value,u=a[0];return U(n,u,t.call(r,a[1],u,e),o)}))},n}function Zt(e,t){var r=mr(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=Qt(e);return t.reverse=function(){return e.flip()},t}),r.get=function(r,n){return e.get(t?r:-1-r,n)},r.has=function(r){return e.has(t?r:-1-r)},r.includes=function(t){return e.includes(t)},r.cacheResult=Or,r.__iterate=function(t,r){var n=this;return e.__iterate((function(e,r){return t(e,r,n)}),!r)},r.__iterator=function(t,r){return e.__iterator(t,!r)},r}function er(e,t,r,n){var o=mr(e);return n&&(o.has=function(n){var o=e.get(n,O);return o!==O&&!!t.call(r,o,n,e)},o.get=function(n,o){var i=e.get(n,O);return i!==O&&t.call(r,i,n,e)?i:o}),o.__iterateUncached=function(o,i){var a=this,u=0;return e.__iterate((function(e,i,l){if(t.call(r,e,i,l))return u++,o(e,n?i:u-1,a)}),i),u},o.__iteratorUncached=function(o,i){var a=e.__iterator(k,i),u=0;return new V((function(){for(;;){var i=a.next();if(i.done)return i;var l=i.value,s=l[0],c=l[1];if(t.call(r,c,s,e))return U(o,n?s:u++,c,i)}}))},o}function tr(e,t,r){var n=Be().asMutable();return e.__iterate((function(o,i){n.update(t.call(r,o,i,e),0,(function(e){return e+1}))})),n.asImmutable()}function rr(e,t,r){var n=u(e),o=(c(e)?Wt():Be()).asMutable();e.__iterate((function(i,a){o.update(t.call(r,i,a,e),(function(e){return(e=e||[]).push(n?[a,i]:i),e}))}));var i=yr(e);return o.map((function(t){return vr(e,i(t))}))}function nr(e,t,r,n){var o=e.size;if(void 0!==t&&(t|=0),void 0!==r&&(r===1/0?r=o:r|=0),L(t,r,o))return e;var i=I(t,o),a=A(r,o);if(i!=i||a!=a)return nr(e.toSeq().cacheResult(),t,r,n);var u,l=a-i;l==l&&(u=l<0?0:l);var s=mr(e);return s.size=0===u?u:e.size&&u||void 0,!n&&ie(e)&&u>=0&&(s.get=function(t,r){return(t=P(this,t))>=0&&t<u?e.get(t+i,r):r}),s.__iterateUncached=function(t,r){var o=this;if(0===u)return 0;if(r)return this.cacheResult().__iterate(t,r);var a=0,l=!0,s=0;return e.__iterate((function(e,r){if(!l||!(l=a++<i))return s++,!1!==t(e,n?r:s-1,o)&&s!==u})),s},s.__iteratorUncached=function(t,r){if(0!==u&&r)return this.cacheResult().__iterator(t,r);var o=0!==u&&e.__iterator(t,r),a=0,l=0;return new V((function(){for(;a++<i;)o.next();if(++l>u)return q();var e=o.next();return n||t===F?e:U(t,l-1,t===j?void 0:e.value[1],e)}))},s}function or(e,t,r){var n=mr(e);return n.__iterateUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterate(n,o);var a=0;return e.__iterate((function(e,o,u){return t.call(r,e,o,u)&&++a&&n(e,o,i)})),a},n.__iteratorUncached=function(n,o){var i=this;if(o)return this.cacheResult().__iterator(n,o);var a=e.__iterator(k,o),u=!0;return new V((function(){if(!u)return q();var e=a.next();if(e.done)return e;var o=e.value,l=o[0],s=o[1];return t.call(r,s,l,i)?n===k?e:U(n,l,s,e):(u=!1,q())}))},n}function ir(e,t,r,n){var o=mr(e);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var u=!0,l=0;return e.__iterate((function(e,i,s){if(!u||!(u=t.call(r,e,i,s)))return l++,o(e,n?i:l-1,a)})),l},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var u=e.__iterator(k,i),l=!0,s=0;return new V((function(){var e,i,c;do{if((e=u.next()).done)return n||o===F?e:U(o,s++,o===j?void 0:e.value[1],e);var f=e.value;i=f[0],c=f[1],l&&(l=t.call(r,c,i,a))}while(l);return o===k?e:U(o,i,c,e)}))},o}function ar(e,t){var r=u(e),o=[e].concat(t).map((function(e){return a(e)?r&&(e=n(e)):e=r?ue(e):le(Array.isArray(e)?e:[e]),e})).filter((function(e){return 0!==e.size}));if(0===o.length)return e;if(1===o.length){var i=o[0];if(i===e||r&&u(i)||l(e)&&l(i))return i}var s=new te(o);return r?s=s.toKeyedSeq():l(e)||(s=s.toSetSeq()),(s=s.flatten(!0)).size=o.reduce((function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}}),0),s}function ur(e,t,r){var n=mr(e);return n.__iterateUncached=function(n,o){var i=0,u=!1;function l(e,s){var c=this;e.__iterate((function(e,o){return(!t||s<t)&&a(e)?l(e,s+1):!1===n(e,r?o:i++,c)&&(u=!0),!u}),o)}return l(e,0),i},n.__iteratorUncached=function(n,o){var i=e.__iterator(n,o),u=[],l=0;return new V((function(){for(;i;){var e=i.next();if(!1===e.done){var s=e.value;if(n===k&&(s=s[1]),t&&!(u.length<t)||!a(s))return r?e:U(n,l++,s,e);u.push(i),i=s.__iterator(n,o)}else i=u.pop()}return q()}))},n}function lr(e,t,r){var n=yr(e);return e.toSeq().map((function(o,i){return n(t.call(r,o,i,e))})).flatten(!0)}function sr(e,t){var r=mr(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var o=this,i=0;return e.__iterate((function(e,n){return(!i||!1!==r(t,i++,o))&&!1!==r(e,i++,o)}),n),i},r.__iteratorUncached=function(r,n){var o,i=e.__iterator(F,n),a=0;return new V((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?U(r,a++,t):U(r,a++,o.value,o)}))},r}function cr(e,t,r){t||(t=Er);var n=u(e),o=0,i=e.toSeq().map((function(t,n){return[n,t,o++,r?r(t,n,e):t]})).toArray();return i.sort((function(e,r){return t(e[3],r[3])||e[2]-r[2]})).forEach(n?function(e,t){i[t].length=2}:function(e,t){i[t]=e[1]}),n?Y(i):l(e)?J(i):$(i)}function fr(e,t,r){if(t||(t=Er),r){var n=e.toSeq().map((function(t,n){return[t,r(t,n,e)]})).reduce((function(e,r){return dr(t,e[1],r[1])?r:e}));return n&&n[0]}return e.reduce((function(e,r){return dr(t,e,r)?r:e}))}function dr(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(null==r||r!=r)||n>0}function pr(e,t,n){var o=mr(e);return o.size=new te(n).map((function(e){return e.size})).min(),o.__iterate=function(e,t){for(var r,n=this.__iterator(F,t),o=0;!(r=n.next()).done&&!1!==e(r.value,o++,this););return o},o.__iteratorUncached=function(e,o){var i=n.map((function(e){return e=r(e),B(o?e.reverse():e)})),a=0,u=!1;return new V((function(){var r;return u||(r=i.map((function(e){return e.next()})),u=r.some((function(e){return e.done}))),u?q():U(e,a++,t.apply(null,r.map((function(e){return e.value}))))}))},o}function vr(e,t){return ie(e)?t:e.constructor(t)}function gr(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function hr(e){return Ge(e.size),C(e)}function yr(e){return u(e)?n:l(e)?o:i}function mr(e){return Object.create((u(e)?Y:l(e)?J:$).prototype)}function Or(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):H.prototype.cacheResult.call(this)}function Er(e,t){return e>t?1:e<t?-1:0}function br(e){var t=B(e);if(!t){if(!z(e))throw new TypeError("Expected iterable or array-like: "+e);t=B(r(e))}return t}function _r(e,t){var r,n=function(i){if(i instanceof n)return i;if(!(this instanceof n))return new n(i);if(!r){r=!0;var a=Object.keys(e);Cr(o,a),o.size=a.length,o._name=t,o._keys=a,o._defaultValues=e}this._map=Be(i)},o=n.prototype=Object.create(Tr);return o.constructor=n,n}t(Wt,Be),Wt.of=function(){return this(arguments)},Wt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Wt.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},Wt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Kt()},Wt.prototype.set=function(e,t){return zt(this,e,t)},Wt.prototype.remove=function(e){return zt(this,e,O)},Wt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Wt.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate((function(t){return t&&e(t[1],t[0],r)}),t)},Wt.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Wt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?Bt(t,r,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=r,this)},Wt.isOrderedMap=Gt,Wt.prototype[v]=!0,Wt.prototype[g]=Wt.prototype.remove,t(Ht,Y),Ht.prototype.get=function(e,t){return this._iter.get(e,t)},Ht.prototype.has=function(e){return this._iter.has(e)},Ht.prototype.valueSeq=function(){return this._iter.valueSeq()},Ht.prototype.reverse=function(){var e=this,t=Zt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},Ht.prototype.map=function(e,t){var r=this,n=Xt(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},Ht.prototype.__iterate=function(e,t){var r,n=this;return this._iter.__iterate(this._useKeys?function(t,r){return e(t,r,n)}:(r=t?hr(this):0,function(o){return e(o,t?--r:r++,n)}),t)},Ht.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var r=this._iter.__iterator(F,t),n=t?hr(this):0;return new V((function(){var o=r.next();return o.done?o:U(e,t?--n:n++,o.value,o)}))},Ht.prototype[v]=!0,t(Yt,J),Yt.prototype.includes=function(e){return this._iter.includes(e)},Yt.prototype.__iterate=function(e,t){var r=this,n=0;return this._iter.__iterate((function(t){return e(t,n++,r)}),t)},Yt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(F,t),n=0;return new V((function(){var t=r.next();return t.done?t:U(e,n++,t.value,t)}))},t(Jt,$),Jt.prototype.has=function(e){return this._iter.includes(e)},Jt.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){return e(t,t,r)}),t)},Jt.prototype.__iterator=function(e,t){var r=this._iter.__iterator(F,t);return new V((function(){var t=r.next();return t.done?t:U(e,t.value,t.value,t)}))},t($t,Y),$t.prototype.entrySeq=function(){return this._iter.toSeq()},$t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate((function(t){if(t){gr(t);var n=a(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}}),t)},$t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(F,t);return new V((function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){gr(n);var o=a(n);return U(e,o?n.get(0):n[0],o?n.get(1):n[1],t)}}}))},Yt.prototype.cacheResult=Ht.prototype.cacheResult=Jt.prototype.cacheResult=$t.prototype.cacheResult=Or,t(_r,Te),_r.prototype.toString=function(){return this.__toString(Rr(this)+" {","}")},_r.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},_r.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._defaultValues[e];return this._map?this._map.get(e,r):r},_r.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Sr(this,ot()))},_r.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Rr(this));if(this._map&&!this._map.has(e)&&t===this._defaultValues[e])return this;var r=this._map&&this._map.set(e,t);return this.__ownerID||r===this._map?this:Sr(this,r)},_r.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Sr(this,t)},_r.prototype.wasAltered=function(){return this._map.wasAltered()},_r.prototype.__iterator=function(e,t){var r=this;return n(this._defaultValues).map((function(e,t){return r.get(t)})).__iterator(e,t)},_r.prototype.__iterate=function(e,t){var r=this;return n(this._defaultValues).map((function(e,t){return r.get(t)})).__iterate(e,t)},_r.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Sr(this,t,e):(this.__ownerID=e,this._map=t,this)};var Tr=_r.prototype;function Sr(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._map=t,n.__ownerID=r,n}function Rr(e){return e._name||e.constructor.name||"Record"}function Cr(e,t){try{t.forEach(Pr.bind(void 0,e))}catch(e){}}function Pr(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){Ee(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function Nr(e){return null==e?kr():Lr(e)&&!c(e)?e:kr().withMutations((function(t){var r=i(e);Ge(r.size),r.forEach((function(e){return t.add(e)}))}))}function Lr(e){return!(!e||!e[Ar])}Tr[g]=Tr.remove,Tr.deleteIn=Tr.removeIn=Ye.removeIn,Tr.merge=Ye.merge,Tr.mergeWith=Ye.mergeWith,Tr.mergeIn=Ye.mergeIn,Tr.mergeDeep=Ye.mergeDeep,Tr.mergeDeepWith=Ye.mergeDeepWith,Tr.mergeDeepIn=Ye.mergeDeepIn,Tr.setIn=Ye.setIn,Tr.update=Ye.update,Tr.updateIn=Ye.updateIn,Tr.withMutations=Ye.withMutations,Tr.asMutable=Ye.asMutable,Tr.asImmutable=Ye.asImmutable,t(Nr,Re),Nr.of=function(){return this(arguments)},Nr.fromKeys=function(e){return this(n(e).keySeq())},Nr.prototype.toString=function(){return this.__toString("Set {","}")},Nr.prototype.has=function(e){return this._map.has(e)},Nr.prototype.add=function(e){return jr(this,this._map.set(e,!0))},Nr.prototype.remove=function(e){return jr(this,this._map.remove(e))},Nr.prototype.clear=function(){return jr(this,this._map.clear())},Nr.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter((function(e){return 0!==e.size}))).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations((function(e){for(var r=0;r<t.length;r++)i(t[r]).forEach((function(t){return e.add(t)}))})):this.constructor(t[0])},Nr.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return i(e)}));var r=this;return this.withMutations((function(e){r.forEach((function(r){t.every((function(e){return e.includes(r)}))||e.remove(r)}))}))},Nr.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map((function(e){return i(e)}));var r=this;return this.withMutations((function(e){r.forEach((function(r){t.some((function(e){return e.includes(r)}))&&e.remove(r)}))}))},Nr.prototype.merge=function(){return this.union.apply(this,arguments)},Nr.prototype.mergeWith=function(t){var r=e.call(arguments,1);return this.union.apply(this,r)},Nr.prototype.sort=function(e){return xr(cr(this,e))},Nr.prototype.sortBy=function(e,t){return xr(cr(this,t,e))},Nr.prototype.wasAltered=function(){return this._map.wasAltered()},Nr.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate((function(t,n){return e(n,n,r)}),t)},Nr.prototype.__iterator=function(e,t){return this._map.map((function(e,t){return t})).__iterator(e,t)},Nr.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},Nr.isSet=Lr;var Ir,Ar="@@__IMMUTABLE_SET__@@",wr=Nr.prototype;function jr(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Fr(e,t){var r=Object.create(wr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function kr(){return Ir||(Ir=Fr(ot()))}function xr(e){return null==e?qr():Mr(e)?e:qr().withMutations((function(t){var r=i(e);Ge(r.size),r.forEach((function(e){return t.add(e)}))}))}function Mr(e){return Lr(e)&&c(e)}wr[Ar]=!0,wr[g]=wr.remove,wr.mergeDeep=wr.merge,wr.mergeDeepWith=wr.mergeWith,wr.withMutations=Ye.withMutations,wr.asMutable=Ye.asMutable,wr.asImmutable=Ye.asImmutable,wr.__empty=kr,wr.__make=Fr,t(xr,Nr),xr.of=function(){return this(arguments)},xr.fromKeys=function(e){return this(n(e).keySeq())},xr.prototype.toString=function(){return this.__toString("OrderedSet {","}")},xr.isOrderedSet=Mr;var Dr,Vr=xr.prototype;function Ur(e,t){var r=Object.create(Vr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function qr(){return Dr||(Dr=Ur(Kt()))}function Wr(e){return null==e?Yr():Gr(e)?e:Yr().unshiftAll(e)}function Gr(e){return!(!e||!e[Kr])}Vr[v]=!0,Vr.__empty=qr,Vr.__make=Ur,t(Wr,Se),Wr.of=function(){return this(arguments)},Wr.prototype.toString=function(){return this.__toString("Stack [","]")},Wr.prototype.get=function(e,t){var r=this._head;for(e=P(this,e);r&&e--;)r=r.next;return r?r.value:t},Wr.prototype.peek=function(){return this._head&&this._head.value},Wr.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,r=arguments.length-1;r>=0;r--)t={value:arguments[r],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):Hr(e,t)},Wr.prototype.pushAll=function(e){if(0===(e=o(e)).size)return this;Ge(e.size);var t=this.size,r=this._head;return e.reverse().forEach((function(e){t++,r={value:e,next:r}})),this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):Hr(t,r)},Wr.prototype.pop=function(){return this.slice(1)},Wr.prototype.unshift=function(){return this.push.apply(this,arguments)},Wr.prototype.unshiftAll=function(e){return this.pushAll(e)},Wr.prototype.shift=function(){return this.pop.apply(this,arguments)},Wr.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Yr()},Wr.prototype.slice=function(e,t){if(L(e,t,this.size))return this;var r=I(e,this.size);if(A(t,this.size)!==this.size)return Se.prototype.slice.call(this,e,t);for(var n=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=n,this._head=o,this.__hash=void 0,this.__altered=!0,this):Hr(n,o)},Wr.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Hr(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Wr.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var r=0,n=this._head;n&&!1!==e(n.value,r++,this);)n=n.next;return r},Wr.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var r=0,n=this._head;return new V((function(){if(n){var t=n.value;return n=n.next,U(e,r++,t)}return q()}))},Wr.isStack=Gr;var Br,Kr="@@__IMMUTABLE_STACK__@@",zr=Wr.prototype;function Hr(e,t,r,n){var o=Object.create(zr);return o.size=e,o._head=t,o.__ownerID=r,o.__hash=n,o.__altered=!1,o}function Yr(){return Br||(Br=Hr(0))}function Jr(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}zr[Kr]=!0,zr.withMutations=Ye.withMutations,zr.asMutable=Ye.asMutable,zr.asImmutable=Ye.asImmutable,zr.wasAltered=Ye.wasAltered,r.Iterator=V,Jr(r,{toArray:function(){Ge(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate((function(t,r){e[r]=t})),e},toIndexedSeq:function(){return new Yt(this)},toJS:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJS?e.toJS():e})).__toJS()},toJSON:function(){return this.toSeq().map((function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e})).__toJS()},toKeyedSeq:function(){return new Ht(this,!0)},toMap:function(){return Be(this.toKeyedSeq())},toObject:function(){Ge(this.size);var e={};return this.__iterate((function(t,r){e[r]=t})),e},toOrderedMap:function(){return Wt(this.toKeyedSeq())},toOrderedSet:function(){return xr(u(this)?this.valueSeq():this)},toSet:function(){return Nr(u(this)?this.valueSeq():this)},toSetSeq:function(){return new Jt(this)},toSeq:function(){return l(this)?this.toIndexedSeq():u(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Wr(u(this)?this.valueSeq():this)},toList:function(){return St(u(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return vr(this,ar(this,e.call(arguments,0)))},includes:function(e){return this.some((function(t){return ye(t,e)}))},entries:function(){return this.__iterator(k)},every:function(e,t){Ge(this.size);var r=!0;return this.__iterate((function(n,o,i){if(!e.call(t,n,o,i))return r=!1,!1})),r},filter:function(e,t){return vr(this,er(this,e,t,!0))},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return Ge(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){Ge(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate((function(n){r?r=!1:t+=e,t+=null!=n?n.toString():""})),t},keys:function(){return this.__iterator(j)},map:function(e,t){return vr(this,Xt(this,e,t))},reduce:function(e,t,r){var n,o;return Ge(this.size),arguments.length<2?o=!0:n=t,this.__iterate((function(t,i,a){o?(o=!1,n=t):n=e.call(r,n,t,i,a)})),n},reduceRight:function(e,t,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return vr(this,Zt(this,!0))},slice:function(e,t){return vr(this,nr(this,e,t,!0))},some:function(e,t){return!this.every(en(e),t)},sort:function(e){return vr(this,cr(this,e))},values:function(){return this.__iterator(F)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(e,t){return C(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return tr(this,e,t)},equals:function(e){return me(this,e)},entrySeq:function(){var e=this;if(e._cache)return new te(e._cache);var t=e.toSeq().map(Zr).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(en(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate((function(r,o,i){if(e.call(t,r,o,i))return n=[o,r],!1})),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(N)},flatMap:function(e,t){return vr(this,lr(this,e,t))},flatten:function(e){return vr(this,ur(this,e,!0))},fromEntrySeq:function(){return new $t(this)},get:function(e,t){return this.find((function(t,r){return ye(r,e)}),void 0,t)},getIn:function(e,t){for(var r,n=this,o=br(e);!(r=o.next()).done;){var i=r.value;if((n=n&&n.get?n.get(i,O):O)===O)return t}return n},groupBy:function(e,t){return rr(this,e,t)},has:function(e){return this.get(e,O)!==O},hasIn:function(e){return this.getIn(e,O)!==O},isSubset:function(e){return e="function"==typeof e.includes?e:r(e),this.every((function(t){return e.includes(t)}))},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:r(e)).isSubset(this)},keyOf:function(e){return this.findKey((function(t){return ye(t,e)}))},keySeq:function(){return this.toSeq().map(Xr).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return fr(this,e)},maxBy:function(e,t){return fr(this,t,e)},min:function(e){return fr(this,e?tn(e):on)},minBy:function(e,t){return fr(this,t?tn(t):on,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return vr(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return vr(this,ir(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(en(e),t)},sortBy:function(e,t){return vr(this,cr(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return vr(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return vr(this,or(this,e,t))},takeUntil:function(e,t){return this.takeWhile(en(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=an(this))}});var $r=r.prototype;$r[f]=!0,$r[D]=$r.values,$r.__toJS=$r.toArray,$r.__toStringMapper=rn,$r.inspect=$r.toSource=function(){return this.toString()},$r.chain=$r.flatMap,$r.contains=$r.includes,Jr(n,{flip:function(){return vr(this,Qt(this))},mapEntries:function(e,t){var r=this,n=0;return vr(this,this.toSeq().map((function(o,i){return e.call(t,[i,o],n++,r)})).fromEntrySeq())},mapKeys:function(e,t){var r=this;return vr(this,this.toSeq().flip().map((function(n,o){return e.call(t,n,o,r)})).flip())}});var Qr=n.prototype;function Xr(e,t){return t}function Zr(e,t){return[t,e]}function en(e){return function(){return!e.apply(this,arguments)}}function tn(e){return function(){return-e.apply(this,arguments)}}function rn(e){return"string"==typeof e?JSON.stringify(e):String(e)}function nn(){return R(arguments)}function on(e,t){return e<t?1:e>t?-1:0}function an(e){if(e.size===1/0)return 0;var t=c(e),r=u(e),n=t?1:0;return un(e.__iterate(r?t?function(e,t){n=31*n+ln(Ne(e),Ne(t))|0}:function(e,t){n=n+ln(Ne(e),Ne(t))|0}:t?function(e){n=31*n+Ne(e)|0}:function(e){n=n+Ne(e)|0}),n)}function un(e,t){return t=Ce(t,3432918353),t=Ce(t<<15|t>>>-15,461845907),t=Ce(t<<13|t>>>-13,5),t=Ce((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=Pe((t=Ce(t^t>>>13,3266489909))^t>>>16)}function ln(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}return Qr[d]=!0,Qr[D]=$r.entries,Qr.__toJS=$r.toObject,Qr.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+rn(e)},Jr(o,{toKeyedSeq:function(){return new Ht(this,!1)},filter:function(e,t){return vr(this,er(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return vr(this,Zt(this,!1))},slice:function(e,t){return vr(this,nr(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(0|t,0),0===r||2===r&&!t)return this;e=I(e,e<0?this.count():this.size);var n=this.slice(0,e);return vr(this,1===r?n:n.concat(R(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(e){return vr(this,ur(this,e,!1))},get:function(e,t){return(e=P(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find((function(t,r){return r===e}),void 0,t)},has:function(e){return(e=P(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return vr(this,sr(this,e))},interleave:function(){var e=[this].concat(R(arguments)),t=pr(this.toSeq(),J.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),vr(this,r)},keySeq:function(){return be(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return vr(this,ir(this,e,t,!1))},zip:function(){return vr(this,pr(this,nn,[this].concat(R(arguments))))},zipWith:function(e){var t=R(arguments);return t[0]=this,vr(this,pr(this,e,t))}}),o.prototype[p]=!0,o.prototype[v]=!0,Jr(i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=$r.includes,i.prototype.contains=i.prototype.includes,Jr(Y,n.prototype),Jr(J,o.prototype),Jr($,i.prototype),Jr(Te,n.prototype),Jr(Se,o.prototype),Jr(Re,i.prototype),{Iterable:r,Seq:H,Collection:_e,Map:Be,OrderedMap:Wt,List:St,Stack:Wr,Set:Nr,OrderedSet:xr,Record:_r,Range:be,Repeat:Oe,is:ye,fromJS:pe}}()},46916:(e,t,r)=>{var n=r(9087),o=r(2174);e.exports=function(e,t,r){(void 0!==r&&!o(e[t],r)||void 0===r&&!(t in e))&&n(e,t,r)}},9906:e=>{e.exports=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}},12797:e=>{e.exports=function(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},86752:(e,t,r)=>{var n=r(79557)();e.exports=n},43346:(e,t,r)=>{var n=r(86752),o=r(65555);e.exports=function(e,t){return e&&n(e,t,o)}},43436:(e,t,r)=>{var n=r(12797),o=r(28086),i=r(63234);e.exports=function(e,t,r){return t==t?i(e,t,r):n(e,o,r)}},14198:(e,t,r)=>{var n=r(64792),o=r(31871);e.exports=function(e,t,r,i){var a=r.length,u=a,l=!i;if(null==e)return!u;for(e=Object(e);a--;){var s=r[a];if(l&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<u;){var c=(s=r[a])[0],f=e[c],d=s[1];if(l&&s[2]){if(void 0===f&&!(c in e))return!1}else{var p=new n;if(i)var v=i(f,d,c,e,t,p);if(!(void 0===v?o(d,f,3,i,p):v))return!1}}return!0}},28086:e=>{e.exports=function(e){return e!=e}},57279:(e,t,r)=>{var n=r(42978),o=r(20339),i=r(88199),a=r(42298),u=r(39189);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?a(e)?o(e[0],e[1]):n(e):u(e)}},42978:(e,t,r)=>{var n=r(14198),o=r(25961),i=r(69369);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},20339:(e,t,r)=>{var n=r(31871),o=r(71540),i=r(7965),a=r(34060),u=r(14039),l=r(69369),s=r(6208);e.exports=function(e,t){return a(e)&&u(t)?l(s(e),t):function(r){var a=o(r,e);return void 0===a&&a===t?i(r,e):n(t,a,3)}}},25125:(e,t,r)=>{var n=r(64792),o=r(46916),i=r(86752),a=r(82356),u=r(44166),l=r(56941),s=r(45766);e.exports=function e(t,r,c,f,d){t!==r&&i(r,(function(i,l){if(d||(d=new n),u(i))a(t,r,l,c,e,f,d);else{var p=f?f(s(t,l),i,l+"",t,r,d):void 0;void 0===p&&(p=i),o(t,l,p)}}),l)}},82356:(e,t,r)=>{var n=r(46916),o=r(40804),i=r(23369),a=r(41603),u=r(11416),l=r(60424),s=r(42298),c=r(49193),f=r(39275),d=r(70712),p=r(44166),v=r(48565),g=r(77711),h=r(45766),y=r(95549);e.exports=function(e,t,r,m,O,E,b){var _=h(e,r),T=h(t,r),S=b.get(T);if(S)n(e,r,S);else{var R=E?E(_,T,r+"",e,t,b):void 0,C=void 0===R;if(C){var P=s(T),N=!P&&f(T),L=!P&&!N&&g(T);R=T,P||N||L?s(_)?R=_:c(_)?R=a(_):N?(C=!1,R=o(T,!0)):L?(C=!1,R=i(T,!0)):R=[]:v(T)||l(T)?(R=_,l(_)?R=y(_):p(_)&&!d(_)||(R=u(T))):C=!1}C&&(b.set(T,R),O(R,T,m,E,b),b.delete(T)),n(e,r,R)}}},28498:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},45840:(e,t,r)=>{var n=r(44057);e.exports=function(e){return function(t){return n(t,e)}}},77654:e=>{var t=Math.ceil,r=Math.max;e.exports=function(e,n,o,i){for(var a=-1,u=r(t((n-e)/(o||1)),0),l=Array(u);u--;)l[i?u:++a]=e,e+=o;return l}},92901:e=>{var t=Math.floor;e.exports=function(e,r){var n="";if(!e||r<1||r>9007199254740991)return n;do{r%2&&(n+=e),(r=t(r/2))&&(e+=e)}while(r);return n}},84915:(e,t,r)=>{var n=r(88199),o=r(96138),i=r(6140);e.exports=function(e,t){return i(o(e,t,n),e+"")}},95163:(e,t,r)=>{var n=r(65602);e.exports=function(e,t){return n(t,(function(t){return e[t]}))}},2024:(e,t,r)=>{var n=r(84915),o=r(99382);e.exports=function(e){return n((function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,u=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,u&&o(r[0],r[1],u)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var l=r[n];l&&e(t,l,n,a)}return t}))}},79557:e=>{e.exports=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),u=a.length;u--;){var l=a[e?u:++o];if(!1===r(i[l],l,i))break}return t}}},79524:(e,t,r)=>{var n=r(77654),o=r(99382),i=r(3351);e.exports=function(e){return function(t,r,a){return a&&"number"!=typeof a&&o(t,r,a)&&(r=a=void 0),t=i(t),void 0===r?(r=t,t=0):r=i(r),a=void 0===a?t<r?1:-1:i(a),n(t,r,a,e)}}},25961:(e,t,r)=>{var n=r(14039),o=r(65555);e.exports=function(e){for(var t=o(e),r=t.length;r--;){var i=t[r],a=e[i];t[r]=[i,a,n(a)]}return t}},99382:(e,t,r)=>{var n=r(2174),o=r(5448),i=r(8267),a=r(44166);e.exports=function(e,t,r){if(!a(r))return!1;var u=typeof t;return!!("number"==u?o(r)&&i(t,r.length):"string"==u&&t in r)&&n(r[t],e)}},14039:(e,t,r)=>{var n=r(44166);e.exports=function(e){return e==e&&!n(e)}},69369:e=>{e.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},45766:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},63234:e=>{e.exports=function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},44889:(e,t,r)=>{var n=r(66408),o=/[\\^$.*+?()[\]{}|]/g,i=RegExp(o.source);e.exports=function(e){return(e=n(e))&&i.test(e)?e.replace(o,"\\$&"):e}},71540:(e,t,r)=>{var n=r(44057);e.exports=function(e,t,r){var o=null==e?void 0:n(e,t);return void 0===o?r:o}},1660:(e,t,r)=>{var n=r(43436),o=r(5448),i=r(93748),a=r(77118),u=r(74114),l=Math.max;e.exports=function(e,t,r,s){e=o(e)?e:u(e),r=r&&!s?a(r):0;var c=e.length;return r<0&&(r=l(c+r,0)),i(e)?r<=c&&e.indexOf(t,r)>-1:!!c&&n(e,t,r)>-1}},49193:(e,t,r)=>{var n=r(5448),o=r(81962);e.exports=function(e){return o(e)&&n(e)}},8727:(e,t,r)=>{var n=r(88003),o=r(51261),i=r(60424),a=r(42298),u=r(5448),l=r(39275),s=r(49154),c=r(77711),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(u(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||c(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(s(e))return!n(e).length;for(var r in e)if(f.call(e,r))return!1;return!0}},93748:(e,t,r)=>{var n=r(94451),o=r(42298),i=r(81962);e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&"[object String]"==n(e)}},74937:(e,t,r)=>{var n=r(9087),o=r(43346),i=r(57279);e.exports=function(e,t){var r={};return t=i(t,3),o(e,(function(e,o,i){n(r,o,t(e,o,i))})),r}},63955:(e,t,r)=>{var n=r(25125),o=r(2024)((function(e,t,r){n(e,t,r)}));e.exports=o},9094:(e,t,r)=>{var n=r(25125),o=r(2024)((function(e,t,r,o){n(e,t,r,o)}));e.exports=o},76175:(e,t,r)=>{var n=r(65602),o=r(57279),i=r(88582),a=r(72979);e.exports=function(e,t){if(null==e)return{};var r=n(a(e),(function(e){return[e]}));return t=o(t),i(e,r,(function(e,r){return t(e,r[0])}))}},39189:(e,t,r)=>{var n=r(28498),o=r(45840),i=r(34060),a=r(6208);e.exports=function(e){return i(e)?n(a(e)):o(e)}},31536:(e,t,r)=>{var n=r(79524)();e.exports=n},59788:(e,t,r)=>{var n=r(92901),o=r(99382),i=r(77118),a=r(66408);e.exports=function(e,t,r){return t=(r?o(e,t,r):void 0===t)?1:i(t),n(a(e),t)}},94738:(e,t,r)=>{var n=r(9906),o=r(44855),i=r(77118),a=r(66408);e.exports=function(e,t,r){return e=a(e),r=null==r?0:n(i(r),0,e.length),t=o(t),e.slice(r,r+t.length)==t}},3351:(e,t,r)=>{var n=r(17806),o=1/0;e.exports=function(e){return e?(e=n(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},77118:(e,t,r)=>{var n=r(3351);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},95549:(e,t,r)=>{var n=r(2701),o=r(56941);e.exports=function(e){return n(e,o(e))}},74114:(e,t,r)=>{var n=r(95163),o=r(65555);e.exports=function(e){return null==e?[]:n(e,o(e))}},58750:function(e){var t;t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpelNode={create:function(e,t){var r,n={},o=e||"Abstract",i=[],a=null;if(n._type=o,n.getType=function(){return o},n.setType=function(e){o=e},n.getChildren=function(){return i},n.addChild=function(e){if(e){if(!e.setParent)throw{name:"Error",message:"Trying to add a child which is not a node: "+JSON.stringify(e)};e.setParent(n),i.push(e)}},n.getParent=function(){return a},n.setParent=function(e){a=e},n.getContext=function(e){return r||e.activeContext.peek()},n.setContext=function(e){r=e},n.getStartPosition=function(){return t>>16},n.getEndPosition=function(){return 65535&t},n.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},n.toString=function(){var e="Kind: "+n.getType();e+=", Children: [";for(var t=0,r=n.getChildren().length;t<r;t+=1)e+="{"+n.getChildren()[t]+"}, ";return e+="]"},0===t)throw{name:"Error",message:"Position cannot be 0"};for(var u=arguments.length,l=Array(u>2?u-2:0),s=2;s<u;s++)l[s-2]=arguments[s];return l&&l.forEach((function(e){n.addChild(e)})),n}}},function(e,t,r){"use strict";function n(e){this.elements=e||[]}Object.defineProperty(t,"__esModule",{value:!0}),t.Stack=n,n.prototype.push=function(e){return this.elements.push(e),e},n.prototype.pop=function(){return this.elements.pop()},n.prototype.peek=function(){return this.elements[this.elements.length-1]},n.prototype.empty=function(){return this.elements.length>0},n.prototype.search=function(e){return this.elements.length-this.elements.indexOf(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};function o(e){this.type=e,this.tokenChars=n[e],this._hasPayload="string"!=typeof n[e],"number"==typeof n[e]&&(this._ordinal=n[e])}for(var i in n)n.hasOwnProperty(i)&&(o[i]=new o(i));o.prototype.toString=function(){return this.type+(0!==this.tokenChars.length?"("+this.tokenChars+")":"")},o.prototype.getLength=function(){return this.tokenChars.length},o.prototype.hasPayload=function(){return this._hasPayload},o.prototype.valueOf=function(e){for(var t in n)if(n.hasOwnProperty(t)&&n[t]===e)return o[t]},o.prototype.ordinal=function(){return this._ordinal},t.TokenKind=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardContext=t.SpelExpressionEvaluator=void 0;var n=r(4),o=r(50);t.SpelExpressionEvaluator=n.SpelExpressionEvaluator,t.StandardContext=o.StandardContext},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpelExpressionEvaluator=void 0;var n=r(5),o=r(1),i={compile:function(e){var t=(0,n.SpelExpressionParser)().parse(e);return{eval:function(e,r){return function(e,t,r){var n,i=new o.Stack;return t||(t={}),i.push(t),n={rootContext:t,activeContext:i,locals:r},e.getValue(n)}(t,e,r)},_compiledExpression:t}},eval:function(e,t,r){return i.compile(e).eval(t,r)}};t.SpelExpressionEvaluator=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpelExpressionParser=void 0;var n=r(2),o=r(6),i=r(8),a=r(9),u=r(10),l=r(11),s=r(12),c=r(13),f=r(14),d=r(15),p=r(16),v=r(17),g=r(18),h=r(19),y=r(20),m=r(21),O=r(22),E=r(23),b=r(24),_=r(25),T=r(26),S=r(27),R=r(28),C=r(29),P=r(30),N=r(31),L=r(32),I=r(33),A=r(34),w=r(35),j=r(36),F=r(37),k=r(38),x=r(39),M=r(40),D=r(41),V=r(42),U=r(43),q=r(44),W=r(45),G=r(46),B=r(47),K=r(48),z=r(49);t.SpelExpressionParser=function(){var e,t,r,H,Y=new RegExp("[\\p{L}\\p{N}_$]+"),J=[];function $(){var e=Q();if(_e()){var t=Se();if(t.getKind()===n.TokenKind.ASSIGN){null===e&&(e=l.NullLiteral.create(Le(t.startPos-1,t.endPos-1))),Te();var r=Q();return g.Assign.create(Ne(t),e,r)}if(t.getKind()===n.TokenKind.ELVIS){null===e&&(e=l.NullLiteral.create(Le(t.startPos-1,t.endPos-2))),Te();var o=$();return null===o&&(o=l.NullLiteral.create(Le(t.startPos+1,t.endPos+1))),k.Elvis.create(Ne(t),e,o)}if(t.getKind()===n.TokenKind.QMARK){null===e&&(e=l.NullLiteral.create(Le(t.startPos-1,t.endPos-1))),Te();var i=$();ye(n.TokenKind.COLON);var a=$();return F.Ternary.create(Ne(t),e,i,a)}}return e}function Q(){for(var e=X();be("or")||me(n.TokenKind.SYMBOLIC_OR);){var t=Te(),r=X();Ce(t,e,r),e=w.OpOr.create(Ne(t),e,r)}return e}function X(){for(var e=Z();be("and")||me(n.TokenKind.SYMBOLIC_AND);){var t=Te(),r=Z();Ce(t,e,r),e=A.OpAnd.create(Ne(t),e,r)}return e}function Z(){var e=ee(),t=function(){var e=Se();if(null===e)return null;if(e.isNumericRelationalOperator())return e;if(e.isIdentifier()){var t=e.stringValue();if("instanceof"===t.toLowerCase())return e.asInstanceOfToken();if("matches"===t.toLowerCase())return e.asMatchesToken();if("between"===t.toLowerCase())return e.asBetweenToken()}return null}();if(null!==t){var r=Te(),o=ee();Ce(r,e,o);var i=t.kind;if(t.isNumericRelationalOperator()){var a=Ne(r);return i===n.TokenKind.GT?O.OpGT.create(a,e,o):i===n.TokenKind.LT?b.OpLT.create(a,e,o):i===n.TokenKind.LE?E.OpLE.create(a,e,o):i===n.TokenKind.GE?m.OpGE.create(a,e,o):i===n.TokenKind.EQ?h.OpEQ.create(a,e,o):y.OpNE.create(a,e,o)}return i===n.TokenKind.INSTANCEOF?U.OpInstanceof.create(Ne(r),e,o):i===n.TokenKind.MATCHES?j.OpMatches.create(Ne(r),e,o):q.OpBetween.create(Ne(r),e,o)}return e}function ee(){for(var e=te();Ee(n.TokenKind.PLUS,n.TokenKind.MINUS,n.TokenKind.INC);){var t=Te(),r=te();Pe(t,r),t.getKind()===n.TokenKind.PLUS?e=_.OpPlus.create(Ne(t),e,r):t.getKind()===n.TokenKind.MINUS&&(e=T.OpMinus.create(Ne(t),e,r))}return e}function te(){for(var e=re();Ee(n.TokenKind.STAR,n.TokenKind.DIV,n.TokenKind.MOD);){var t=Te(),r=re();Ce(t,e,r),e=t.getKind()===n.TokenKind.STAR?S.OpMultiply.create(Ne(t),e,r):t.getKind()===n.TokenKind.DIV?R.OpDivide.create(Ne(t),e,r):C.OpModulus.create(Ne(t),e,r)}return e}function re(){var e,t=ne();if(me(n.TokenKind.POWER)){e=Te();var r=ne();return Pe(e,r),P.OpPower.create(Ne(e),t,r)}return null!==t&&Ee(n.TokenKind.INC,n.TokenKind.DEC)?(e=Te()).getKind()===n.TokenKind.INC?N.OpInc.create(Ne(e),!0,t):L.OpDec.create(Ne(e),!0,t):t}function ne(){var e,t;return Ee(n.TokenKind.PLUS,n.TokenKind.MINUS,n.TokenKind.NOT)?(e=Te(),t=ne(),e.getKind()===n.TokenKind.NOT?I.OpNot.create(Ne(e),t):e.getKind()===n.TokenKind.PLUS?_.OpPlus.create(Ne(e),t):T.OpMinus.create(Ne(e),t)):Ee(n.TokenKind.INC,n.TokenKind.DEC)?(e=Te(),t=ne(),e.getKind()===n.TokenKind.INC?N.OpInc.create(Ne(e),!1,t):L.OpDec.create(Ne(e),!1,t)):function(){var e=[],t=function(){var e=Se();if(null===e)return!1;if(e.getKind()===n.TokenKind.LITERAL_INT||e.getKind()===n.TokenKind.LITERAL_LONG)ge(a.NumberLiteral.create(parseInt(e.stringValue(),10),Ne(e)));else if(e.getKind()===n.TokenKind.LITERAL_REAL||e.getKind()===n.TokenKind.LITERAL_REAL_FLOAT)ge(a.NumberLiteral.create(parseFloat(e.stringValue()),Ne(e)));else if(e.getKind()===n.TokenKind.LITERAL_HEXINT||e.getKind()===n.TokenKind.LITERAL_HEXLONG)ge(a.NumberLiteral.create(parseInt(e.stringValue(),16),Ne(e)));else if(be("true"))ge(i.BooleanLiteral.create(!0,Ne(e)));else if(be("false"))ge(i.BooleanLiteral.create(!1,Ne(e)));else{if(e.getKind()!==n.TokenKind.LITERAL_STRING)return!1;ge(u.StringLiteral.create(e.stringValue(),Ne(e)))}return Te(),!0}()||function(){if(me(n.TokenKind.LPAREN)){Te();var e=$();return ye(n.TokenKind.RPAREN),ge(e),!0}return!1}()||function(){if(me(n.TokenKind.IDENTIFIER)){var e=Se();if("T"!==e.stringValue())return!1;var t=Te();if(me(n.TokenKind.RSQUARE))return ge(f.PropertyReference.create(t.stringValue(),Ne(t))),!0;ye(n.TokenKind.LPAREN);for(var r=de(),o=0;Oe(n.TokenKind.LSQUARE,!0);)ye(n.TokenKind.RSQUARE),o++;return ye(n.TokenKind.RPAREN),ge(W.TypeReference.create(Ne(e),r,o)),!0}return!1}()||function(){if(me(n.TokenKind.IDENTIFIER)){var e=Se();return"null"===e.stringValue().toLowerCase()&&(Te(),ge(l.NullLiteral.create(Ne(e))),!0)}return!1}()||function(){if(be("new")){var e=Te();if(me(n.TokenKind.RSQUARE))return ge(f.PropertyReference.create(e.stringValue(),Ne(e))),!0;var t=de(),r=[];if(r.push(t),me(n.TokenKind.LSQUARE)){for(var o=[];Oe(n.TokenKind.LSQUARE,!0);)me(n.TokenKind.RSQUARE)?o.push(null):o.push($()),ye(n.TokenKind.RSQUARE);se()&&r.push(he()),ge(z.ConstructorReference.create(Ne(e),o,r))}else i=r,me(n.TokenKind.LPAREN)||Re(Ne(Se()),"MISSING_CONSTRUCTOR_ARGS"),ue(i),ye(n.TokenKind.RPAREN),ge(z.ConstructorReference.create(Ne(e),r));return!0}var i;return!1}()||ve(!1)||ie()||function(){if(me(n.TokenKind.BEAN_REF)){var e=Te(),t=null,r=null;return me(n.TokenKind.IDENTIFIER)?r=(t=ye(n.TokenKind.IDENTIFIER)).data:me(n.TokenKind.LITERAL_STRING)?r=(r=(t=ye(n.TokenKind.LITERAL_STRING)).stringValue()).substring(1,r.length()-1):Re(e.startPos,"INVALID_BEAN_REFERENCE"),ge(G.BeanReference.create(Ne(t),r)),!0}return!1}()||le(!1)||fe(!1)||ce()||se()?he():null;for(e.push(t);oe();)e.push(he());return 1===e.length?e[0]:p.CompoundExpression.create(Le(t.getStartPosition(),e[e.length-1].getEndPosition()),e)}()}function oe(){var e,t,r=null;return null!==(r=Ee(n.TokenKind.DOT,n.TokenKind.SAFE_NAVI)?(e=Te(),ve(t=e.getKind()===n.TokenKind.SAFE_NAVI)||ie()||le(t)||fe(t)?he():(null===Se()?Re(e.startPos,"OOD"):Re(e.startPos,"UNEXPECTED_DATA_AFTER_DOT",function(e){return e.getKind().hasPayload()?e.stringValue():e.getKind().toString().toLowerCase()}(Se())),null)):me(n.TokenKind.LSQUARE)&&ce()?he():null)&&(ge(r),!0)}function ie(){if(!me(n.TokenKind.HASH))return!1;var e=Te(),t=ye(n.TokenKind.IDENTIFIER),r=ae();return null===r?(ge(d.VariableReference.create(t.data,Le(e.startPos,t.endPos))),!0):(ge(s.FunctionReference.create(t.data,Le(e.startPos,t.endPos),r)),!0)}function ae(){if(!me(n.TokenKind.LPAREN))return null;var e=[];return ue(e),ye(n.TokenKind.RPAREN),e}function ue(e){var t,r=Se().startPos;do{Te();var o=Se();null===o&&Re(r,"RUN_OUT_OF_ARGUMENTS"),o.getKind()!==n.TokenKind.RPAREN&&e.push($()),t=Se()}while(null!==t&&t.kind===n.TokenKind.COMMA);null===t&&Re(r,"RUN_OUT_OF_ARGUMENTS")}function le(e){var t=Se();if(!Oe(n.TokenKind.PROJECT,!0))return!1;var r=$();return ye(n.TokenKind.RSQUARE),ge(V.Projection.create(e,Ne(t),r)),!0}function se(){var e=Se(),t=[];if(!Oe(n.TokenKind.LCURLY,!0))return!1;var r=null,o=Se();if(Oe(n.TokenKind.RCURLY,!0))r=x.InlineList.create(Le(e.startPos,o.endPos));else if(Oe(n.TokenKind.COLON,!0))o=ye(n.TokenKind.RCURLY),r=M.InlineMap.create(Le(e.startPos,o.endPos));else{var i=$();if(me(n.TokenKind.RCURLY))t.push(i),o=ye(n.TokenKind.RCURLY),r=x.InlineList.create(Le(e.startPos,o.endPos),t);else if(Oe(n.TokenKind.COMMA,!0)){t.push(i);do{t.push($())}while(Oe(n.TokenKind.COMMA,!0));o=ye(n.TokenKind.RCURLY),r=x.InlineList.create(Ne(e.startPos,o.endPos),t)}else if(Oe(n.TokenKind.COLON,!0)){var a=[];for(a.push(i),a.push($());Oe(n.TokenKind.COMMA,!0);)a.push($()),ye(n.TokenKind.COLON),a.push($());o=ye(n.TokenKind.RCURLY),r=M.InlineMap.create(Le(e.startPos,o.endPos),a)}else Re(e.startPos,"OOD")}return ge(r),!0}function ce(){var e=Se();if(!Oe(n.TokenKind.LSQUARE,!0))return!1;var t=$();return ye(n.TokenKind.RSQUARE),ge(v.Indexer.create(Ne(e),t)),!0}function fe(e){var t=Se();if(!function(){if(!_e())return!1;var e=Se();return e.getKind()===n.TokenKind.SELECT||e.getKind()===n.TokenKind.SELECT_FIRST||e.getKind()===n.TokenKind.SELECT_LAST}())return!1;Te();var r=$();return null===r&&Re(Ne(t),"MISSING_SELECTION_EXPRESSION"),ye(n.TokenKind.RSQUARE),t.getKind()===n.TokenKind.SELECT_FIRST?ge(D.Selection.create(e,D.Selection.FIRST,Ne(t),r)):t.getKind()===n.TokenKind.SELECT_LAST?ge(D.Selection.create(e,D.Selection.LAST,Ne(t),r)):ge(D.Selection.create(e,D.Selection.ALL,Ne(t),r)),!0}function de(){for(var t=[],r=Se();pe(r);)Te(),r.kind!==n.TokenKind.DOT&&t.push(B.Identifier.create(r.stringValue(),Ne(r))),r=Se();t.length||(null===r&&Re(e.length(),"OOD"),Re(r.startPos,"NOT_EXPECTED_TOKEN","qualified ID",r.getKind().toString().toLowerCase()));var o=Le(t[0].getStartPosition(),t[t.length-1].getEndPosition());return K.QualifiedIdentifier.create(o,t)}function pe(e){if(null===e||e.kind===n.TokenKind.LITERAL_STRING)return!1;if(e.kind===n.TokenKind.DOT||e.kind===n.TokenKind.IDENTIFIER)return!0;var t=e.stringValue();return t&&t.length&&Y.test(t)}function ve(e){if(me(n.TokenKind.IDENTIFIER)){var t=Te(),r=ae();return null===r?(ge(f.PropertyReference.create(e,t.stringValue(),Ne(t))),!0):(ge(c.MethodReference.create(e,t.stringValue(),Ne(t),r)),!0)}return!1}function ge(e){J.push(e)}function he(){return J.pop()}function ye(t){var r=Te();return null===r&&Re(e.length,"OOD"),r.getKind()!==t&&Re(r.startPos,"NOT_EXPECTED_TOKEN",t.toString().toLowerCase(),r.getKind().toString().toLowerCase()),r}function me(e){return Oe(e,!1)}function Oe(e,t){if(!_e())return!1;var r=Se();return r.getKind()===e?(t&&H++,!0):e===n.TokenKind.IDENTIFIER&&r.getKind().ordinal()>=n.TokenKind.DIV.ordinal()&&r.getKind().ordinal()<=n.TokenKind.NOT.ordinal()&&null!==r.data}function Ee(){if(!_e())return!1;for(var e=Se(),t=Array.prototype.slice.call(arguments),r=0,n=t.length;r<n;r+=1)if(e.getKind()===t[r])return!0;return!1}function be(e){if(!_e())return!1;var t=Se();return t.getKind()===n.TokenKind.IDENTIFIER&&t.stringValue().toLowerCase()===e.toLowerCase()}function _e(){return H<t.length}function Te(){return H>=r?null:t[H++]}function Se(){return H>=r?null:t[H]}function Re(t,r,n,o){throw n&&(r+="\nExpected: "+n),o&&(r+="\nActual: "+o),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+e+"' at position "+t+". Message: "+r}}function Ce(e,t,r){!function(e,t){null===t&&Re(e.startPos,"LEFT_OPERAND_PROBLEM")}(e,t),Pe(e,r)}function Pe(e,t){null===t&&Re(e.startPos,"RIGHT_OPERAND_PROBLEM")}function Ne(e){return(e.startPos<<16)+e.endPos}function Le(e,t){return(e<<16)+t}return{setConfiguration:function(e){},parse:function(n,i){try{e=n,t=o.Tokenizer.tokenize(n),r=t.length,H=0,J=[];var a=$();return _e()&&Re(Se().startPos,"MORE_INPUT",Te().toString()),a}catch(e){throw e.message}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=void 0;var n=r(7),o=r(2),i=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],a=[];!function(){var e;for(e="0".charCodeAt(0);e<="9".charCodeAt(0);e+=1)a[e]|=3;for(e="A".charCodeAt(0);e<="F".charCodeAt(0);e+=1)a[e]|=2;for(e="a".charCodeAt(0);e<="f".charCodeAt(0);e+=1)a[e]|=2;for(e="A".charCodeAt(0);e<="Z".charCodeAt(0);e+=1)a[e]|=4;for(e="a".charCodeAt(0);e<="z".charCodeAt(0);e+=1)a[e]|=4}(),t.Tokenizer={tokenize:function(e){var t=e,r=e+"\0",u=r.length,l=0,s=[];function c(){for(var e,i=l,a=!1;!a;)if("'"===(e=r[l+=1])&&("'"===r[l+1]?l+=1:a=!0),0===e.charCodeAt(0))throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+t+") at position "+l};l+=1,s.push(new n.Token(o.TokenKind.LITERAL_STRING,y(i,l),i,l))}function f(){for(var e,i=l,a=!1;!a;)if('"'===(e=r[l+=1])&&('"'===r[l+1]?l+=1:a=!0),0===e.charCodeAt(0))throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+t+") at position "+l};l+=1,s.push(new n.Token(o.TokenKind.LITERAL_STRING,y(i,l),i,l))}function d(e){var n,o,i,a=!1,u=l,s=r[l+1];if(!e||"x"!==s&&"X"!==s){do{l+=1}while(S(r[l]));if("."===(s=r[l])){a=!0,n=l;do{l+=1}while(S(r[l]));if(l===n+1)return void v(y(u,l=n),!1,u,l)}if(o=l,b("L","l")){if(a)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+t+") at position "+l};v(y(u,o),!0,u,o),l+=1}else if(function(e){return"e"===e||"E"===e}(r[l])){a=!0,function(e){return"+"===e||"-"===e}(r[l+=1])&&(l+=1);do{l+=1}while(S(r[l]));i=!1,_(r[l])?(i=!0,o=l+=1):T(r[l])&&(o=l+=1),h(y(u,l),i,u,l)}else i=!1,_(s=r[l])?(a=!0,i=!0,o=l+=1):T(s)&&(a=!0,o=l+=1),a?h(y(u,o),i,u,o):v(y(u,o),!1,u,o)}else{l+=1;do{l+=1}while(C(r[l]));b("L","l")?(g(y(u+2,l),!0,u,l),l+=1):g(y(u+2,l),!1,u,l)}}function p(){var e,t,a,u=l;do{l+=1}while(R(a=r[l])||S(a)||"_"===a||"$"===a);e=y(u,l),(l-u==2||l-u==3)&&(t=e.toUpperCase(),i.indexOf(t)>=0)?function(e,t,r){s.push(new n.Token(e,r,t,t+e.getLength()))}(o.TokenKind.valueOf(t),u,e):s.push(new n.Token(o.TokenKind.IDENTIFIER,e.replace("\0",""),u,l))}function v(e,t,r,i){t?s.push(new n.Token(o.TokenKind.LITERAL_LONG,e,r,i)):s.push(new n.Token(o.TokenKind.LITERAL_INT,e,r,i))}function g(e,r,i,a){if(0===e.length)throw r?{name:"SpelParseException",message:"Not a long in expression ("+t+") at position "+l}:{name:"SpelParseException",message:"Not an int in expression ("+t+") at position "+l};r?s.push(new n.Token(o.TokenKind.LITERAL_HEXLONG,e,i,a)):s.push(new n.Token(o.TokenKind.LITERAL_HEXINT,e,i,a))}function h(e,t,r,i){t?s.push(new n.Token(o.TokenKind.LITERAL_REAL_FLOAT,e,r,i)):s.push(new n.Token(o.TokenKind.LITERAL_REAL,e,r,i))}function y(e,t){return r.substring(e,t)}function m(e){return 2===e.tokenChars.length&&r[l]===e.tokenChars[0]&&r[l+1]===e.tokenChars[1]}function O(e){s.push(new n.Token(e,null,l,l+1)),l+=1}function E(e){s.push(new n.Token(e,null,l,l+2)),l+=2}function b(e,t){var n=r[l];return n===e||n===t}function _(e){return"f"===e||"F"===e}function T(e){return"d"===e||"D"===e}function S(e){return!(e.charCodeAt(0)>255)&&0!=(1&a[e.charCodeAt(0)])}function R(e){return!(e.charCodeAt(0)>255)&&0!=(4&a[e.charCodeAt(0)])}function C(e){return!(e.charCodeAt(0)>255)&&0!=(2&a[e.charCodeAt(0)])}return function(){for(var e;l<u;)if(R(e=r[l]))p();else switch(e){case"+":m(o.TokenKind.INC)?E(o.TokenKind.INC):O(o.TokenKind.PLUS);break;case"_":p();break;case"-":m(o.TokenKind.DEC)?E(o.TokenKind.DEC):O(o.TokenKind.MINUS);break;case":":O(o.TokenKind.COLON);break;case".":O(o.TokenKind.DOT);break;case",":O(o.TokenKind.COMMA);break;case"*":O(o.TokenKind.STAR);break;case"/":O(o.TokenKind.DIV);break;case"%":O(o.TokenKind.MOD);break;case"(":O(o.TokenKind.LPAREN);break;case")":O(o.TokenKind.RPAREN);break;case"[":O(o.TokenKind.LSQUARE);break;case"#":O(o.TokenKind.HASH);break;case"]":O(o.TokenKind.RSQUARE);break;case"{":O(o.TokenKind.LCURLY);break;case"}":O(o.TokenKind.RCURLY);break;case"@":O(o.TokenKind.BEAN_REF);break;case"^":m(o.TokenKind.SELECT_FIRST)?E(o.TokenKind.SELECT_FIRST):O(o.TokenKind.POWER);break;case"!":m(o.TokenKind.NE)?E(o.TokenKind.NE):m(o.TokenKind.PROJECT)?E(o.TokenKind.PROJECT):O(o.TokenKind.NOT);break;case"=":m(o.TokenKind.EQ)?E(o.TokenKind.EQ):O(o.TokenKind.ASSIGN);break;case"&":if(!m(o.TokenKind.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+t+") at position "+l};E(o.TokenKind.SYMBOLIC_AND);break;case"|":if(!m(o.TokenKind.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+t+") at position "+l};E(o.TokenKind.SYMBOLIC_OR);break;case"?":m(o.TokenKind.SELECT)?E(o.TokenKind.SELECT):m(o.TokenKind.ELVIS)?E(o.TokenKind.ELVIS):m(o.TokenKind.SAFE_NAVI)?E(o.TokenKind.SAFE_NAVI):O(o.TokenKind.QMARK);break;case"$":m(o.TokenKind.SELECT_LAST)?E(o.TokenKind.SELECT_LAST):p();break;case">":m(o.TokenKind.GE)?E(o.TokenKind.GE):O(o.TokenKind.GT);break;case"<":m(o.TokenKind.LE)?E(o.TokenKind.LE):O(o.TokenKind.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d("0"===e);break;case" ":case"\t":case"\r":case"\n":case"\0":l+=1;break;case"'":c();break;case'"':f();break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+t+") at position "+l};default:throw{name:"SpelParseException",message:"Cannot handle character '"+e+"' in expression ("+t+") at position "+l}}}(),s}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Token=void 0;var n=r(2);function o(e,t,r,n){this.kind=e,this.startPos=r,this.endPos=n,t&&(this.data=t)}o.prototype.getKind=function(){return this.kind},o.prototype.toString=function(){var e="[";return e+=this.kind.toString(),this.kind.hasPayload()&&(e+=":"+this.data),e+="]",e+="("+this.startPos+","+this.endPos+")"},o.prototype.isIdentifier=function(){return this.kind===n.TokenKind.IDENTIFIER},o.prototype.isNumericRelationalOperator=function(){return this.kind===n.TokenKind.GT||this.kind===n.TokenKind.GE||this.kind===n.TokenKind.LT||this.kind===n.TokenKind.LE||this.kind===n.TokenKind.EQ||this.kind===n.TokenKind.NE},o.prototype.stringValue=function(){return this.data},o.prototype.asInstanceOfToken=function(){return new o(n.TokenKind.INSTANCEOF,this.startPos,this.endPos)},o.prototype.asMatchesToken=function(){return new o(n.TokenKind.MATCHES,this.startPos,this.endPos)},o.prototype.asBetweenToken=function(){return new o(n.TokenKind.BETWEEN,this.startPos,this.endPos)},o.prototype.getStartPosition=function(){return this.startPos},o.prototype.getEndPosition=function(){return this.endPos},t.Token=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BooleanLiteral=void 0;var n=r(0);t.BooleanLiteral={create:function(e,t){var r=n.SpelNode.create("boolean",t);return r.getValue=function(){return e},r.setValue=function(t){return e=t},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumberLiteral=void 0;var n=r(0);t.NumberLiteral={create:function(e,t){var r=n.SpelNode.create("number",t);return r.getValue=function(){return e},r.setValue=function(t){return e=t},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringLiteral=void 0;var n=r(0);t.StringLiteral={create:function(e,t){var r=n.SpelNode.create("string",t);return e=function(e){return("'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1])&&(e=e.substring(1,e.length-1)),e.replace(/''/g,"'").replace(/""/g,'"')}(e),r.getValue=function(){return e},r.setValue=function(t){return e=t},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullLiteral=void 0;var n=r(0);t.NullLiteral={create:function(e,t){var r=n.SpelNode.create("null",t);return r.getValue=function(){return null},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionReference=void 0;var n=r(0),o=r(1);t.FunctionReference={create:function(e,t,r){var i=n.SpelNode.create("function",t);return i.getRaw=function(){return{functionName:e,args:r}},i.getValue=function(t){var n=t.locals||{},i=t.rootContext,a=[];if(r.forEach((function(e){var r=t.activeContext;t.activeContext=new o.Stack,t.activeContext.push(t.rootContext),a.push(e.getValue(t)),t.activeContext=r})),n[e])return n[e].apply(i,a);throw{name:"FunctionDoesNotExistException",message:"Function '"+e+"' does not exist."}},i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MethodReference=void 0;var n=r(0),o=r(1);t.MethodReference={create:function(e,t,r,i){var a=n.SpelNode.create("method",r);return a.getRaw=function(){return{methodName:t,args:i}},a.getValue=function(r){var n,a=r.activeContext.peek(),u=[];if(!a)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+t+"' for an undefined context."};function l(r){if(null==r){if(e)return null;throw{name:"NullPointerException",message:"Method "+t+" does not exist."}}return r}if(i.forEach((function(e){var t=r.activeContext;r.activeContext=new o.Stack,r.activeContext.push(r.rootContext),u.push(e.getValue(r)),r.activeContext=t})),"get"===t.substr(0,3)&&!a[t])return l(a[t.charAt(3).toLowerCase()+t.substring(4)]);if("set"===t.substr(0,3)&&!a[t])return a[t.charAt(3).toLowerCase()+t.substring(4)]=u[0];if(Array.isArray(a)){if("size"===t)return a.length;if("contains"===t)return a.includes(u[0])}return(n=l(a[t]))?n.apply(a,u):null},a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyReference=void 0;var n=r(0);t.PropertyReference={create:function(e,t,r){var o=n.SpelNode.create("property",r);return o.getRaw=function(){return t},o.getValue=function(r){var n=r.activeContext.peek();if(!n){if(e)return null;throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+t+"' for an undefined context."}}if(void 0===n[t]||null===n[t]){if(e)return null;if("size"===t&&Array.isArray(n))return n.length;throw{name:"NullPointerException",message:"Property '"+t+"' does not exist."}}return n[t]},o.setValue=function(e,r){var n=r.activeContext.peek();if(!n)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+t+"' for an undefined context."};return n[t]=e},o.getName=function(){return t},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableReference=void 0;var n=r(0);t.VariableReference={create:function(e,t){var r=n.SpelNode.create("variable",t);return r.getRaw=function(){return e},r.getValue=function(t){var r=t.activeContext.peek(),n=t.locals;if(!r)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+e+"' for an undefined context."};return"this"===e?r:"root"===e?t.rootContext:n[e]},r.setValue=function(t,r){return r.locals[e]=t},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompoundExpression=void 0;var n=r(0);t.CompoundExpression={create:function(e,t){var r=n.SpelNode.create.apply(null,["compound",e].concat(t));function o(e){var t,n=r.getChildren().length;for(t=0;t<n;t+=1)"indexer"===r.getChildren()[t].getType()?e.activeContext.push(e.activeContext.peek()[r.getChildren()[t].getValue(e)]):e.activeContext.push(r.getChildren()[t].getValue(e));return function(){for(t=0;t<n;t+=1)e.activeContext.pop()}}return r.getValue=function(e){var t;if(!e.activeContext.peek())throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var r=o(e);return t=e.activeContext.peek(),r(),t},r.setValue=function(e,t){var n=o(t),i=r.getChildren().length;return t.activeContext.pop(),e=r.getChildren()[i-1].setValue(e,t),t.activeContext.push(null),n(),e},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Indexer=void 0;var n=r(0),o=r(1);t.Indexer={create:function(e,t){var r=n.SpelNode.create.apply(null,["indexer",e].concat(t));return r.getValue=function(e){var t,n,i=e.activeContext,a=r.getChildren().length;if(e.activeContext=new o.Stack,e.activeContext.push(e.rootContext),!e.activeContext.peek())throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(t=0;t<a;t+=1)e.activeContext.push(r.getChildren()[t].getValue(e));for(n=e.activeContext.peek(),t=0;t<a;t+=1)e.activeContext.pop();return e.activeContext=i,n},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Assign=void 0;var n=r(0);t.Assign={create:function(e,t,r){var o=n.SpelNode.create("assign",e,t,r);return o.getValue=function(e){if(!e.activeContext.peek())throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+t.getValue(e)+"' for an undefined context."};return t.setValue(r.getValue(e),e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpEQ=void 0;var n=r(0);t.OpEQ={create:function(e,t,r){var o=n.SpelNode.create("op-eq",e,t,r);return o.getValue=function(e){return t.getValue(e)===r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpNE=void 0;var n=r(0);t.OpNE={create:function(e,t,r){var o=n.SpelNode.create("op-ne",e,t,r);return o.getValue=function(e){return t.getValue(e)!==r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpGE=void 0;var n=r(0);t.OpGE={create:function(e,t,r){var o=n.SpelNode.create("op-ge",e,t,r);return o.getValue=function(e){return t.getValue(e)>=r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpGT=void 0;var n=r(0);t.OpGT={create:function(e,t,r){var o=n.SpelNode.create("op-gt",e,t,r);return o.getValue=function(e){return t.getValue(e)>r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpLE=void 0;var n=r(0);t.OpLE={create:function(e,t,r){var o=n.SpelNode.create("op-le",e,t,r);return o.getValue=function(e){return t.getValue(e)<=r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpLT=void 0;var n=r(0);t.OpLT={create:function(e,t,r){var o=n.SpelNode.create("op-lt",e,t,r);return o.getValue=function(e){return t.getValue(e)<r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpPlus=void 0;var n=r(0);t.OpPlus={create:function(e,t,r){var o=n.SpelNode.create("op-plus",e,t,r);return o.getValue=function(e){return r?t.getValue(e)+r.getValue(e):+t.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpMinus=void 0;var n=r(0);t.OpMinus={create:function(e,t,r){var o=n.SpelNode.create("op-minus",e,t,r);return o.getValue=function(e){return r?t.getValue(e)-r.getValue(e):-t.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpMultiply=void 0;var n=r(0);t.OpMultiply={create:function(e,t,r){var o=n.SpelNode.create("op-multiply",e,t,r);return o.getValue=function(e){var n=t.getValue(e),o=r.getValue(e);if("number"==typeof n&&"number"==typeof o)return n*o;if("string"==typeof n&&"number"==typeof o){for(var i="",a=0;a<o;a+=1)i+=n;return i}return null},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpDivide=void 0;var n=r(0);t.OpDivide={create:function(e,t,r){var o=n.SpelNode.create("op-divide",e,t,r);return o.getValue=function(e){return t.getValue(e)/r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpModulus=void 0;var n=r(0);t.OpModulus={create:function(e,t,r){var o=n.SpelNode.create("op-modulus",e,t,r);return o.getValue=function(e){return t.getValue(e)%r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpPower=void 0;var n=r(0);t.OpPower={create:function(e,t,r){var o=n.SpelNode.create("op-power",e,t,r);return o.getValue=function(e){return Math.pow(t.getValue(e),r.getValue(e))},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpInc=void 0;var n=r(0);t.OpInc={create:function(e,t,r){var o=n.SpelNode.create("op-inc",e,r);return o.getValue=function(e){var n=r.getValue(e);return r.setValue(n+1,e),t?n:n+1},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpDec=void 0;var n=r(0);t.OpDec={create:function(e,t,r){var o=n.SpelNode.create("op-dec",e,r);return o.getValue=function(e){var n=r.getValue(e);return r.setValue(n-1,e),t?n:n-1},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpNot=void 0;var n=r(0);t.OpNot={create:function(e,t){var r=n.SpelNode.create("op-not",e,t);return r.getValue=function(e){return!t.getValue(e)},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpAnd=void 0;var n=r(0);t.OpAnd={create:function(e,t,r){var o=n.SpelNode.create("op-and",e,t,r);return o.getValue=function(e){return!!t.getValue(e)&&!!r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpOr=void 0;var n=r(0);t.OpOr={create:function(e,t,r){var o=n.SpelNode.create("op-or",e,t,r);return o.getValue=function(e){return!!t.getValue(e)||!!r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpMatches=void 0;var n=r(0);t.OpMatches={create:function(e,t,r){var o=n.SpelNode.create("matches",e,t,r);return o.getValue=function(e){var n=t.getValue(e),o=r.getValue(e);try{return!!new RegExp(o).exec(n)}catch(e){throw{name:"EvaluationException",message:e.toString()}}},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ternary=void 0;var n=r(0);t.Ternary={create:function(e,t,r,o){var i=n.SpelNode.create("ternary",e,t,r,o);return i.getValue=function(e){return t.getValue(e)?r.getValue(e):o.getValue(e)},i}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Elvis=void 0;var n=r(0);t.Elvis={create:function(e,t,r){var o=n.SpelNode.create("elvis",e,t,r);return o.getValue=function(e){return null!==t.getValue(e)?t.getValue(e):r.getValue(e)},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineList=void 0;var n=r(0);t.InlineList={create:function(e,t){var r=n.SpelNode.create("list",e),o=[].concat(t||[]);return r.getRaw=function(){return o},r.getValue=function(e){return o.map((function(t){return t.getValue(e)}))},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineMap=void 0;var n=r(0);t.InlineMap={create:function(e,t){var r=n.SpelNode.create("map",e),o=[].concat(t||[]);return r.getValue=function(e){var t=!0,r=null,n={};return o.forEach((function(o){t?r="property"===o.getType()?o.getName():o.getValue(e):n[r]=o.getValue(e),t=!t})),n},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(0);function i(e,t,r){var n;return r.activeContext.push(e),n=t.getValue(r),r.activeContext.pop(),n}t.Selection={create:function(e,t,r,a){var u=o.SpelNode.create("selection",r,a);return u.getValue=function(e){var r=e.activeContext.peek();if(r){if(Array.isArray(r))return function(e,t,r,n){var o=e.filter((function(e){return i(e,r,n)}));switch(t){case"ALL":return o;case"FIRST":return o[0]||null;case"LAST":return o.length?o[o.length-1]:null}}(r,t,a,e);if("object"===(void 0===r?"undefined":n(r)))return function(e,t,r,n){var o,a,u={},l=[],s={};for(a in e)e.hasOwnProperty(a)&&i(o={key:a,value:e[a]},r,n)&&l.push(o);switch(t){case"ALL":return l.forEach((function(e){u[e.key]=e.value})),u;case"FIRST":return l.length?(s[l[0].key]=l[0].value,s):null;case"LAST":return l.length?(s[l[l.length-1].key]=l[l.length-1].value,s):null}l.forEach((function(e){u[e.key]=e.value}))}(r,t,a,e)}return null},u},FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Projection=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(0);function i(e,t,r){return e.map((function(e){var n;return r.activeContext.push(e),n=t.getValue(r),r.activeContext.pop(),n}))}t.Projection={create:function(e,t,r){var a=o.SpelNode.create("projection",t,r);return a.getValue=function(e){var t,o=e.activeContext.peek(),a=[];if(Array.isArray(o))return i(o,r,e);if("object"===(void 0===o?"undefined":n(o))){for(t in o)o.hasOwnProperty(t)&&a.push(o[t]);return i(a,r,e)}return null},a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpInstanceof=void 0;var n=r(0);t.OpInstanceof={create:function(e,t,r){var o=n.SpelNode.create("instanceof",e,t,r);return o.getValue=function(e){throw{name:"MethodNotImplementedException",message:"OpInstanceOf: Not implemented"}},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpBetween=void 0;var n=r(0);t.OpBetween={create:function(e,t,r){var o=n.SpelNode.create("between",e,t,r);return o.getValue=function(e){throw{name:"MethodNotImplementedException",message:"OpBetween: Not implemented"}},o}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeReference=void 0;var n=r(0);t.TypeReference={create:function(e,t,r){return(t=n.SpelNode.create("typeref",e,t)).getValue=function(e){throw{name:"MethodNotImplementedException",message:"TypeReference: Not implemented"}},t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BeanReference=void 0;var n=r(0);t.BeanReference={create:function(e,t){var r=n.SpelNode.create("beanref",e);return r.getValue=function(e){throw{name:"MethodNotImplementedException",message:"BeanReference: Not implemented"}},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Identifier=void 0;var n=r(0);t.Identifier={create:function(e,t){var r=n.SpelNode.create("identifier",t);return r.getRaw=function(){return e},r.getValue=function(e){throw{name:"MethodNotImplementedException",message:"Identifier: Not implemented"}},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QualifiedIdentifier=void 0;var n=r(0);t.QualifiedIdentifier={create:function(e,t){var r=n.SpelNode.create.apply(n.SpelNode,["qualifiedidentifier",e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t)));return r.getRaw=function(){return t.map((function(e){return e.getRaw()}))},r.getValue=function(e){throw{name:"MethodNotImplementedException",message:"QualifiedIdentifier: Not implemented"}},r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConstructorReference=void 0;var n=r(0),o=r(1);t.ConstructorReference={create:function(e,t,r){var i,a=void 0!==r;a?i=t.length&&t[0]&&"number"===t[0].getType()?t[0].getValue():null:(r=t,t=void 0);var u,l=(u=r,Array.isArray(u)?u:Array.from(u)),s=(l[0],l.slice(1)),c=n.SpelNode.create.apply(n.SpelNode,["constructorref",e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r)));return c.getRaw=function(){return i},c.getValue=function(e){if(a&&s.length<=1){var t=[];return s.forEach((function(r){var n=e.activeContext;e.activeContext=new o.Stack,e.activeContext.push(e.rootContext),t.push(r.getValue(e)),e.activeContext=n})),1===s.length?t[0]:i?new Array(i):[]}throw{name:"MethodNotImplementedException",message:"ConstructorReference: Not implemented"}},c}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardContext={create:function(e,t){var r={};return r.authentication=e||{},r.principal=t||{},r.hasRole=function(e){var t=!1;return!!e&&!(!r.authentication&&!Array.isArray(r.authentication.authorities))&&(r.authentication.authorities.forEach((function(r){r.authority.toLowerCase()===e.toLowerCase()&&(t=!0)})),t)},r.hasPermission=function(){var e=Array.prototype.slice.call(arguments);if(1===e.length)return r.hasRole(e[0])},r}}}])},e.exports=t()},61581:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(r(1660)),o=l(r(87957)),i=l(r(2018)),a=l(r(26025)),u=l(r(7334));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(e){return e.replace(/[\t ]+$/,"")},f=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t||{},this.indentation=new i.default(this.cfg.indent),this.inlineBlock=new a.default,this.params=new u.default(this.cfg.params),this.tokenizer=r,this.tokenOverride=n,this.previousReservedWord={},this.tokens=[],this.index=0}var t,r,l;return t=e,r=[{key:"format",value:function(e){return this.tokens=this.tokenizer.tokenize(e),this.getFormattedQueryFromTokens().trim()}},{key:"getFormattedQueryFromTokens",value:function(){var e=this,t="";return this.tokens.forEach((function(r,n){e.index=n,e.tokenOverride&&(r=e.tokenOverride(r,e.previousReservedWord)||r),r.type===o.default.WHITESPACE||(r.type===o.default.LINE_COMMENT?t=e.formatLineComment(r,t):r.type===o.default.BLOCK_COMMENT?t=e.formatBlockComment(r,t):r.type===o.default.RESERVED_TOP_LEVEL?(t=e.formatTopLevelReservedWord(r,t),e.previousReservedWord=r):r.type===o.default.RESERVED_TOP_LEVEL_NO_INDENT?(t=e.formatTopLevelReservedWordNoIndent(r,t),e.previousReservedWord=r):r.type===o.default.RESERVED_NEWLINE?(t=e.formatNewlineReservedWord(r,t),e.previousReservedWord=r):r.type===o.default.RESERVED?(t=e.formatWithSpaces(r,t),e.previousReservedWord=r):t=r.type===o.default.OPEN_PAREN?e.formatOpeningParentheses(r,t):r.type===o.default.CLOSE_PAREN?e.formatClosingParentheses(r,t):r.type===o.default.PLACEHOLDER?e.formatPlaceholder(r,t):","===r.value?e.formatComma(r,t):":"===r.value?e.formatWithSpaceAfter(r,t):"."===r.value?e.formatWithoutSpaces(r,t):";"===r.value?e.formatQuerySeparator(r,t):e.formatWithSpaces(r,t))})),t}},{key:"formatLineComment",value:function(e,t){return this.addNewline(t+e.value)}},{key:"formatBlockComment",value:function(e,t){return this.addNewline(this.addNewline(t)+this.indentComment(e.value))}},{key:"indentComment",value:function(e){return e.replace(/\n[\t ]*/g,"\n"+this.indentation.getIndent()+" ")}},{key:"formatTopLevelReservedWordNoIndent",value:function(e,t){return this.indentation.decreaseTopLevel(),t=this.addNewline(t)+this.equalizeWhitespace(this.formatReservedWord(e.value)),this.addNewline(t)}},{key:"formatTopLevelReservedWord",value:function(e,t){return this.indentation.decreaseTopLevel(),t=this.addNewline(t),this.indentation.increaseTopLevel(),t+=this.equalizeWhitespace(this.formatReservedWord(e.value)),this.addNewline(t)}},{key:"formatNewlineReservedWord",value:function(e,t){return this.addNewline(t)+this.equalizeWhitespace(this.formatReservedWord(e.value))+" "}},{key:"equalizeWhitespace",value:function(e){return e.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")}},{key:"formatOpeningParentheses",value:function(e,t){var r=[o.default.WHITESPACE,o.default.OPEN_PAREN,o.default.LINE_COMMENT];return(0,n.default)(r,this.previousToken().type)||(t=c(t)),t+=this.cfg.uppercase?e.value.toUpperCase():e.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),t=this.addNewline(t)),t}},{key:"formatClosingParentheses",value:function(e,t){return e.value=this.cfg.uppercase?e.value.toUpperCase():e.value,this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(e,t)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(e,this.addNewline(t)))}},{key:"formatPlaceholder",value:function(e,t){return t+this.params.get(e)+" "}},{key:"formatComma",value:function(e,t){return t=c(t)+e.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedWord.value)?t:this.addNewline(t)}},{key:"formatWithSpaceAfter",value:function(e,t){return c(t)+e.value+" "}},{key:"formatWithoutSpaces",value:function(e,t){return c(t)+e.value}},{key:"formatWithSpaces",value:function(e,t){return t+("reserved"===e.type?this.formatReservedWord(e.value):e.value)+" "}},{key:"formatReservedWord",value:function(e){return this.cfg.uppercase?e.toUpperCase():e}},{key:"formatQuerySeparator",value:function(e,t){return this.indentation.resetIndentation(),c(t)+e.value+"\n".repeat(this.cfg.linesBetweenQueries||1)}},{key:"addNewline",value:function(e){return(e=c(e)).endsWith("\n")||(e+="\n"),e+this.indentation.getIndent()}},{key:"previousToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.tokens[this.index-e]||{}}}],r&&s(t.prototype,r),l&&s(t,l),e}();t.default=f,e.exports=t.default},2018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(59788)),o=i(r(4161));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u="top-level",l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indent=t||"  ",this.indentTypes=[]}var t,r,i;return t=e,(r=[{key:"getIndent",value:function(){return(0,n.default)(this.indent,this.indentTypes.length)}},{key:"increaseTopLevel",value:function(){this.indentTypes.push(u)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push("block-level")}},{key:"decreaseTopLevel",value:function(){(0,o.default)(this.indentTypes)===u&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){for(;this.indentTypes.length>0&&this.indentTypes.pop()===u;);}},{key:"resetIndentation",value:function(){this.indentTypes=[]}}])&&a(t.prototype,r),i&&a(t,i),e}();t.default=l,e.exports=t.default},26025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(87957))&&n.__esModule?n:{default:n};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.level=0}var t,r,n;return t=e,(r=[{key:"beginIfPossible",value:function(e,t){0===this.level&&this.isInlineBlock(e,t)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(e,t){for(var r=0,n=0,i=t;i<e.length;i++){var a=e[i];if((r+=a.value.length)>50)return!1;if(a.type===o.default.OPEN_PAREN)n++;else if(a.type===o.default.CLOSE_PAREN&&0==--n)return!0;if(this.isForbiddenToken(a))return!1}return!1}},{key:"isForbiddenToken",value:function(e){var t=e.type,r=e.value;return t===o.default.RESERVED_TOP_LEVEL||t===o.default.RESERVED_NEWLINE||t===o.default.COMMENT||t===o.default.BLOCK_COMMENT||";"===r}}])&&i(t.prototype,r),n&&i(t,n),e}();t.default=a,e.exports=t.default},7334:(e,t)=>{"use strict";function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t,this.index=0}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=e.key,r=e.value;return this.params?t?this.params[t]:this.params[this.index++]:r}}])&&r(t.prototype,n),o&&r(t,o),e}();t.default=n,e.exports=t.default},87345:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(8727)),o=a(r(44889)),i=a(r(87957));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.WHITESPACE_REGEX=/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)/,this.NUMBER_REGEX=/^((\x2D[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?[0-9]+(\.[0-9]+)?|0x[0-9A-Fa-f]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<>|==|<=|>=|!<|!>|\|\||::|\x2D>>|\x2D>|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|:=|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,this.BLOCK_COMMENT_REGEX=/^(\/\*(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(t.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(t.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(t.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(t.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(t.reservedWords),this.WORD_REGEX=this.createWordRegex(t.specialWordChars),this.STRING_REGEX=this.createStringRegex(t.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(t.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(t.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(t.namedPlaceholderTypes,this.createStringPattern(t.stringTypes))}var t,r,a;return t=e,r=[{key:"createLineCommentRegex",value:function(e){return new RegExp("^((?:".concat(e.map((function(e){return(0,o.default)(e)})).join("|"),").*?(?:\r\n|\r|\n|$))"),"u")}},{key:"createReservedWordRegex",value:function(e){var t=e.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(t,")\\b"),"iu")}},{key:"createWordRegex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new RegExp("^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}".concat(e.join(""),"]+)"),"u")}},{key:"createStringRegex",value:function(e){return new RegExp("^("+this.createStringPattern(e)+")","u")}},{key:"createStringPattern",value:function(e){var t={"``":"((`[^`]*($|`))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return e.map((function(e){return t[e]})).join("|")}},{key:"createParenRegex",value:function(e){var t=this;return new RegExp("^("+e.map((function(e){return t.escapeParen(e)})).join("|")+")","iu")}},{key:"escapeParen",value:function(e){return 1===e.length?(0,o.default)(e):"\\b"+e+"\\b"}},{key:"createPlaceholderRegex",value:function(e,t){if((0,n.default)(e))return!1;var r=e.map(o.default).join("|");return new RegExp("^((?:".concat(r,")(?:").concat(t,"))"),"u")}},{key:"tokenize",value:function(e){if(!e)return[];for(var t,r=[];e.length;)t=this.getNextToken(e,t),e=e.substring(t.value.length),r.push(t);return r}},{key:"getNextToken",value:function(e,t){return this.getWhitespaceToken(e)||this.getCommentToken(e)||this.getStringToken(e)||this.getOpenParenToken(e)||this.getCloseParenToken(e)||this.getPlaceholderToken(e)||this.getNumberToken(e)||this.getReservedWordToken(e,t)||this.getWordToken(e)||this.getOperatorToken(e)}},{key:"getWhitespaceToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(e){return this.getLineCommentToken(e)||this.getBlockCommentToken(e)}},{key:"getLineCommentToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(e){return this.getIdentNamedPlaceholderToken(e)||this.getStringNamedPlaceholderToken(e)||this.getIndexedPlaceholderToken(e)}},{key:"getIdentNamedPlaceholderToken",value:function(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(e){return e.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(e){var t=this;return this.getPlaceholderTokenWithKey({input:e,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(e){return t.getEscapedPlaceholderKey({key:e.slice(2,-1),quoteChar:e.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(e){return this.getPlaceholderTokenWithKey({input:e,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(e){return e.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(e){var t=e.input,r=e.regex,n=e.parseKey,o=this.getTokenOnFirstMatch({input:t,regex:r,type:i.default.PLACEHOLDER});return o&&(o.key=n(o.value)),o}},{key:"getEscapedPlaceholderKey",value:function(e){var t=e.key,r=e.quoteChar;return t.replace(new RegExp((0,o.default)("\\"+r),"gu"),r)}},{key:"getNumberToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(e,t){if(!t||!t.value||"."!==t.value)return this.getTopLevelReservedToken(e)||this.getNewlineReservedToken(e)||this.getTopLevelReservedTokenNoIndent(e)||this.getPlainReservedToken(e)}},{key:"getTopLevelReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getTopLevelReservedTokenNoIndent",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}},{key:"getPlainReservedToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(e){return this.getTokenOnFirstMatch({input:e,type:i.default.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(e){var t=e.input,r=e.type,n=e.regex,o=t.match(n);if(o)return{type:r,value:o[1]}}}],r&&u(t.prototype,r),a&&u(t,a),e}();t.default=l,e.exports=t.default},87957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOP_LEVEL:"reserved-top-level",RESERVED_TOP_LEVEL_NO_INDENT:"reserved-top-level-no-indent",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"},e.exports=t.default},66168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(61581)),o=i(r(87345));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u,l=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],s=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],c=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],f=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t}var t,r,i;return t=e,(r=[{key:"format",value:function(e){return u||(u=new o.default({reservedWords:l,reservedTopLevelWords:s,reservedNewlineWords:f,reservedTopLevelWordsNoIndent:c,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),new n.default(this.cfg,u).format(e)}}])&&a(t.prototype,r),i&&a(t,i),e}();t.default=d,e.exports=t.default},23582:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(61581)),o=i(r(87345));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u,l=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],s=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],c=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],f=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t}var t,r,i;return t=e,(r=[{key:"format",value:function(e){return u||(u=new o.default({reservedWords:l,reservedTopLevelWords:s,reservedNewlineWords:f,reservedTopLevelWordsNoIndent:c,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),new n.default(this.cfg,u).format(e)}}])&&a(t.prototype,r),i&&a(t,i),e}();t.default=d,e.exports=t.default},9924:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(61581)),o=a(r(87345)),i=a(r(87957));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l,s=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],c=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],f=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],d=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],p=function(e,t){if(e.type===i.default.RESERVED_TOP_LEVEL&&"SET"===e.value&&"BY"===t.value)return e.type=i.default.RESERVED,e},v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t}var t,r,i;return t=e,(r=[{key:"format",value:function(e){return l||(l=new o.default({reservedWords:s,reservedTopLevelWords:c,reservedNewlineWords:d,reservedTopLevelWordsNoIndent:f,stringTypes:['""',"N''","''","``"],openParens:["(","CASE","BEGIN"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),new n.default(this.cfg,l,p).format(e)}}])&&u(t.prototype,r),i&&u(t,i),e}();t.default=v,e.exports=t.default},68034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(61581)),o=i(r(87345));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u,l=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CASE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","END","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WHEN","WITH","WORK","WRITE","YEAR_MONTH"],s=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],c=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],f=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfg=t}var t,r,i;return t=e,(r=[{key:"format",value:function(e){return u||(u=new o.default({reservedWords:l,reservedTopLevelWords:s,reservedNewlineWords:f,reservedTopLevelWordsNoIndent:c,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),new n.default(this.cfg,u).format(e)}}])&&a(t.prototype,r),i&&a(t,i),e}();t.default=d,e.exports=t.default},17249:(e,t,r)=>{"use strict";t.ZP=void 0;var n=u(r(66168)),o=u(r(23582)),i=u(r(9924)),a=u(r(68034));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.language){case"db2":return new n.default(t).format(e);case"n1ql":return new o.default(t).format(e);case"pl/sql":return new i.default(t).format(e);case"sql":case void 0:return new a.default(t).format(e);default:throw Error("Unsupported SQL dialect: ".concat(t.language))}};var s={format:l};t.ZP=s},62211:(e,t,r)=>{e.exports=r(76062)},76062:(e,t,r)=>{var n=r(56834).Buffer,o=t,i=/`/g,a=/\./g,u=/[\0\b\t\n\r\x1a\"\'\\]/g,l={"\0":"\\0","\b":"\\b","\t":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};function s(e){for(var t,r=u.lastIndex=0,n="";t=u.exec(e);)n+=e.slice(r,t.index)+l[t[0]],r=u.lastIndex;return 0===r?"'"+e+"'":r<e.length?"'"+n+e.slice(r)+"'":"'"+n+"'"}function c(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}o.escapeId=function(e,t){if(Array.isArray(e)){for(var r="",n=0;n<e.length;n++)r+=(0===n?"":", ")+o.escapeId(e[n],t);return r}return t?"`"+String(e).replace(i,"``")+"`":"`"+String(e).replace(i,"``").replace(a,"`.`")+"`"},o.escape=function(e,t,r){if(null==e)return"NULL";switch(typeof e){case"boolean":return e?"true":"false";case"number":return e+"";case"object":return"[object Date]"===Object.prototype.toString.call(e)?o.dateToString(e,r||"local"):Array.isArray(e)?o.arrayToList(e,r):n.isBuffer(e)?o.bufferToString(e):"function"==typeof e.toSqlString?String(e.toSqlString()):t?s(e.toString()):o.objectToValues(e,r);default:return s(e)}},o.arrayToList=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];Array.isArray(i)?r+=(0===n?"":", ")+"("+o.arrayToList(i,t)+")":r+=(0===n?"":", ")+o.escape(i,!0,t)}return r},o.format=function(e,t,r,n){if(null==t)return e;Array.isArray(t)||(t=[t]);for(var i,a=0,u=/\?+/g,l="",s=0;s<t.length&&(i=u.exec(e));){var c=i[0].length;if(!(c>2)){var f=2===c?o.escapeId(t[s]):o.escape(t[s],r,n);l+=e.slice(a,i.index)+f,a=u.lastIndex,s++}}return 0===a?e:a<e.length?l+e.slice(a):l},o.dateToString=function(e,t){var r,n,o,i,a,u,l,f=new Date(e);if(isNaN(f.getTime()))return"NULL";if("local"===t)r=f.getFullYear(),n=f.getMonth()+1,o=f.getDate(),i=f.getHours(),a=f.getMinutes(),u=f.getSeconds(),l=f.getMilliseconds();else{var d=function(e){if("Z"===e)return 0;var t=e.match(/([\+\-\s])(\d\d):?(\d\d)?/);if(t)return("-"===t[1]?-1:1)*(parseInt(t[2],10)+(t[3]?parseInt(t[3],10):0)/60)*60;return!1}(t);!1!==d&&0!==d&&f.setTime(f.getTime()+6e4*d),r=f.getUTCFullYear(),n=f.getUTCMonth()+1,o=f.getUTCDate(),i=f.getUTCHours(),a=f.getUTCMinutes(),u=f.getUTCSeconds(),l=f.getUTCMilliseconds()}return s(c(r,4)+"-"+c(n,2)+"-"+c(o,2)+" "+c(i,2)+":"+c(a,2)+":"+c(u,2)+"."+c(l,3))},o.bufferToString=function(e){return"X"+s(e.toString("hex"))},o.objectToValues=function(e,t){var r="";for(var n in e){var i=e[n];"function"!=typeof i&&(r+=(0===r.length?"":", ")+o.escapeId(n)+" = "+o.escape(i,!0,t))}return r},o.raw=function(e){if("string"!=typeof e)throw new TypeError("argument sql must be a string");return{toSqlString:function(){return e}}}},35706:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},90472:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},29023:(e,t,r)=>{var n=r(35706);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},27937:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},15350:e=>{function t(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=e.apply(r,n);function u(e){t(a,o,i,u,l,"next",e)}function l(e){t(a,o,i,u,l,"throw",e)}u(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},72380:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},50189:e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},62764:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},21403:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},48333:(e,t,r)=>{var n=r(98479);function o(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,r){var o=n(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(this,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},95595:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6633:(e,t,r)=>{var n=r(53763);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},35493:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},61896:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},14114:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},23269:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},37234:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},81723:(e,t,r)=>{var n=r(85277);e.exports=function(e,t){if(null==e)return{};var r,o,i=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},85277:e=>{e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.__esModule=!0,e.exports.default=e.exports},91917:(e,t,r)=>{var n=r(75624).default,o=r(27937);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},85075:(e,t,r)=>{var n=r(75624).default;function o(){"use strict";e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),a=new C(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return N()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=T(a,r);if(u){if(u===p)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=d(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,a),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p={};function v(){}function g(){}function h(){}var y={};c(y,u,(function(){return this}));var m=Object.getPrototypeOf,O=m&&m(m(P([])));O&&O!==r&&i.call(O,u)&&(y=O);var E=h.prototype=v.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,a,u,l){var s=d(e[o],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==n(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,u,l)}),(function(e){r("throw",e,u,l)})):t.resolve(f).then((function(e){c.value=e,u(c)}),(function(e){return r("throw",e,u,l)}))}l(s.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function T(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=d(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function P(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:N}}function N(){return{value:void 0,done:!0}}return g.prototype=h,c(E,"constructor",h),c(h,"constructor",g),g.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},b(_.prototype),c(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(E),c(E,s,"Generator"),c(E,u,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},53763:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},16459:(e,t,r)=>{var n=r(90472),o=r(14114),i=r(46339),a=r(23269);e.exports=function(e,t){return n(e)||o(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},98479:(e,t,r)=>{var n=r(95595);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},63448:(e,t,r)=>{var n=r(90472),o=r(61896),i=r(46339),a=r(23269);e.exports=function(e){return n(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},66604:(e,t,r)=>{var n=r(29023),o=r(61896),i=r(46339),a=r(37234);e.exports=function(e){return n(e)||o(e)||i(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},75624:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},46339:(e,t,r)=>{var n=r(35706);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},22916:(e,t,r)=>{var n=r(85075)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}}]);
//# sourceMappingURL=4909.a4f3fea6c12d529804ec.js.map